{"version":3,"file":"BundleStars.be179a144f612fe06f07.js","mappings":"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","sources":["webpack://telegram-t/./src/bundles/stars.ts","webpack://telegram-t/./src/components/common/gift/GiftTransferPreview.module.scss?0f0d","webpack://telegram-t/./src/components/common/gift/GiftTransferPreview.tsx","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.module.scss?3156","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.tsx","webpack://telegram-t/./src/components/modals/gift/GiftComposer.module.scss?dac8","webpack://telegram-t/./src/components/modals/gift/GiftComposer.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItem.module.scss?c564","webpack://telegram-t/./src/components/modals/gift/GiftItemPremium.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemStar.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModal.module.scss?fd13","webpack://telegram-t/./src/components/modals/gift/GiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModalResaleScreen.tsx","webpack://telegram-t/./src/components/modals/gift/GiftResaleFilters.module.scss?c5a8","webpack://telegram-t/./src/components/modals/gift/GiftResaleFilters.tsx","webpack://telegram-t/./src/components/modals/gift/ResaleGiftMenuAttributeSticker.module.scss?8276","webpack://telegram-t/./src/components/modals/gift/ResaleGiftMenuAttributeSticker.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.module.scss?7d19","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.tsx","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.module.scss?2bf6","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.tsx","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.module.scss?4f0e","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.module.scss?b7e9","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.tsx","webpack://telegram-t/./src/components/modals/gift/resale/GiftResalePriceComposerModal.module.scss?6666","webpack://telegram-t/./src/components/modals/gift/resale/GiftResalePriceComposerModal.tsx","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.module.scss?3366","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/transfer/GiftTransferModal.tsx","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.module.scss?ae9e","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.tsx","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.module.scss?287b","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.module.scss?80b2","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.module.scss?b8f3","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.tsx","webpack://telegram-t/./src/components/modals/stars/BalanceBlock.tsx","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.module.scss?bbd4","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsPaymentModal.tsx","webpack://telegram-t/./src/components/modals/stars/chatRefund/ChatRefundModal.tsx","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.module.scss?069e","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.tsx","webpack://telegram-t/./src/components/modals/stars/helpers/transaction.ts","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.module.scss?74b5","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.tsx","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.module.scss?5025","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.module.scss?605d","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.module.scss?b947","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.module.scss?a215","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.tsx","webpack://telegram-t/./src/hooks/animations/useTransitionActiveKey.ts","webpack://telegram-t/./src/hooks/useDebouncedMemo.ts","webpack://telegram-t/./src/hooks/usePeerSearch.ts"],"sourcesContent":["export { default as StarsGiftModal } from '../components/modals/stars/gift/StarsGiftModal';\nexport { default as StarsGiftingPickerModal } from '../components/main/premium/StarsGiftingPickerModal';\nexport { default as StarsBalanceModal } from '../components/modals/stars/StarsBalanceModal';\nexport { default as StarPaymentModal } from '../components/modals/stars/StarsPaymentModal';\nexport { default as StarsTransactionInfoModal } from '../components/modals/stars/transaction/StarsTransactionModal';\nexport { default as StarsSubscriptionModal } from '../components/modals/stars/subscription/StarsSubscriptionModal';\nexport { default as PaidReactionModal } from '../components/modals/paidReaction/PaidReactionModal';\nexport { default as GiftModal } from '../components/modals/gift/GiftModal';\nexport { default as GiftRecipientPicker } from '../components/modals/gift/recipient/GiftRecipientPicker';\nexport { default as GiftInfoModal } from '../components/modals/gift/info/GiftInfoModal';\nexport { default as GiftResalePriceComposerModal } from '../components/modals/gift/resale/GiftResalePriceComposerModal';\nexport { default as GiftUpgradeModal } from '../components/modals/gift/upgrade/GiftUpgradeModal';\nexport { default as GiftStatusInfoModal } from '../components/modals/gift/status/GiftStatusInfoModal';\nexport { default as GiftWithdrawModal } from '../components/modals/gift/withdraw/GiftWithdrawModal';\nexport { default as GiftTransferModal } from '../components/modals/gift/transfer/GiftTransferModal';\nexport { default as ChatRefundModal } from '../components/modals/stars/chatRefund/ChatRefundModal';\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftTransferPreview-module__root\",\"giftPreview\":\"GiftTransferPreview-module__giftPreview\",\"backdrop\":\"GiftTransferPreview-module__backdrop\",\"arrow\":\"GiftTransferPreview-module__arrow\"};","import { memo, useMemo } from '../../../lib/teact/teact';\n\nimport type {\n  ApiPeer, ApiStarGiftUnique,\n} from '../../../api/types';\n\nimport { getGiftAttributes } from '../helpers/gifts';\nimport { REM } from '../helpers/mediaDimensions';\n\nimport AnimatedIconFromSticker from '../AnimatedIconFromSticker';\nimport Avatar from '../Avatar';\nimport Icon from '../icons/Icon';\nimport RadialPatternBackground from '../profile/RadialPatternBackground';\n\nimport styles from './GiftTransferPreview.module.scss';\n\ntype OwnProps = {\n  peer: ApiPeer;\n  gift: ApiStarGiftUnique;\n};\n\nconst AVATAR_SIZE = 4 * REM;\nconst GIFT_STICKER_SIZE = 3 * REM;\n\nconst GiftTransferPreview = ({\n  peer,\n  gift,\n}: OwnProps) => {\n  const giftAttributes = useMemo(() => {\n    return getGiftAttributes(gift);\n  }, [gift]);\n\n  if (!giftAttributes) return undefined;\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.giftPreview}>\n        <RadialPatternBackground\n          className={styles.backdrop}\n          backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n          patternColor={giftAttributes.backdrop?.patternColor}\n          patternIcon={giftAttributes.pattern?.sticker}\n        />\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          size={GIFT_STICKER_SIZE}\n          sticker={giftAttributes.model?.sticker}\n        />\n      </div>\n      <Icon name=\"next\" className={styles.arrow} />\n      <Avatar\n        peer={peer}\n        size={AVATAR_SIZE}\n        className={styles.avatar}\n      />\n    </div>\n  );\n};\n\nexport default memo(GiftTransferPreview);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsGiftingPickerModal-module__root\",\"transition\":\"StarsGiftingPickerModal-module__transition\",\"main\":\"StarsGiftingPickerModal-module__main\",\"filter\":\"StarsGiftingPickerModal-module__filter\",\"title\":\"StarsGiftingPickerModal-module__title\",\"buttons\":\"StarsGiftingPickerModal-module__buttons\",\"picker\":\"StarsGiftingPickerModal-module__picker\",\"avatars\":\"StarsGiftingPickerModal-module__avatars\",\"center\":\"StarsGiftingPickerModal-module__center\",\"description\":\"StarsGiftingPickerModal-module__description\",\"premiumFeatures\":\"StarsGiftingPickerModal-module__premiumFeatures\",\"options\":\"StarsGiftingPickerModal-module__options\",\"button\":\"StarsGiftingPickerModal-module__button\"};","import type { FC } from '../../../lib/teact/teact';\nimport {\n  memo, useMemo,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport {\n  isDeletedUser, isUserBot,\n} from '../../../global/helpers';\nimport { filterPeersByQuery } from '../../../global/helpers/peers';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PeerPicker from '../../common/pickers/PeerPicker';\nimport PickerModal from '../../common/pickers/PickerModal';\n\nimport styles from './StarsGiftingPickerModal.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n  activeListIds?: string[];\n  archivedListIds?: string[];\n}\n\nconst StarsGiftingPickerModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  activeListIds,\n  archivedListIds,\n  userIds,\n}) => {\n  const { closeStarsGiftingPickerModal, openStarsGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const combinedIds = unique([\n      ...(userIds || []),\n      ...(activeListIds || []),\n      ...(archivedListIds || []),\n    ]);\n\n    const filteredUserIds = filterPeersByQuery({\n      ids: combinedIds, query: searchQuery, type: 'user',\n    });\n\n    return sortChatIds(filteredUserIds.filter((id) => {\n      const user = usersById[id];\n\n      if (!user) {\n        return false;\n      }\n\n      return !user.isSupport\n        && !isUserBot(user) && !isDeletedUser(user)\n        && id !== currentUserId && id !== SERVICE_NOTIFICATIONS_USER_ID;\n    }));\n  }, [currentUserId, searchQuery, userIds, activeListIds, archivedListIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((newSelectedId?: string) => {\n    if (newSelectedId?.length) {\n      openStarsGiftModal({ forUserId: newSelectedId });\n      closeStarsGiftingPickerModal();\n    }\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeStarsGiftingPickerModal}\n      title={oldLang('GiftStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      confirmButtonText={oldLang('Continue')}\n      onEnter={closeStarsGiftingPickerModal}\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        onSelectedIdChange={handleSelectedUserIdsChange}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    chats: {\n      listIds,\n    },\n    currentUserId,\n  } = global;\n\n  return {\n    userIds: global.contactList?.userIds,\n    activeListIds: listIds.active,\n    archivedListIds: listIds.archived,\n    currentUserId,\n  };\n})(StarsGiftingPickerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftComposer-module__root\",\"header\":\"GiftComposer-module__header\",\"spacer\":\"GiftComposer-module__spacer\",\"title\":\"GiftComposer-module__title\",\"balance-container\":\"GiftComposer-module__balance-container\",\"balanceContainer\":\"GiftComposer-module__balance-container\",\"balance-caption\":\"GiftComposer-module__balance-caption\",\"balanceCaption\":\"GiftComposer-module__balance-caption\",\"star-balance\":\"GiftComposer-module__star-balance\",\"starBalance\":\"GiftComposer-module__star-balance\",\"balance\":\"GiftComposer-module__balance\",\"optionsSection\":\"GiftComposer-module__optionsSection\",\"checkboxTitle\":\"GiftComposer-module__checkboxTitle\",\"actionMessageView\":\"GiftComposer-module__actionMessageView\",\"messageInput\":\"GiftComposer-module__messageInput\",\"limited\":\"GiftComposer-module__limited\",\"footer\":\"GiftComposer-module__footer\",\"switcher\":\"GiftComposer-module__switcher\",\"switcherStarIcon\":\"GiftComposer-module__switcherStarIcon\",\"description\":\"GiftComposer-module__description\",\"main-button\":\"GiftComposer-module__main-button\",\"mainButton\":\"GiftComposer-module__main-button\",\"star\":\"GiftComposer-module__star\",\"background\":\"GiftComposer-module__background\",\"customBgImage\":\"GiftComposer-module__customBgImage\",\"customBgColor\":\"GiftComposer-module__customBgColor\",\"withTransition\":\"GiftComposer-module__withTransition\",\"blurred\":\"GiftComposer-module__blurred\",\"withRightColumn\":\"GiftComposer-module__withRightColumn\"};","import type { ChangeEvent } from 'react';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ThemeKey } from '../../../types';\nimport type { GiftOption } from './GiftModal';\nimport {\n  type ApiMessage, type ApiPeer, type ApiStarsAmount, MAIN_THREAD_ID,\n} from '../../../api/types';\n\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectPeer, selectPeerPaidMessagesStars, selectTabState, selectTheme, selectThemeValues, selectUserFullInfo,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useCustomBackground from '../../../hooks/useCustomBackground';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport ActionMessage from '../../middle/message/ActionMessage';\nimport Button from '../../ui/Button';\nimport Link from '../../ui/Link';\nimport ListItem from '../../ui/ListItem';\nimport Switcher from '../../ui/Switcher';\nimport TextArea from '../../ui/TextArea';\n\nimport styles from './GiftComposer.module.scss';\n\nexport type OwnProps = {\n  gift: GiftOption;\n  giftByStars?: GiftOption;\n  peerId: string;\n};\n\nexport type StateProps = {\n  captionLimit?: number;\n  theme: ThemeKey;\n  isBackgroundBlurred?: boolean;\n  patternColor?: string;\n  customBackground?: string;\n  backgroundColor?: string;\n  peer?: ApiPeer;\n  currentUserId?: string;\n  isPaymentFormLoading?: boolean;\n  starBalance?: ApiStarsAmount;\n  paidMessagesStars?: number;\n  areUniqueStarGiftsDisallowed?: boolean;\n  shouldDisallowLimitedStarGifts?: boolean;\n};\n\nconst LIMIT_DISPLAY_THRESHOLD = 50;\n\nfunction GiftComposer({\n  gift,\n  giftByStars,\n  peerId,\n  peer,\n  captionLimit,\n  theme,\n  isBackgroundBlurred,\n  patternColor,\n  backgroundColor,\n  customBackground,\n  currentUserId,\n  isPaymentFormLoading,\n  starBalance,\n  paidMessagesStars,\n  areUniqueStarGiftsDisallowed,\n  shouldDisallowLimitedStarGifts,\n}: OwnProps & StateProps) {\n  const {\n    sendStarGift, sendPremiumGiftByStars, openInvoice, openGiftUpgradeModal, openStarsBalanceModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [giftMessage, setGiftMessage] = useState<string>('');\n  const [shouldHideName, setShouldHideName] = useState<boolean>(false);\n  const [shouldPayForUpgrade, setShouldPayForUpgrade] = useState<boolean>(false);\n  const [shouldPayByStars, setShouldPayByStars] = useState<boolean>(false);\n\n  const customBackgroundValue = useCustomBackground(theme, customBackground);\n\n  useEffect(() => {\n    if (shouldDisallowLimitedStarGifts) {\n      setShouldPayForUpgrade(true);\n    }\n  }, [shouldDisallowLimitedStarGifts, shouldPayForUpgrade]);\n\n  const isStarGift = 'id' in gift && gift.type === 'starGift';\n  const isPremiumGift = 'months' in gift;\n  const hasPremiumByStars = giftByStars && 'amount' in giftByStars;\n  const isPeerUser = peer && isApiPeerUser(peer);\n  const isSelf = peerId === currentUserId;\n\n  const localMessage = useMemo(() => {\n    if (isPremiumGift) {\n      const currentGift = shouldPayByStars && hasPremiumByStars ? giftByStars : gift;\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'giftPremium',\n            amount: currentGift.amount,\n            currency: currentGift.currency,\n            months: gift.months,\n            message: giftMessage ? { text: giftMessage } : undefined,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n\n    if (isStarGift) {\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'starGift',\n            message: giftMessage?.length ? {\n              text: giftMessage,\n            } : undefined,\n            isNameHidden: shouldHideName || undefined,\n            starsToConvert: gift.starsToConvert,\n            canUpgrade: shouldPayForUpgrade || undefined,\n            alreadyPaidUpgradeStars: shouldPayForUpgrade ? gift.upgradeStars : undefined,\n            gift,\n            peerId,\n            fromId: currentUserId,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n    return undefined;\n  }, [currentUserId, gift, giftMessage, isStarGift,\n    shouldHideName, shouldPayForUpgrade, peerId,\n    shouldPayByStars, hasPremiumByStars, giftByStars, isPremiumGift]);\n\n  const handleGiftMessageChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setGiftMessage(e.target.value);\n  });\n\n  const handleShouldHideNameChange = useLastCallback(() => {\n    setShouldHideName(!shouldHideName);\n  });\n\n  const handleShouldPayForUpgradeChange = useLastCallback(() => {\n    setShouldPayForUpgrade(!shouldPayForUpgrade);\n  });\n\n  const toggleShouldPayByStars = useLastCallback(() => {\n    if (hasPremiumByStars) setShouldPayByStars(!shouldPayByStars);\n  });\n\n  const handleOpenUpgradePreview = useLastCallback(() => {\n    if (!isStarGift) return;\n    openGiftUpgradeModal({\n      giftId: gift.id,\n      peerId,\n    });\n  });\n\n  const handleGetMoreStars = useLastCallback(() => {\n    openStarsBalanceModal({});\n  });\n\n  const handleMainButtonClick = useLastCallback(() => {\n    if (isStarGift) {\n      sendStarGift({\n        peerId,\n        shouldHideName,\n        gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n        shouldUpgrade: shouldPayForUpgrade,\n      });\n      return;\n    }\n\n    if (shouldPayByStars && hasPremiumByStars) {\n      sendPremiumGiftByStars({\n        userId: peerId,\n        months: giftByStars.months,\n        amount: giftByStars.amount,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n      return;\n    }\n\n    if (isPremiumGift) {\n      openInvoice({\n        type: 'giftcode',\n        userIds: [peerId],\n        currency: gift.currency,\n        amount: gift.amount,\n        option: gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n    }\n  });\n\n  const canUseStarsPayment = hasPremiumByStars && starBalance && (starBalance.amount > giftByStars.amount);\n  function renderOptionsSection() {\n    const symbolsLeft = captionLimit ? captionLimit - giftMessage.length : undefined;\n\n    const title = getPeerTitle(lang, peer!)!;\n    return (\n      <div className={styles.optionsSection}>\n\n        {!paidMessagesStars && (\n          <TextArea\n            className={styles.messageInput}\n            onChange={handleGiftMessageChange}\n            value={giftMessage}\n            label={lang('GiftMessagePlaceholder')}\n            maxLength={captionLimit}\n            maxLengthIndicator={\n              symbolsLeft && symbolsLeft < LIMIT_DISPLAY_THRESHOLD ? symbolsLeft.toString() : undefined\n            }\n          />\n        )}\n\n        {canUseStarsPayment && (\n          <ListItem className={styles.switcher} narrow ripple onClick={toggleShouldPayByStars}>\n            <span>\n              {lang('GiftPremiumPayWithStars', {\n                stars: formatStarsAsIcon(lang, giftByStars.amount, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayByStars}\n              onChange={toggleShouldPayByStars}\n              label={lang('GiftPremiumPayWithStarsAcc')}\n            />\n          </ListItem>\n        )}\n\n        {hasPremiumByStars && starBalance && (\n          <div className={styles.description}>\n            {lang('GiftPremiumDescriptionYourBalance', {\n              stars: formatStarsAsIcon(lang, starBalance.amount, { className: styles.switcherStarIcon }),\n              link: <Link isPrimary onClick={handleGetMoreStars}>{lang('GetMoreStarsLinkText')}</Link>,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n        )}\n\n        {isStarGift && Boolean(gift.upgradeStars) && !areUniqueStarGiftsDisallowed && (\n          <ListItem\n            className={styles.switcher}\n            narrow\n            ripple\n            onClick={handleShouldPayForUpgradeChange}\n            disabled={shouldDisallowLimitedStarGifts}\n          >\n            <span>\n              {lang('GiftMakeUnique', {\n                stars: formatStarsAsIcon(lang, gift.upgradeStars, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayForUpgrade}\n              onChange={handleShouldPayForUpgradeChange}\n              label={lang('GiftMakeUniqueAcc')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && Boolean(gift.upgradeStars) && !areUniqueStarGiftsDisallowed && (\n          <div className={styles.description}>\n            {isPeerUser\n              ? lang('GiftMakeUniqueDescription', {\n                user: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })\n              : lang('GiftMakeUniqueDescriptionChannel', {\n                peer: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })}\n          </div>\n        )}\n\n        {isStarGift && (\n          <ListItem className={styles.switcher} narrow ripple onClick={handleShouldHideNameChange}>\n            <span>{lang('GiftHideMyName')}</span>\n            <Switcher\n              checked={shouldHideName}\n              onChange={handleShouldHideNameChange}\n              label={lang('GiftHideMyName')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && (\n          <div className={styles.description}>\n            {isSelf ? lang('GiftHideNameDescriptionSelf')\n              : isPeerUser ? lang('GiftHideNameDescription', { receiver: title })\n                : lang('GiftHideNameDescriptionChannel')}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const amount = shouldPayByStars && hasPremiumByStars\n      ? formatStarsAsIcon(lang, giftByStars.amount, { asFont: true })\n      : isStarGift\n        ? formatStarsAsIcon(lang, gift.stars + (shouldPayForUpgrade ? gift.upgradeStars! : 0), { asFont: true })\n        : isPremiumGift ? formatCurrency(lang, gift.amount, gift.currency) : undefined;\n\n    return (\n      <div className={styles.footer}>\n        {isStarGift && Boolean(gift.availabilityRemains) && (\n          <PremiumProgress\n            isPrimary\n            progress={gift.availabilityRemains / gift.availabilityTotal!}\n            rightText={lang('GiftSoldCount', {\n              count: gift.availabilityTotal! - gift.availabilityRemains,\n            })}\n            leftText={lang('GiftLeftCount', { count: gift.availabilityRemains })}\n            className={styles.limited}\n          />\n        )}\n        <Button\n          className={styles.mainButton}\n          size=\"smaller\"\n          onClick={handleMainButtonClick}\n          isLoading={isPaymentFormLoading}\n        >\n          {lang('GiftSend', {\n            amount,\n          }, {\n            withNodes: true,\n          })}\n        </Button>\n      </div>\n    );\n  }\n\n  const bgClassName = buildClassName(\n    styles.background,\n    styles.withTransition,\n    customBackground && styles.customBgImage,\n    backgroundColor && styles.customBgColor,\n    customBackground && isBackgroundBlurred && styles.blurred,\n  );\n\n  if ((!isStarGift && !isPremiumGift) || !localMessage) return;\n\n  return (\n    <div className={buildClassName(styles.root, 'custom-scroll')}>\n      <div\n        className={buildClassName(styles.actionMessageView, 'MessageList')}\n        // @ts-ignore -- FIXME: Find a way to disable interactions but keep a11y\n        inert\n        style={buildStyle(\n          `--pattern-color: ${patternColor}`,\n          backgroundColor && `--theme-background-color: ${backgroundColor}`,\n        )}\n      >\n        <div\n          className={bgClassName}\n          style={customBackgroundValue ? `--custom-background: ${customBackgroundValue}` : undefined}\n        />\n        <ActionMessage\n          key={isStarGift ? gift.id : isPremiumGift ? gift.months : undefined}\n          message={localMessage}\n          threadId={MAIN_THREAD_ID}\n          appearanceOrder={0}\n        />\n      </div>\n      {renderOptionsSection()}\n      <div className={styles.spacer} />\n      {renderFooter()}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { peerId }): StateProps => {\n    const theme = selectTheme(global);\n    const {\n      stars,\n    } = global;\n    const {\n      isBlurred: isBackgroundBlurred,\n      patternColor,\n      background: customBackground,\n      backgroundColor,\n    } = selectThemeValues(global, theme) || {};\n    const peer = selectPeer(global, peerId);\n    const paidMessagesStars = selectPeerPaidMessagesStars(global, peerId);\n    const userFullInfo = selectUserFullInfo(global, peerId);\n    const currentUserId = global.currentUserId;\n    const isGiftForSelf = currentUserId === peerId;\n    const areUniqueStarGiftsDisallowed = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowUniqueStarGifts;\n    const shouldDisallowLimitedStarGifts = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowLimitedStarGifts;\n\n    const tabState = selectTabState(global);\n\n    return {\n      starBalance: stars?.balance,\n      peer,\n      theme,\n      isBackgroundBlurred,\n      patternColor,\n      customBackground,\n      backgroundColor,\n      captionLimit: global.appConfig?.starGiftMaxMessageLength,\n      currentUserId: global.currentUserId,\n      isPaymentFormLoading: tabState.isPaymentFormLoading,\n      paidMessagesStars,\n      areUniqueStarGiftsDisallowed,\n      shouldDisallowLimitedStarGifts,\n    };\n  },\n)(GiftComposer));\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"GiftItem-module__container\",\"starGift\":\"GiftItem-module__starGift\",\"monthsDescription\":\"GiftItem-module__monthsDescription\",\"description\":\"GiftItem-module__description\",\"buy\":\"GiftItem-module__buy\",\"star\":\"GiftItem-module__star\",\"amount\":\"GiftItem-module__amount\",\"starsPriceBlock\":\"GiftItem-module__starsPriceBlock\",\"starsPriceIcon\":\"GiftItem-module__starsPriceIcon\",\"radialPattern\":\"GiftItem-module__radialPattern\",\"stickerWrapper\":\"GiftItem-module__stickerWrapper\"};","import { memo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumGiftCodeOption,\n  ApiSticker,\n} from '../../../api/types';\n\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForDuration,\n} from '../../../global/selectors';\nimport { formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  option: ApiPremiumGiftCodeOption;\n  optionByStars?: ApiPremiumGiftCodeOption;\n  baseMonthAmount?: number;\n  onClick: (gift: ApiPremiumGiftCodeOption) => void;\n};\n\nexport type StateProps = {\n  sticker?: ApiSticker;\n  canPlayAnimatedEmojis?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 86;\n\nfunction GiftItemPremium({\n  sticker, canPlayAnimatedEmojis, baseMonthAmount, option, optionByStars, onClick,\n}: OwnProps & StateProps) {\n  const {\n    months, amount, currency,\n  } = option;\n  const lang = useLang();\n\n  const handleGiftClick = useLastCallback(() => {\n    onClick(option);\n  });\n\n  const perMonth = Math.floor(amount / months);\n  const discount = baseMonthAmount && baseMonthAmount > perMonth\n    ? Math.ceil(100 - perMonth / (baseMonthAmount / 100))\n    : undefined;\n\n  function renderMonths() {\n    const caption = months === 12\n      ? lang('Years', { count: 1 }, { pluralValue: 1 })\n      : lang('Months', { count: months }, { pluralValue: months });\n    return (\n      <div className={styles.monthsDescription}>\n        {caption}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={styles.container}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        play={canPlayAnimatedEmojis}\n        noLoop\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n\n      {renderMonths()}\n      <div className={styles.description}>\n        {lang('PremiumGiftDescription')}\n      </div>\n      <Button className={styles.buy} nonInteractive size=\"tiny\" pill fluid>\n        {formatCurrencyAsString(amount, currency)}\n      </Button>\n      {optionByStars && (\n        <div className={styles.starsPriceBlock}>\n          {lang('GiftPremiumStarsPrice', {\n            stars: (formatStarsAsIcon(lang, optionByStars.amount, { className: styles.starsPriceIcon })),\n          }, { withNodes: true, withMarkdown: true })}\n        </div>\n      )}\n      {Boolean(discount) && (\n        <GiftRibbon color=\"purple\" text={lang('GiftDiscount', { percent: discount })} />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { option }): StateProps => {\n    const sticker = selectGiftStickerForDuration(global, option.months);\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n\n    return {\n      sticker,\n      canPlayAnimatedEmojis,\n    };\n  },\n)(GiftItemPremium));\n","import { memo, useMemo, useRef, useState } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiStarGift,\n} from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { getStickerFromGift } from '../../common/helpers/gifts';\nimport { getGiftAttributes } from '../../common/helpers/gifts';\n\nimport { type ObserveFn, useOnIntersect } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport StickerView from '../../common/StickerView';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  gift: ApiStarGift;\n  observeIntersection?: ObserveFn;\n  onClick: (gift: ApiStarGift, target: 'original' | 'resell') => void;\n  isResale?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 90;\n\nfunction GiftItemStar({\n  gift, observeIntersection, onClick, isResale,\n}: OwnProps) {\n  const { openGiftInfoModal } = getActions();\n\n  const ref = useRef<HTMLDivElement>();\n  const stickerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n  const [isVisible, setIsVisible] = useState(false);\n\n  const sticker = getStickerFromGift(gift);\n  const isGiftUnique = gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n  const regularGift = !isGiftUnique ? gift : undefined;\n\n  const stars = !isGiftUnique ? regularGift?.stars : uniqueGift?.resellPriceInStars;\n  const resellMinStars = regularGift?.resellMinStars;\n  const priceInStarsAsString = !isGiftUnique && isResale && resellMinStars\n    ? lang.number(resellMinStars) + '+' : stars;\n  const isLimited = !isGiftUnique && Boolean(regularGift?.isLimited);\n  const isSoldOut = !isGiftUnique && Boolean(regularGift?.isSoldOut);\n\n  const handleGiftClick = useLastCallback(() => {\n    if (isSoldOut && !isResale) {\n      openGiftInfoModal({ gift });\n      return;\n    }\n\n    onClick(gift, isResale ? 'resell' : 'original');\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    const { backdrop, pattern } = getGiftAttributes(gift) || {};\n\n    if (!backdrop || !pattern) {\n      return undefined;\n    }\n\n    const backdropColors = [backdrop.centerColor, backdrop.edgeColor];\n    const patternColor = backdrop.patternColor;\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternColor={patternColor}\n        patternIcon={pattern.sticker}\n      />\n    );\n  }, [gift]);\n\n  const giftNumber = isGiftUnique ? gift.number : 0;\n\n  const giftRibbon = useMemo(() => {\n    if (isGiftUnique) {\n      const { backdrop } = getGiftAttributes(gift) || {};\n      if (!backdrop) {\n        return undefined;\n      }\n      return (\n        <GiftRibbon\n          color={[backdrop.centerColor, backdrop.edgeColor]}\n          text={\n            lang('GiftSavedNumber', { number: giftNumber })\n          }\n        />\n      );\n    }\n    if (isResale) {\n      return <GiftRibbon color=\"green\" text={lang('GiftRibbonResale')} />;\n    }\n    if (isSoldOut) {\n      return <GiftRibbon color=\"red\" text={lang('GiftSoldOut')} />;\n    }\n    if (isLimited) {\n      return <GiftRibbon color=\"blue\" text={lang('GiftLimited')} />;\n    }\n    return undefined;\n  }, [isGiftUnique, isResale, gift, isSoldOut, isLimited, lang, giftNumber]);\n\n  useOnIntersect(ref, observeIntersection, (entry) => {\n    const visible = entry.isIntersecting;\n    setIsVisible(visible);\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(styles.container, styles.starGift, 'starGiftItem')}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      {radialPatternBackdrop}\n\n      <div\n        ref={stickerRef}\n        className={styles.stickerWrapper}\n        style={`width: ${GIFT_STICKER_SIZE}px; height: ${GIFT_STICKER_SIZE}px`}\n      >\n        {sticker && (\n          <StickerView\n            observeIntersectionForPlaying={observeIntersection}\n            observeIntersectionForLoading={observeIntersection}\n            containerRef={stickerRef}\n            sticker={sticker}\n            size={GIFT_STICKER_SIZE}\n            shouldPreloadPreview\n          />\n        )}\n\n      </div>\n      <Button\n        className={styles.buy}\n        nonInteractive\n        size=\"tiny\"\n        color={isGiftUnique ? 'bluredStarsBadge' : 'stars'}\n        withSparkleEffect={isVisible}\n        pill\n        fluid\n      >\n        {formatStarsAsIcon(lang, priceInStarsAsString || 0, { asFont: true, className: styles.star })}\n      </Button>\n      {giftRibbon}\n    </div>\n  );\n}\n\nexport default memo(GiftItemStar);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftModal-module__root\",\"transition\":\"GiftModal-module__transition\",\"content\":\"GiftModal-module__content\",\"resaleScreenRoot\":\"GiftModal-module__resaleScreenRoot\",\"main\":\"GiftModal-module__main\",\"giftSection\":\"GiftModal-module__giftSection\",\"section\":\"GiftModal-module__section\",\"resaleStarGiftsContainer\":\"GiftModal-module__resaleStarGiftsContainer\",\"starGiftsContainer\":\"GiftModal-module__starGiftsContainer\",\"premiumGiftsGallery\":\"GiftModal-module__premiumGiftsGallery\",\"header\":\"GiftModal-module__header\",\"resaleHeader\":\"GiftModal-module__resaleHeader\",\"resaleHeaderContentContainer\":\"GiftModal-module__resaleHeaderContentContainer\",\"headerSlide\":\"GiftModal-module__headerSlide\",\"headerText\":\"GiftModal-module__headerText\",\"hiddenHeader\":\"GiftModal-module__hiddenHeader\",\"resaleHeaderText\":\"GiftModal-module__resaleHeaderText\",\"commonHeaderText\":\"GiftModal-module__commonHeaderText\",\"resaleHeaderDescription\":\"GiftModal-module__resaleHeaderDescription\",\"closeButton\":\"GiftModal-module__closeButton\",\"balance\":\"GiftModal-module__balance\",\"avatars\":\"GiftModal-module__avatars\",\"logoBackground\":\"GiftModal-module__logoBackground\",\"center\":\"GiftModal-module__center\",\"description\":\"GiftModal-module__description\",\"starGiftsDescription\":\"GiftModal-module__starGiftsDescription\",\"boostIcon\":\"GiftModal-module__boostIcon\",\"optionBottom\":\"GiftModal-module__optionBottom\",\"secondaryInfo\":\"GiftModal-module__secondaryInfo\",\"footer\":\"GiftModal-module__footer\",\"starGiftsTransition\":\"GiftModal-module__starGiftsTransition\",\"notFoundGiftsRoot\":\"GiftModal-module__notFoundGiftsRoot\",\"notFoundGiftsDescription\":\"GiftModal-module__notFoundGiftsDescription\",\"notFoundGiftsLink\":\"GiftModal-module__notFoundGiftsLink\"};","import type { FC } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiDisallowedGifts,\n  ApiPeer,\n  ApiPremiumGiftCodeOption,\n  ApiStarGift,\n  ApiStarGiftRegular,\n  ApiStarsAmount,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { StarGiftCategory } from '../../../types';\n\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat, isApiPeerUser } from '../../../global/helpers/peers';\nimport { selectTabState } from '../../../global/selectors';\nimport { selectPeer, selectUserFullInfo } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { throttle } from '../../../util/schedulers';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport GiftSendingOptions from './GiftComposer';\nimport GiftItemPremium from './GiftItemPremium';\nimport GiftItemStar from './GiftItemStar';\nimport GiftModalResaleScreen from './GiftModalResaleScreen';\nimport GiftResaleFilters from './GiftResaleFilters';\nimport StarGiftCategoryList from './StarGiftCategoryList';\n\nimport styles from './GiftModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['giftModal'];\n};\n\nexport type GiftOption = ApiPremiumGiftCodeOption | ApiStarGift;\n\ntype StateProps = {\n  boostPerSentGift?: number;\n  starGiftsById?: Record<string, ApiStarGiftRegular>;\n  starGiftIdsByCategory?: Record<StarGiftCategory, string[]>;\n  starBalance?: ApiStarsAmount;\n  peer?: ApiPeer;\n  isSelf?: boolean;\n  disallowedGifts?: ApiDisallowedGifts;\n  resaleGiftsCount?: number;\n  areResaleGiftsLoading?: boolean;\n};\n\nconst AVATAR_SIZE = 100;\nconst INTERSECTION_THROTTLE = 200;\nconst SCROLL_THROTTLE = 200;\n\nconst runThrottledForScroll = throttle((cb) => cb(), SCROLL_THROTTLE, true);\n\nconst GiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starGiftsById,\n  starGiftIdsByCategory,\n  starBalance,\n  peer,\n  isSelf,\n  disallowedGifts,\n  resaleGiftsCount,\n  areResaleGiftsLoading,\n}) => {\n  const {\n    closeGiftModal, openGiftInfoModal, resetResaleGifts, loadResaleGifts,\n  } = getActions();\n  const dialogRef = useRef<HTMLDivElement>();\n  const transitionRef = useRef<HTMLDivElement>();\n  const giftHeaderRef = useRef<HTMLHeadingElement>();\n\n  const scrollerRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const user = peer && isApiPeerUser(peer) ? peer : undefined;\n  const chat = peer && isApiPeerChat(peer) ? peer : undefined;\n\n  const [selectedGift, setSelectedGift] = useState<GiftOption | undefined>();\n  const [selectedResellGift, setSelectedResellGift] = useState<ApiStarGift | undefined>();\n  const [shouldShowMainScreenHeader, setShouldShowMainScreenHeader] = useState(false);\n  const [isMainScreenHeaderForStarGifts, setIsMainScreenHeaderForStarGifts] = useState(false);\n  const [isGiftScreenHeaderForStarGifts, setIsGiftScreenHeaderForStarGifts] = useState(false);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  const areAllGiftsDisallowed = useMemo(() => {\n    if (!disallowedGifts) {\n      return undefined;\n    }\n    const {\n      shouldDisallowPremiumGifts,\n      ...disallowedGiftTypes\n    } = disallowedGifts;\n    return !isSelf && Object.values(disallowedGiftTypes).every(Boolean);\n  }, [isSelf, disallowedGifts]);\n\n  const areUnlimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowUnlimitedStarGifts;\n  const areLimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowLimitedStarGifts;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const allGifts = renderingModal?.gifts;\n  const filteredGifts = useMemo(() => {\n    return allGifts?.sort((prevGift, gift) => prevGift.months - gift.months)\n      .filter((gift) => gift.users === 1 && gift.currency !== 'XTR');\n  }, [allGifts]);\n\n  const giftsByStars = useMemo(() => {\n    const mapGifts = new Map();\n\n    if (!filteredGifts) return mapGifts;\n\n    filteredGifts.forEach((gift) => {\n      const giftByStars = allGifts?.find(\n        (starsGift) => starsGift.currency === STARS_CURRENCY_CODE\n          && starsGift.months === gift.months,\n      );\n      if (giftByStars) {\n        mapGifts.set(gift, giftByStars);\n      }\n    });\n\n    return mapGifts;\n  }, [allGifts, filteredGifts]);\n\n  const baseGift = useMemo(() => {\n    return filteredGifts?.reduce((prev, gift) => (prev.amount < gift.amount ? prev : gift));\n  }, [filteredGifts]);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE, isDisabled: !isOpen });\n\n  const isResaleScreen = Boolean(selectedResellGift) && !selectedGift;\n  const isGiftScreen = Boolean(selectedGift);\n  const shouldShowHeader = isResaleScreen || isGiftScreen || shouldShowMainScreenHeader;\n  const isHeaderForStarGifts = isGiftScreen ? isGiftScreenHeaderForStarGifts : isMainScreenHeaderForStarGifts;\n\n  useEffect(() => {\n    if (selectedResellGift) {\n      loadResaleGifts({ giftId: selectedResellGift.id });\n    }\n  }, [selectedResellGift]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setShouldShowMainScreenHeader(false);\n      setSelectedGift(undefined);\n      setSelectedResellGift(undefined);\n      setSelectedCategory('all');\n    }\n  }, [isOpen]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    if (isGiftScreen) return;\n    const currentTarget = e.currentTarget;\n\n    runThrottledForScroll(() => {\n      const { scrollTop } = currentTarget;\n\n      setShouldShowMainScreenHeader(scrollTop > 150);\n\n      if (transitionRef.current && giftHeaderRef.current) {\n        const { top: headerTop } = giftHeaderRef.current.getBoundingClientRect();\n        const { top: transitionTop } = transitionRef.current.getBoundingClientRect();\n        setIsMainScreenHeaderForStarGifts(headerTop - transitionTop <= 0);\n      }\n    });\n  });\n\n  const giftPremiumDescription = lang('GiftPremiumDescription', {\n    user: getUserFullName(user)!,\n    link: (\n      <SafeLink\n        text={lang('GiftPremiumDescriptionLinkCaption')}\n        url={lang('GiftPremiumDescriptionLink')}\n      />\n    ),\n  }, { withNodes: true });\n\n  const starGiftDescription = chat\n    ? lang('StarGiftDescriptionChannel', { peer: getPeerTitle(lang, chat) }, {\n      withNodes: true,\n      withMarkdown: true,\n    })\n    : isSelf\n      ? lang('StarGiftDescriptionSelf', undefined, {\n        withNodes: true,\n        renderTextFilters: ['br'],\n      })\n      : lang('StarGiftDescription', {\n        user: getUserFullName(user)!,\n      }, { withNodes: true, withMarkdown: true });\n\n  function renderGiftPremiumHeader() {\n    return (\n      <h2 className={buildClassName(styles.headerText, styles.center)}>\n        {lang('GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  function renderGiftPremiumDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.center)}>\n        {giftPremiumDescription}\n      </p>\n    );\n  }\n\n  function renderStarGiftsHeader() {\n    return (\n      <h2 ref={giftHeaderRef} className={buildClassName(styles.headerText, styles.center)}>\n        {lang(isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader')}\n      </h2>\n    );\n  }\n\n  function renderStarGiftsDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.starGiftsDescription, styles.center)}>\n        {starGiftDescription}\n      </p>\n    );\n  }\n\n  const handleGiftClick = useLastCallback((gift: GiftOption, target?: 'resell' | 'original') => {\n    if (target === 'resell') {\n      if (!('id' in gift)) {\n        return;\n      }\n      if (isResaleScreen) {\n        openGiftInfoModal({ gift, recipientId: renderingModal?.forPeerId });\n        return;\n      }\n      setSelectedResellGift(gift);\n      return;\n    }\n    setSelectedGift(gift);\n    setIsGiftScreenHeaderForStarGifts('id' in gift);\n  });\n\n  function renderStarGifts() {\n    const filteredGiftIds = starGiftIdsByCategory?.[selectedCategory]?.filter((giftId) => {\n      const gift = starGiftsById?.[giftId];\n      if (!gift) return false;\n\n      const { isLimited, isSoldOut, upgradeStars } = gift;\n      if (areUnlimitedStarGiftsDisallowed && !areLimitedStarGiftsDisallowed) {\n        return isLimited;\n      }\n      if (areLimitedStarGiftsDisallowed && !areUnlimitedStarGiftsDisallowed) {\n        return !isLimited && !isSoldOut;\n      }\n      if (areUnlimitedStarGiftsDisallowed && areLimitedStarGiftsDisallowed) {\n        return Boolean(isLimited && Boolean(upgradeStars));\n      }\n\n      return true;\n    });\n\n    return (\n      <div className={styles.starGiftsContainer}>\n        {starGiftsById && filteredGiftIds?.flatMap((giftId) => {\n          const gift = starGiftsById[giftId];\n          const shouldShowResale = selectedCategory !== 'stock' && Boolean(gift.availabilityResale);\n          const shouldDuplicateAsResale = selectedCategory !== 'resale' && shouldShowResale && !gift.isSoldOut;\n\n          const elements = [\n            <GiftItemStar\n              key={giftId}\n              gift={gift}\n              observeIntersection={observeIntersection}\n              isResale={shouldShowResale && !shouldDuplicateAsResale}\n              onClick={handleGiftClick}\n            />,\n          ];\n\n          if (shouldDuplicateAsResale) {\n            elements.push(\n              <GiftItemStar\n                key={`resale_${giftId}`}\n                isResale\n                gift={gift}\n                observeIntersection={observeIntersection}\n                onClick={handleGiftClick}\n              />,\n            );\n          }\n\n          return elements;\n        })}\n      </div>\n    );\n  }\n\n  function renderPremiumGifts() {\n    return (\n      <div className={styles.premiumGiftsGallery}>\n        {filteredGifts?.map((gift) => {\n          return (\n            <GiftItemPremium\n              option={gift}\n              optionByStars={giftsByStars.get(gift)}\n              baseMonthAmount={baseGift ? Math.floor(baseGift.amount / baseGift.months) : undefined}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  const onCategoryChanged = useLastCallback((category: StarGiftCategory) => {\n    setSelectedCategory(category);\n  });\n\n  const handleCloseModal = useLastCallback(() => {\n    setSelectedGift(undefined);\n    setSelectedResellGift(undefined);\n    resetResaleGifts();\n    closeGiftModal();\n  });\n\n  const handleCloseButtonClick = useLastCallback(() => {\n    if (isResaleScreen) {\n      setSelectedResellGift(undefined);\n      resetResaleGifts();\n      return;\n    }\n    if (isGiftScreen) {\n      setSelectedGift(undefined);\n      return;\n    }\n    handleCloseModal();\n  });\n\n  function renderMainScreen() {\n    return (\n      <div ref={scrollerRef} className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={styles.avatars}>\n          <Avatar\n            size={AVATAR_SIZE}\n            peer={peer}\n          />\n          <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n        </div>\n        {!isSelf && !chat && !disallowedGifts?.shouldDisallowPremiumGifts && (\n          <>\n            {renderGiftPremiumHeader()}\n            {renderGiftPremiumDescription()}\n            {renderPremiumGifts()}\n          </>\n        )}\n\n        {!areAllGiftsDisallowed && (\n          <>\n            {renderStarGiftsHeader()}\n            {renderStarGiftsDescription()}\n            <StarGiftCategoryList\n              areLimitedStarGiftsDisallowed={areLimitedStarGiftsDisallowed}\n              onCategoryChanged={onCategoryChanged}\n            />\n            <Transition\n              name=\"zoomFade\"\n              activeKey={getCategoryKey(selectedCategory)}\n              className={styles.starGiftsTransition}\n            >\n              {renderStarGifts()}\n            </Transition>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  const isBackButton = isGiftScreen || isResaleScreen;\n\n  const buttonClassName = buildClassName(\n    'animated-close-icon',\n    isBackButton && 'state-back',\n  );\n\n  function renderHeader() {\n    if (!shouldShowHeader) return undefined;\n    if (isResaleScreen) {\n      const isFirstLoading = areResaleGiftsLoading && !resaleGiftsCount;\n      return (\n        <div className={styles.resaleHeaderContentContainer}>\n          <h2 className={styles.resaleHeaderText}>\n            {selectedResellGift.title}\n          </h2>\n          {isFirstLoading\n            && (\n              <div className={styles.resaleHeaderDescription}>\n                {lang('Loading')}\n              </div>\n            )}\n          {!isFirstLoading && resaleGiftsCount !== undefined\n            && (\n              <div className={styles.resaleHeaderDescription}>\n                {lang('HeaderDescriptionResaleGifts', {\n                  count: resaleGiftsCount,\n                }, { withNodes: true, withMarkdown: true, pluralValue: resaleGiftsCount })}\n              </div>\n            )}\n          <GiftResaleFilters dialogRef={dialogRef} />\n        </div>\n      );\n    }\n    return (\n      <h2 className={styles.commonHeaderText}>\n        {lang(isHeaderForStarGifts ? (isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader') : 'GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  return (\n    <Modal\n      dialogRef={dialogRef}\n      onClose={handleCloseModal}\n      isOpen={isOpen}\n      isSlim\n      contentClassName={styles.content}\n      className={buildClassName(styles.modalDialog, styles.root)}\n      isLowStackPriority\n    >\n      <Button\n        className={styles.closeButton}\n        round\n        color=\"translucent\"\n        size=\"smaller\"\n        onClick={handleCloseButtonClick}\n        ariaLabel={isBackButton ? oldLang('Common.Back') : oldLang('Common.Close')}\n      >\n        <div className={buttonClassName} />\n      </Button>\n      <BalanceBlock className={styles.balance} balance={starBalance} withAddButton />\n      <div className={buildClassName(\n        styles.header,\n        isResaleScreen && styles.resaleHeader,\n        !shouldShowHeader && styles.hiddenHeader)}\n      >\n        <Transition\n          name=\"slideVerticalFade\"\n          activeKey={!shouldShowHeader ? 0 : isResaleScreen ? 1 : isHeaderForStarGifts ? 2 : 3}\n          slideClassName={styles.headerSlide}\n        >\n          {renderHeader()}\n        </Transition>\n      </div>\n      <Transition\n        ref={transitionRef}\n        className={styles.transition}\n        name=\"pushSlide\"\n        activeKey={isGiftScreen ? 1 : isResaleScreen ? 2 : 0}\n      >\n        {!isGiftScreen && !isResaleScreen && renderMainScreen()}\n        {isResaleScreen && selectedResellGift\n          && (\n            <GiftModalResaleScreen\n              onGiftClick={handleGiftClick}\n            />\n          )}\n        {isGiftScreen && renderingModal?.forPeerId && (\n          <GiftSendingOptions\n            gift={selectedGift}\n            giftByStars={giftsByStars.get(selectedGift)}\n            peerId={renderingModal.forPeerId}\n          />\n        )}\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const {\n    starGifts,\n    stars,\n    currentUserId,\n  } = global;\n\n  const peer = modal?.forPeerId ? selectPeer(global, modal.forPeerId) : undefined;\n  const isSelf = Boolean(currentUserId && modal?.forPeerId === currentUserId);\n  const userFullInfo = peer ? selectUserFullInfo(global, peer?.id) : undefined;\n\n  const { resaleGifts } = selectTabState(global);\n  const resaleGiftsCount = resaleGifts.count;\n  const areResaleGiftsLoading = resaleGifts.isLoading !== false;\n\n  return {\n    boostPerSentGift: global.appConfig?.boostsPerSentGift,\n    starGiftsById: starGifts?.byId,\n    starGiftIdsByCategory: starGifts?.idsByCategory,\n    starBalance: stars?.balance,\n    peer,\n    isSelf,\n    disallowedGifts: userFullInfo?.disallowedGifts,\n    resaleGiftsCount,\n    areResaleGiftsLoading,\n  };\n})(GiftModal));\n\nfunction getCategoryKey(category: StarGiftCategory) {\n  if (category === 'all') return 0;\n  if (category === 'limited') return 1;\n  if (category === 'resale') return 2;\n  if (category === 'stock') return 3;\n  return category + 3;\n}\n","import type { FC } from '../../../lib/teact/teact';\nimport {\n  memo,\n  useMemo,\n  useRef } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGift,\n} from '../../../api/types';\nimport type { ResaleGiftsFilterOptions } from '../../../types';\n\nimport { RESALE_GIFTS_LIMIT } from '../../../config';\nimport { selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { LOCAL_TGS_URLS } from '../../common/helpers/animatedAssets';\n\nimport useInfiniteScroll from '../../../hooks/useInfiniteScroll';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../common/AnimatedIconWithPreview';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Link from '../../ui/Link';\nimport Transition from '../../ui/Transition';\nimport GiftItemStar from './GiftItemStar';\n\nimport styles from './GiftModal.module.scss';\n\nexport type OwnProps = {\n  onGiftClick: (gift: ApiStarGift) => void;\n};\n\ntype StateProps = {\n  gift?: ApiStarGift;\n  resellGifts?: ApiStarGift[];\n  filter: ResaleGiftsFilterOptions;\n  areGiftsAllLoaded?: boolean;\n  areGiftsLoading?: boolean;\n  updateIteration: number;\n};\n\nconst INTERSECTION_THROTTLE = 200;\n\nconst GiftModalResaleScreen: FC<OwnProps & StateProps> = ({\n  resellGifts,\n  gift,\n  filter,\n  areGiftsAllLoaded,\n  areGiftsLoading,\n  updateIteration,\n  onGiftClick,\n}) => {\n  const {\n    loadResaleGifts,\n    updateResaleGiftsFilter,\n  } = getActions();\n  const scrollerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n  const resellGiftsIds = useMemo(() => {\n    return resellGifts?.map((g) => g.id);\n  }, [resellGifts]);\n\n  const hasFilter = Boolean(filter?.modelAttributes?.length\n    || filter?.patternAttributes?.length || filter?.backdropAttributes?.length);\n\n  const handleLoadMoreResellGifts = useLastCallback(() => {\n    if (gift) {\n      loadResaleGifts({ giftId: gift.id });\n    }\n  });\n\n  const isGiftsEmpty = Boolean(!resellGifts || resellGifts.length === 0);\n\n  const [viewportIds, onLoadMore] = useInfiniteScroll(\n    handleLoadMoreResellGifts,\n    resellGiftsIds,\n    !gift,\n    RESALE_GIFTS_LIMIT,\n  );\n\n  const { observe } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE });\n\n  const handleResetGiftsFilter = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: [],\n      backdropAttributes: [],\n      patternAttributes: [],\n    } });\n  });\n\n  function renderNothingFoundGiftsWithFilter() {\n    return (\n      <div className={styles.notFoundGiftsRoot}>\n        <AnimatedIconWithPreview\n          size={160}\n          tgsUrl={LOCAL_TGS_URLS.SearchingDuck}\n          nonInteractive\n          noLoop\n        />\n        <div className={styles.notFoundGiftsDescription}>\n          {lang('ResellGiftsNoFound')}\n        </div>\n        {hasFilter && (\n          <Link\n            className={styles.notFoundGiftsLink}\n            onClick={handleResetGiftsFilter}\n          >\n            {lang('ResellGiftsClearFilters')}\n          </Link>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div ref={scrollerRef} className={buildClassName(styles.resaleScreenRoot, 'custom-scroll')}>\n      <Transition\n        name=\"zoomFade\"\n        activeKey={updateIteration}\n      >\n        {isGiftsEmpty && areGiftsAllLoaded && renderNothingFoundGiftsWithFilter()}\n        <InfiniteScroll\n          className={buildClassName(styles.resaleStarGiftsContainer)}\n          items={viewportIds}\n          onLoadMore={onLoadMore}\n          itemSelector=\".starGiftItem\"\n          noFastList\n          preloadBackwards={RESALE_GIFTS_LIMIT}\n          scrollContainerClosest={`.${styles.resaleScreenRoot}`}\n        >\n          {resellGifts?.map((gift) => (\n            <GiftItemStar\n              key={gift.id}\n              gift={gift}\n              observeIntersection={observe}\n              isResale\n              onClick={onGiftClick}\n            />\n          ))}\n        </InfiniteScroll>\n      </Transition>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    starGifts,\n  } = global;\n\n  const { resaleGifts } = selectTabState(global);\n  const gift = resaleGifts?.giftId ? starGifts?.byId[resaleGifts.giftId] : undefined;\n  const filter = resaleGifts.filter;\n  const areGiftsAllLoaded = resaleGifts.isAllLoaded;\n  const areGiftsLoading = resaleGifts.isLoading;\n  const updateIteration = resaleGifts.updateIteration;\n\n  return {\n    resellGifts: resaleGifts.gifts,\n    gift,\n    filter,\n    areGiftsAllLoaded,\n    areGiftsLoading,\n    updateIteration,\n  };\n})(GiftModalResaleScreen));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftResaleFilters-module__root\",\"buttonsContainer\":\"GiftResaleFilters-module__buttonsContainer\",\"itemIcon\":\"GiftResaleFilters-module__itemIcon\",\"sticker\":\"GiftResaleFilters-module__sticker\",\"backdropAttributeMenuItemText\":\"GiftResaleFilters-module__backdropAttributeMenuItemText\",\"menuItemStickerText\":\"GiftResaleFilters-module__menuItemStickerText\",\"menuItemText\":\"GiftResaleFilters-module__menuItemText\",\"backdrop\":\"GiftResaleFilters-module__backdrop\",\"menuItemIcon\":\"GiftResaleFilters-module__menuItemIcon\",\"item\":\"GiftResaleFilters-module__item\",\"menuContentContainer\":\"GiftResaleFilters-module__menuContentContainer\",\"menu\":\"GiftResaleFilters-module__menu\",\"left\":\"GiftResaleFilters-module__left\",\"right\":\"GiftResaleFilters-module__right\"};","import { type MouseEvent as ReactMouseEvent } from 'react';\nimport type { ElementRef, FC } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport {\n  memo,\n  useCallback,\n  useMemo,\n  useRef,\n  useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGiftAttribute,\n  ApiStarGiftAttributeBackdrop,\n  ApiStarGiftAttributeCounter,\n  ApiStarGiftAttributeIdBackdrop,\n  ApiStarGiftAttributeIdPattern,\n  ApiStarGiftAttributeModel,\n  ApiStarGiftAttributePattern,\n  StarGiftAttributeIdModel,\n} from '../../../api/types';\nimport type { ResaleGiftsFilterOptions, ResaleGiftsSortType } from '../../../types';\n\nimport { selectTabState,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useContextMenuHandlers from '../../../hooks/useContextMenuHandlers';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Icon from '../../common/icons/Icon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Menu from '../../ui/Menu';\nimport MenuItem from '../../ui/MenuItem';\nimport SearchInput from '../../ui/SearchInput';\nimport ResaleGiftMenuAttributeSticker from './ResaleGiftMenuAttributeSticker';\n\nimport styles from './GiftResaleFilters.module.scss';\n\ntype OwnProps = {\n  dialogRef: ElementRef<HTMLDivElement>;\n};\ntype StateProps = {\n  filter: ResaleGiftsFilterOptions;\n  attributes?: ApiStarGiftAttribute[];\n  counters?: ApiStarGiftAttributeCounter[];\n};\n\nconst GiftResaleFilters: FC<StateProps & OwnProps> = ({\n  attributes,\n  counters,\n  filter,\n  dialogRef,\n}) => {\n  const lang = useLang();\n  const {\n    updateResaleGiftsFilter,\n  } = getActions();\n\n  const [searchModelQuery, setSearchModelQuery] = useState('');\n  const [searchBackdropQuery, setSearchBackdropQuery] = useState('');\n  const [searchPatternQuery, setSearchPatternQuery] = useState('');\n  const filteredAttributes = useMemo(() => {\n    const map: {\n      model: ApiStarGiftAttributeModel[];\n      pattern: ApiStarGiftAttributePattern[];\n      backdrop: ApiStarGiftAttributeBackdrop[];\n    } = {\n      model: [],\n      pattern: [],\n      backdrop: [],\n    };\n\n    for (const counter of counters ?? []) {\n      const { attribute } = counter;\n\n      if (!counter.count) {\n        continue;\n      }\n\n      const found = attributes?.find((attr) => {\n        if (attr.type === 'backdrop' && attribute.type === 'backdrop') {\n          return attr.backdropId === attribute.backdropId;\n        }\n\n        if (attr.type === 'model' && attribute.type === 'model') {\n          return attr.sticker.id === attribute.documentId;\n        }\n\n        if (attr.type === 'pattern' && attribute.type === 'pattern') {\n          return attr.sticker.id === attribute.documentId;\n        }\n\n        return false;\n      });\n\n      if (found?.type === 'backdrop') {\n        map.backdrop.push(found);\n      }\n      if (found?.type === 'model') {\n        map.model.push(found);\n      }\n      if (found?.type === 'pattern') {\n        map.pattern.push(found);\n      }\n    }\n\n    return map;\n  }, [attributes, counters]);\n\n  const filteredAndSearchedAttributes = useMemo(() => {\n    const filterBySearch = <T extends { name?: string }>(items: T[], query: string): T[] => {\n      if (!query.trim()) return items;\n\n      return items.filter(\n        (item): item is T => Boolean(item.name?.toLowerCase().includes(query.toLowerCase())),\n      );\n    };\n\n    return {\n      model: filterBySearch(filteredAttributes.model, searchModelQuery),\n      pattern: filterBySearch(filteredAttributes.pattern, searchPatternQuery),\n      backdrop: filterBySearch(filteredAttributes.backdrop, searchBackdropQuery),\n    };\n  }, [filteredAttributes, searchModelQuery, searchBackdropQuery, searchPatternQuery]);\n\n  // Sort Menu\n  const sortMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isSortContextMenuOpen,\n    contextMenuAnchor: sortContextMenuAnchor,\n    handleContextMenu: handleSortContextMenu,\n    handleContextMenuClose: handleSortContextMenuClose,\n    handleContextMenuHide: handleSortContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getSortMenuElement = useLastCallback(() => sortMenuRef.current!);\n\n  // Model Menu\n  const modelMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isModelContextMenuOpen,\n    contextMenuAnchor: modelContextMenuAnchor,\n    handleContextMenu: handleModelContextMenu,\n    handleContextMenuClose: handleModelContextMenuClose,\n    handleContextMenuHide: handleModelContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getModelMenuElement = useLastCallback(\n    () => modelMenuRef.current!,\n  );\n\n  // Backdrop Menu\n  const backdropMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isBackdropContextMenuOpen,\n    contextMenuAnchor: backdropContextMenuAnchor,\n    handleContextMenu: handleBackdropContextMenu,\n    handleContextMenuClose: handleBackdropContextMenuClose,\n    handleContextMenuHide: handleBackdropContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getBackdropMenuElement = useLastCallback(() => backdropMenuRef.current!);\n\n  // Pattern Menu\n  const patternMenuRef = useRef<HTMLDivElement>();\n  const {\n    isContextMenuOpen: isPatternContextMenuOpen,\n    contextMenuAnchor: patternContextMenuAnchor,\n    handleContextMenu: handlePatternContextMenu,\n    handleContextMenuClose: handlePatternContextMenuClose,\n    handleContextMenuHide: handlePatternContextMenuHide,\n  } = useContextMenuHandlers(dialogRef);\n  const getPatternMenuElement = useLastCallback(() => patternMenuRef.current!);\n\n  const SortMenuButton: FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n   = useMemo(() => {\n     const sortType = filter.sortType;\n     return ({ onTrigger, isOpen: isMenuOpen }) => (\n       <div\n         className={styles.item}\n         onClick={onTrigger}\n       >\n         {sortType === 'byDate' && lang('ValueGiftSortByDate')}\n         {sortType === 'byNumber' && lang('ValueGiftSortByNumber')}\n         {sortType === 'byPrice' && lang('ValueGiftSortByPrice')}\n         <Icon\n           name=\"dropdown-arrows\"\n           className={styles.itemIcon}\n         />\n       </div>\n     );\n   }, [lang, filter]);\n\n  const ModelMenuButton:\n  FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n   = useMemo(() => {\n     const attributesCount = filter?.modelAttributes?.length || 0;\n     return ({ onTrigger, isOpen: isMenuOpen }) => (\n       <div\n         className={styles.item}\n         onClick={onTrigger}\n       >\n         {attributesCount === 0 && lang('GiftAttributeModel')}\n         {attributesCount > 0\n           && lang('GiftAttributeModelPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n         <Icon\n           name=\"dropdown-arrows\"\n           className={styles.itemIcon}\n         />\n       </div>\n     );\n   }, [lang, filter]);\n  const BackdropMenuButton:\n  FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n   = useMemo(() => {\n     const attributesCount = filter?.backdropAttributes?.length || 0;\n     return ({ onTrigger, isOpen: isMenuOpen }) => (\n       <div\n         className={styles.item}\n         onClick={onTrigger}\n       >\n         {attributesCount === 0 && lang('GiftAttributeBackdrop')}\n         {attributesCount > 0\n           && lang('GiftAttributeBackdropPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n         <Icon\n           name=\"dropdown-arrows\"\n           className={styles.itemIcon}\n         />\n       </div>\n     );\n   }, [lang, filter]);\n  const PatternMenuButton: FC<{ onTrigger: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => void; isOpen?: boolean }>\n  = useMemo(() => {\n    const attributesCount = filter?.patternAttributes?.length || 0;\n    return ({ onTrigger, isOpen: isMenuOpen }) => (\n      <div\n        className={styles.item}\n        onClick={onTrigger}\n      >\n        {attributesCount === 0 && lang('GiftAttributeSymbol')}\n        {attributesCount > 0\n          && lang('GiftAttributeSymbolPlural', { count: attributesCount }, { pluralValue: attributesCount })}\n        <Icon\n          name=\"dropdown-arrows\"\n          className={styles.itemIcon}\n        />\n      </div>\n    );\n  }, [lang, filter]);\n\n  const handleSortMenuItemClick = useLastCallback((type: ResaleGiftsSortType) => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      sortType: type,\n    } });\n  });\n\n  const handleSelectedAllModelsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: [],\n    } });\n  });\n  const handleSelectedAllPatternsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      patternAttributes: [],\n    } });\n  });\n  const handleSelectedAllBackdropsClick = useLastCallback(() => {\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      backdropAttributes: [],\n    } });\n  });\n\n  const handleModelMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributeModel) => {\n    if (!counters) return;\n    const attributes = filter.modelAttributes || [];\n    const modelAttribute\n      = counters.find((counter): counter is ApiStarGiftAttributeCounter<StarGiftAttributeIdModel> =>\n        counter.attribute.type === 'model' && counter.attribute.documentId === attribute.sticker.id,\n      )?.attribute;\n\n    if (!modelAttribute) return;\n\n    const isActive = attributes.some((item) => item.documentId === modelAttribute.documentId);\n    const updatedAttributes = isActive\n      ? attributes.filter((item) => item.documentId !== modelAttribute.documentId)\n      : [...attributes, modelAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      modelAttributes: updatedAttributes,\n    } });\n  });\n\n  const handlePatternMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributePattern) => {\n    if (!counters) return;\n    const attributes = filter.patternAttributes || [];\n    const patternAttribute = counters.find(\n      (counter): counter is ApiStarGiftAttributeCounter<ApiStarGiftAttributeIdPattern> =>\n        counter.attribute.type === 'pattern' && counter.attribute.documentId === attribute.sticker.id,\n    )?.attribute;\n\n    if (!patternAttribute) return;\n\n    const isActive = attributes.some((item) => item.documentId === patternAttribute.documentId);\n    const updatedAttributes = isActive\n      ? attributes.filter((item) => item.documentId !== patternAttribute.documentId)\n      : [...attributes, patternAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      patternAttributes: updatedAttributes,\n    } });\n  });\n\n  const handleBackdropMenuItemClick = useLastCallback((attribute: ApiStarGiftAttributeBackdrop) => {\n    if (!counters) return;\n    const attributes = filter.backdropAttributes || [];\n    const backdropAttribute = counters.find(\n      (counter): counter is ApiStarGiftAttributeCounter<ApiStarGiftAttributeIdBackdrop> =>\n        counter.attribute.type === 'backdrop' && counter.attribute.backdropId === attribute.backdropId,\n    )?.attribute;\n\n    if (!backdropAttribute) return;\n\n    const isActive = attributes.some((item) => item.backdropId === backdropAttribute.backdropId);\n    const updatedAttributes = isActive\n      ? attributes.filter((item) => item.backdropId !== backdropAttribute.backdropId)\n      : [...attributes, backdropAttribute];\n    updateResaleGiftsFilter({ filter: {\n      ...filter,\n      backdropAttributes: updatedAttributes,\n    } });\n  });\n\n  function renderSortMenuItems() {\n    return (\n      <>\n        <MenuItem icon=\"sort-by-price\" onClick={() => { handleSortMenuItemClick('byPrice'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByPrice')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byPrice' ? 'check' : 'placeholder'}\n          />\n        </MenuItem>\n        <MenuItem icon=\"sort-by-date\" onClick={() => { handleSortMenuItemClick('byDate'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByDate')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byDate' ? 'check' : 'placeholder'}\n          />\n\n        </MenuItem>\n        <MenuItem icon=\"sort-by-number\"onClick={() => { handleSortMenuItemClick('byNumber'); }}>\n          <div className={styles.menuItemText}>\n            {lang('GiftSortByNumber')}\n          </div>\n          <Icon\n            className={styles.menuItemIcon}\n            name={filter?.sortType === 'byNumber' ? 'check' : 'placeholder'}\n          />\n        </MenuItem>\n      </>\n    );\n  }\n\n  function renderSortMenu() {\n    return (\n      <Menu\n        isOpen={isSortContextMenuOpen}\n        anchor={sortContextMenuAnchor}\n        ref={sortMenuRef}\n        className={buildClassName(\n          styles.menu,\n          styles.left,\n          'with-menu-transitions',\n        )}\n        getMenuElement={getSortMenuElement}\n        autoClose\n        onClose={handleSortContextMenuClose}\n        onCloseAnimationEnd={handleSortContextMenuHide}\n        positionX=\"left\"\n      >\n        {renderSortMenuItems()}\n      </Menu>\n    );\n  }\n\n  const handleSearchModelInputReset = useCallback(() => {\n    setSearchModelQuery('');\n  }, []);\n  const handleSearchBackdropInputReset = useCallback(() => {\n    setSearchBackdropQuery('');\n  }, []);\n  const handleSearchPatternInputReset = useCallback(() => {\n    setSearchPatternQuery('');\n  }, []);\n  const handleSearchInputClick = useLastCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  });\n\n  const modelMenuItemsContainerRef = useRef<HTMLDivElement>();\n  const { observe } = useIntersectionObserver({\n    rootRef: modelMenuItemsContainerRef,\n    isDisabled: !modelContextMenuAnchor,\n  });\n\n  function renderModelMenuItems() {\n    const models = filteredAndSearchedAttributes.model;\n    const selectedAttributes = filter.modelAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n    return (\n      <div className={styles.menuContentContainer} ref={modelMenuItemsContainerRef}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchModelQuery}\n          onChange={setSearchModelQuery}\n          onReset={handleSearchModelInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllModelsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {models.map((model) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.documentId === model.sticker.id);\n          return (\n            <MenuItem\n              key={model.name}\n              onClick={() => {\n                handleModelMenuItemClick(model);\n              }}\n            >\n              <ResaleGiftMenuAttributeSticker\n                className={styles.sticker}\n                sticker={model.sticker}\n                type=\"model\"\n                observeIntersectionForLoading={observe}\n                observeIntersectionForPlaying={observe}\n              />\n              <div className={styles.menuItemStickerText}>\n                {model.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderModelMenu() {\n    return (\n      <Menu\n        isOpen={isModelContextMenuOpen}\n        anchor={modelContextMenuAnchor}\n        ref={modelMenuRef}\n        className={buildClassName(\n          styles.menu,\n          styles.left,\n          'with-menu-transitions',\n        )}\n        getMenuElement={getModelMenuElement}\n        autoClose\n        onClose={handleModelContextMenuClose}\n        onCloseAnimationEnd={handleModelContextMenuHide}\n      >\n        {renderModelMenuItems()}\n      </Menu>\n    );\n  }\n\n  function renderBackdropMenuItems() {\n    const backdrops = filteredAndSearchedAttributes.backdrop;\n    const selectedAttributes = filter.backdropAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n\n    return (\n      <div className={styles.menuContentContainer}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchBackdropQuery}\n          onChange={setSearchBackdropQuery}\n          onReset={handleSearchBackdropInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllBackdropsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {backdrops.map((backdrop) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.backdropId === backdrop.backdropId);\n\n          return (\n            <MenuItem\n              key={backdrop.name}\n              onClick={() => {\n                handleBackdropMenuItemClick(backdrop);\n              }}\n            >\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[backdrop.centerColor, backdrop.edgeColor]}\n                patternColor={backdrop.patternColor}\n              />\n              <div className={styles.backdropAttributeMenuItemText}>\n                {backdrop.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderBackdropMenu() {\n    return (\n      <Menu\n        isOpen={isBackdropContextMenuOpen}\n        anchor={backdropContextMenuAnchor}\n        ref={backdropMenuRef}\n        className={buildClassName(styles.menu, styles.right, 'with-menu-transitions')}\n        getMenuElement={getBackdropMenuElement}\n        autoClose\n        onClose={handleBackdropContextMenuClose}\n        onCloseAnimationEnd={handleBackdropContextMenuHide}\n        positionX=\"right\"\n      >\n        {renderBackdropMenuItems()}\n      </Menu>\n    );\n  }\n\n  function renderPatternMenuItems() {\n    const patterns = filteredAndSearchedAttributes.pattern;\n    const selectedAttributes = filter.patternAttributes ?? [];\n    const isSelectedAll = selectedAttributes.length === 0;\n\n    return (\n      <div className={styles.menuContentContainer}>\n        <SearchInput\n          onClick={handleSearchInputClick}\n          className={styles.search}\n          value={searchPatternQuery}\n          onChange={setSearchPatternQuery}\n          onReset={handleSearchPatternInputReset}\n          placeholder={lang('Search')}\n        />\n        <MenuItem icon=\"select\" onClick={handleSelectedAllPatternsClick} disabled={isSelectedAll}>\n          {lang('ContextMenuItemSelectAll')}\n        </MenuItem>\n        {patterns.map((pattern) => {\n          const isSelected = isSelectedAll\n            || selectedAttributes.some((attr) => attr.documentId === pattern.sticker.id);\n\n          return (\n            <MenuItem\n              key={pattern.name}\n              onClick={() => {\n                handlePatternMenuItemClick(pattern);\n              }}\n            >\n\n              <ResaleGiftMenuAttributeSticker\n                className={styles.sticker}\n                sticker={pattern.sticker}\n                type=\"pattern\"\n              />\n\n              <div className={styles.menuItemStickerText}>\n                {pattern.name}\n              </div>\n              <Icon\n                className={styles.menuItemIcon}\n                name={isSelected ? 'check' : 'placeholder'}\n              />\n            </MenuItem>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderPatternMenu() {\n    return (\n      <Menu\n        isOpen={isPatternContextMenuOpen}\n        anchor={patternContextMenuAnchor}\n        ref={patternMenuRef}\n        className={buildClassName(styles.menu, styles.right, 'with-menu-transitions')}\n        getMenuElement={getPatternMenuElement}\n        autoClose\n        onClose={handlePatternContextMenuClose}\n        onCloseAnimationEnd={handlePatternContextMenuHide}\n      >\n        {renderPatternMenuItems()}\n      </Menu>\n    );\n  }\n\n  return (\n    <div className={styles.root}>\n      {Boolean(sortContextMenuAnchor) && renderSortMenu()}\n      {Boolean(modelContextMenuAnchor) && renderModelMenu()}\n      {Boolean(backdropContextMenuAnchor) && renderBackdropMenu()}\n      {Boolean(patternContextMenuAnchor) && renderPatternMenu()}\n      <div className={styles.buttonsContainer}>\n        <SortMenuButton\n          onTrigger={handleSortContextMenu}\n          isOpen={isSortContextMenuOpen}\n        />\n        <ModelMenuButton\n          onTrigger={handleModelContextMenu}\n          isOpen={isModelContextMenuOpen}\n        />\n        <BackdropMenuButton\n          onTrigger={handleBackdropContextMenu}\n          isOpen={isBackdropContextMenuOpen}\n        />\n        <PatternMenuButton\n          onTrigger={handlePatternContextMenu}\n          isOpen={isPatternContextMenuOpen}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal((global): StateProps => {\n  const { resaleGifts } = selectTabState(global);\n\n  const attributes = resaleGifts.attributes;\n  const counters = resaleGifts.counters;\n  const filter = resaleGifts.filter;\n\n  return {\n    attributes,\n    counters,\n    filter,\n  };\n})(GiftResaleFilters));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ResaleGiftMenuAttributeSticker-module__root\",\"thumb\":\"ResaleGiftMenuAttributeSticker-module__thumb\"};","import type { FC } from '../../../lib/teact/teact';\nimport { memo, useRef } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ApiSticker } from '../../../api/types';\nimport type { ThemeKey } from '../../../types';\n\nimport { selectTheme } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { REM } from '../../common/helpers/mediaDimensions';\n\nimport useDynamicColorListener from '../../../hooks/stickers/useDynamicColorListener';\nimport { type ObserveFn } from '../../../hooks/useIntersectionObserver';\n\nimport StickerView from '../../common/StickerView';\n\nimport styles from './ResaleGiftMenuAttributeSticker.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  type: 'model' | 'pattern';\n  sticker: ApiSticker;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n};\n\ntype StateProps = {\n  theme: ThemeKey;\n};\n\nconst ATTRIBUTE_STICKER_SIZE = 1.5 * REM;\n\nconst ResaleGiftMenuAttributeSticker: FC<StateProps & OwnProps> = ({\n  className,\n  type,\n  sticker,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n  theme,\n}) => {\n  const stickerRef = useRef<HTMLDivElement>();\n\n  const customColor = useDynamicColorListener(stickerRef, undefined, type !== 'pattern');\n\n  return (\n    <div\n      ref={stickerRef}\n      className={buildClassName(styles.root, className)}\n      style={`width: ${ATTRIBUTE_STICKER_SIZE}px; height: ${ATTRIBUTE_STICKER_SIZE}px`}\n    >\n      <StickerView\n        containerRef={stickerRef}\n        sticker={sticker}\n        size={ATTRIBUTE_STICKER_SIZE}\n        shouldPreloadPreview\n        observeIntersectionForLoading={observeIntersectionForLoading}\n        observeIntersectionForPlaying={observeIntersectionForPlaying}\n        thumbClassName={styles.thumb}\n        customColor={customColor}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    theme: selectTheme(global),\n  };\n})(ResaleGiftMenuAttributeSticker));\n","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"StarGiftCategoryList-module__list\",\"item-selected\":\"StarGiftCategoryList-module__item-selected\",\"itemSelected\":\"StarGiftCategoryList-module__item-selected\",\"item\":\"StarGiftCategoryList-module__item\",\"selected-item\":\"StarGiftCategoryList-module__selected-item\",\"selectedItem\":\"StarGiftCategoryList-module__selected-item\",\"star\":\"StarGiftCategoryList-module__star\"};","import {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { StarGiftCategory } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useLang from '../../../hooks/useLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarGiftCategoryList.module.scss';\n\ntype OwnProps = {\n  onCategoryChanged: (category: StarGiftCategory) => void;\n};\n\ntype StateProps = {\n  idsByCategory?: Record<StarGiftCategory, string[]>;\n  areLimitedStarGiftsDisallowed?: boolean;\n};\n\nconst StarGiftCategoryList = ({\n  idsByCategory,\n  onCategoryChanged,\n  areLimitedStarGiftsDisallowed,\n}: StateProps & OwnProps) => {\n  const ref = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n  const starCategories: number[] | undefined = useMemo(() => idsByCategory && Object.keys(idsByCategory)\n    .filter((category) => category !== 'all' && category !== 'limited')\n    .map(Number)\n    .sort((a, b) => a - b),\n  [idsByCategory]);\n\n  const hasResale = idsByCategory && idsByCategory['resale'].length > 0;\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  function handleItemClick(category: StarGiftCategory) {\n    setSelectedCategory(category);\n    onCategoryChanged(\n      category,\n    );\n  }\n\n  function renderCategoryName(category: StarGiftCategory) {\n    if (category === 'all') return lang('AllGiftsCategory');\n    if (category === 'stock') return lang('StockGiftsCategory');\n    if (category === 'limited') return lang('LimitedGiftsCategory');\n    if (category === 'resale') return lang('GiftCategoryResale');\n    return category;\n  }\n\n  function renderCategoryItem(category: StarGiftCategory) {\n    return (\n      <div\n        className={buildClassName(\n          styles.item,\n          selectedCategory === category && styles.selectedItem,\n        )}\n        onClick={() => handleItemClick(category)}\n      >\n        {Number.isInteger(category) && (\n          <StarIcon\n            className={styles.star}\n            type=\"gold\"\n            size=\"middle\"\n          />\n        )}\n        {renderCategoryName(category)}\n      </div>\n    );\n  }\n\n  useHorizontalScroll(ref, undefined, true);\n\n  return (\n    <div ref={ref} className={buildClassName(styles.list, 'no-scrollbar')}>\n      {renderCategoryItem('all')}\n      {!areLimitedStarGiftsDisallowed && renderCategoryItem('limited')}\n      {!areLimitedStarGiftsDisallowed && hasResale && renderCategoryItem('resale')}\n      {renderCategoryItem('stock')}\n      {starCategories?.map(renderCategoryItem)}\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const { starGifts } = global;\n\n    return {\n      idsByCategory: starGifts?.idsByCategory,\n    };\n  },\n)(StarGiftCategoryList));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UniqueGiftHeader-module__root\",\"radialPattern\":\"UniqueGiftHeader-module__radialPattern\",\"amount\":\"UniqueGiftHeader-module__amount\",\"sticker\":\"UniqueGiftHeader-module__sticker\",\"transition\":\"UniqueGiftHeader-module__transition\",\"transitionSlide\":\"UniqueGiftHeader-module__transitionSlide\",\"title\":\"UniqueGiftHeader-module__title\",\"subtitle\":\"UniqueGiftHeader-module__subtitle\"};","import { memo, useMemo } from '../../../lib/teact/teact';\n\nimport type {\n  ApiStarGiftAttributeBackdrop, ApiStarGiftAttributeModel, ApiStarGiftAttributePattern,\n  ApiStarsAmount,\n} from '../../../api/types';\n\nimport {\n  formatStarsTransactionAmount,\n} from '../../../global/helpers/payments';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\n\nimport { useTransitionActiveKey } from '../../../hooks/animations/useTransitionActiveKey';\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport StarIcon from '../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Transition from '../../ui/Transition';\n\nimport styles from './UniqueGiftHeader.module.scss';\n\ntype OwnProps = {\n  modelAttribute: ApiStarGiftAttributeModel;\n  backdropAttribute: ApiStarGiftAttributeBackdrop;\n  patternAttribute: ApiStarGiftAttributePattern;\n  title?: string;\n  subtitle?: string;\n  className?: string;\n  resellPrice?: ApiStarsAmount;\n};\n\nconst STICKER_SIZE = 120;\n\nconst UniqueGiftHeader = ({\n  modelAttribute,\n  backdropAttribute,\n  patternAttribute,\n  title,\n  subtitle,\n  className,\n  resellPrice,\n}: OwnProps) => {\n  const lang = useLang();\n  const activeKey = useTransitionActiveKey([modelAttribute, backdropAttribute, patternAttribute]);\n  const subtitleColor = backdropAttribute?.textColor;\n\n  const radialPatternBackdrop = useMemo(() => {\n    const backdropColors = [backdropAttribute.centerColor, backdropAttribute.edgeColor];\n    const patternColor = backdropAttribute.patternColor;\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternColor={patternColor}\n        patternIcon={patternAttribute.sticker}\n      />\n    );\n  }, [backdropAttribute, patternAttribute]);\n\n  return (\n    <div className={buildClassName(styles.root, className)}>\n      <Transition\n        className={styles.transition}\n        slideClassName={styles.transitionSlide}\n        activeKey={activeKey}\n        direction={1}\n        name=\"zoomBounceSemiFade\"\n      >\n        {radialPatternBackdrop}\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={modelAttribute.sticker}\n          size={STICKER_SIZE}\n        />\n      </Transition>\n      {title && <h1 className={styles.title}>{title}</h1>}\n      {subtitle && (\n        <p className={styles.subtitle} style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}>\n          {subtitle}\n        </p>\n      )}\n      {resellPrice && (\n        <p className={styles.amount}>\n          <span>\n            {formatStarsTransactionAmount(lang, resellPrice)}\n          </span>\n          <StarIcon type=\"gold\" size=\"middle\" />\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default memo(UniqueGiftHeader);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"GiftInfoModal-module__modal\",\"header\":\"GiftInfoModal-module__header\",\"title\":\"GiftInfoModal-module__title\",\"description\":\"GiftInfoModal-module__description\",\"soldOut\":\"GiftInfoModal-module__soldOut\",\"headerSplitButton\":\"GiftInfoModal-module__headerSplitButton\",\"headerButton\":\"GiftInfoModal-module__headerButton\",\"giftResalePriceContainer\":\"GiftInfoModal-module__giftResalePriceContainer\",\"starAmountIcon\":\"GiftInfoModal-module__starAmountIcon\",\"giftResalePriceStar\":\"GiftInfoModal-module__giftResalePriceStar\",\"left\":\"GiftInfoModal-module__left\",\"right\":\"GiftInfoModal-module__right\",\"footer\":\"GiftInfoModal-module__footer\",\"footerDescription\":\"GiftInfoModal-module__footerDescription\",\"unknown\":\"GiftInfoModal-module__unknown\",\"giftValue\":\"GiftInfoModal-module__giftValue\",\"uniqueAttribute\":\"GiftInfoModal-module__uniqueAttribute\",\"uniqueGift\":\"GiftInfoModal-module__uniqueGift\",\"modalHeader\":\"GiftInfoModal-module__modalHeader\",\"modalCloseButton\":\"GiftInfoModal-module__modalCloseButton\",\"ownerAddress\":\"GiftInfoModal-module__ownerAddress\",\"copyIcon\":\"GiftInfoModal-module__copyIcon\"};","import type { FC, TeactNode } from '../../../../lib/teact/teact';\nimport { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiEmojiStatusType,\n  ApiPeer,\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getHasAdminRight } from '../../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat } from '../../../../global/helpers/peers';\nimport { selectPeer, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\nimport { CUSTOM_PEER_HIDDEN } from '../../../../util/objects/customPeer';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport BadgeButton from '../../../common/BadgeButton';\nimport GiftMenuItems from '../../../common/gift/GiftMenuItems';\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport Icon from '../../../common/icons/Icon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport Link from '../../../ui/Link';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoModal'];\n};\n\ntype StateProps = {\n  fromPeer?: ApiPeer;\n  targetPeer?: ApiPeer;\n  currentUserId?: string;\n  starGiftMaxConvertPeriod?: number;\n  hasAdminRights?: boolean;\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n  tonExplorerUrl?: string;\n  currentUser?: ApiUser;\n  recipientPeer?: ApiPeer;\n};\n\nconst STICKER_SIZE = 120;\n\nconst GiftInfoModal = ({\n  modal,\n  fromPeer,\n  targetPeer,\n  currentUserId,\n  starGiftMaxConvertPeriod,\n  hasAdminRights,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n  tonExplorerUrl,\n  currentUser,\n  recipientPeer,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftInfoModal,\n    changeGiftVisibility,\n    convertGiftToStars,\n    openChatWithInfo,\n    focusMessage,\n    openGiftUpgradeModal,\n    showNotification,\n    buyStarGift,\n    closeGiftModal,\n  } = getActions();\n\n  const [isConvertConfirmOpen, openConvertConfirm, closeConvertConfirm] = useFlag();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState<boolean>(false);\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingFromPeer = useCurrentOrPrev(fromPeer);\n  const renderingTargetPeer = useCurrentOrPrev(targetPeer);\n\n  const isTargetChat = renderingTargetPeer && isApiPeerChat(renderingTargetPeer);\n\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const isSender = savedGift?.fromId === currentUserId;\n  const canConvertDifference = (savedGift && starGiftMaxConvertPeriod && (\n    savedGift.date + starGiftMaxConvertPeriod - getServerTime()\n  )) || 0;\n  const conversionLeft = Math.ceil(canConvertDifference / 60 / 60 / 24);\n\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n  const giftSticker = gift && getStickerFromGift(gift);\n  const hasConvertOption = canConvertDifference > 0 && Boolean(savedGift?.starsToConvert);\n\n  const isGiftUnique = gift && gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n\n  const canFocusUpgrade = Boolean(savedGift?.upgradeMsgId);\n  const canManage = !canFocusUpgrade && savedGift?.inputGift && (\n    isTargetChat ? hasAdminRights : renderingTargetPeer?.id === currentUserId\n  );\n\n  const resellPriceInStars = isGiftUnique ? gift.resellPriceInStars : undefined;\n  const canBuyGift = !canManage && Boolean(resellPriceInStars);\n\n  const giftOwnerTitle = (() => {\n    if (!isGiftUnique) return undefined;\n    const { ownerName, ownerId } = gift;\n    const global = getGlobal(); // Peer titles do not need to be reactive\n    const owner = ownerId ? selectPeer(global, ownerId) : undefined;\n    return owner ? getPeerTitle(lang, owner) : ownerName;\n  })();\n\n  const handleClose = useLastCallback(() => {\n    closeGiftInfoModal();\n  });\n\n  const handleFocusUpgraded = useLastCallback(() => {\n    const giftChat = isSender ? renderingTargetPeer : renderingFromPeer;\n    if (!savedGift?.upgradeMsgId || !giftChat) return;\n    const { upgradeMsgId } = savedGift;\n    focusMessage({ chatId: giftChat.id, messageId: upgradeMsgId });\n    handleClose();\n  });\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n    handleClose();\n  });\n\n  const handleConvertToStars = useLastCallback(() => {\n    const { inputGift } = savedGift!;\n    convertGiftToStars({ gift: inputGift! });\n    closeConvertConfirm();\n    handleClose();\n  });\n\n  const handleOpenUpgradeModal = useLastCallback(() => {\n    if (!savedGift) return;\n    openGiftUpgradeModal({ giftId: savedGift.gift.id, gift: savedGift });\n  });\n\n  const handleBuyGift = useLastCallback(() => {\n    if (gift?.type !== 'starGiftUnique' || !gift.resellPriceInStars) return;\n    setIsConfirmModalOpen(true);\n  });\n\n  const closeConfirmModal = useLastCallback(() => {\n    setIsConfirmModalOpen(false);\n  });\n\n  const handleConfirmBuyGift = useLastCallback(() => {\n    const peer = recipientPeer || currentUser;\n    if (!peer || gift?.type !== 'starGiftUnique' || !gift.resellPriceInStars) return;\n    closeConfirmModal();\n    closeGiftModal();\n    buyStarGift({ peerId: peer.id, slug: gift.slug, stars: gift.resellPriceInStars });\n  });\n\n  const giftAttributes = useMemo(() => {\n    return gift && getGiftAttributes(gift);\n  }, [gift]);\n\n  const SettingsMenuButton: FC<{ onTrigger: () => void; isMenuOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger }) => (\n      <div\n        className={buildClassName(\n          styles.headerButton,\n          styles.left,\n        )}\n        tabIndex={0}\n        role=\"button\"\n        aria-haspopup=\"menu\"\n        aria-label={lang('AriaMoreButton')}\n        onClick={onTrigger}\n      >\n        <Icon\n          name=\"more\"\n          className={styles.icon}\n        />\n      </div>\n    );\n  }, [lang]);\n\n  const renderFooterButton = useLastCallback(() => {\n    if (canBuyGift) {\n      return (\n        <Button noForcedUpperCase size=\"smaller\" onClick={handleBuyGift}>\n          {lang('ButtonBuyGift', {\n            stars: formatStarsAsIcon(lang, resellPriceInStars, { asFont: true }),\n          }, { withNodes: true })}\n        </Button>\n      );\n    }\n\n    if (canFocusUpgrade) {\n      return (\n        <Button size=\"smaller\" onClick={handleFocusUpgraded}>\n          {lang('GiftInfoViewUpgraded')}\n        </Button>\n      );\n    }\n\n    if (canManage && savedGift?.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n      return (\n        <Button size=\"smaller\" isShiny onClick={handleOpenUpgradeModal}>\n          {lang('GiftInfoUpgradeForFree')}\n        </Button>\n      );\n    }\n\n    return (\n      <Button size=\"smaller\" onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    );\n  });\n\n  const saleDateInfo = useMemo(() => {\n    if (!gift) return undefined;\n    let text = '';\n    if (gift.type === 'starGift') {\n      if (gift.firstSaleDate) {\n        text += `${lang('GiftInfoFirstSale')} ${formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true)}`;\n      }\n      if (gift.lastSaleDate) {\n        text += '\\n';\n        text += `${lang('GiftInfoLastSale')} ${formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true)}`;\n      }\n    }\n\n    return text;\n  }, [gift, lang]);\n\n  const modalData = useMemo(() => {\n    if (!typeGift || !gift) {\n      return undefined;\n    }\n\n    const {\n      fromId, isNameHidden, starsToConvert, isUnsaved, isConverted, upgradeMsgId,\n    } = savedGift || {};\n    const canConvert = hasConvertOption && Boolean(starsToConvert);\n\n    const isVisibleForMe = isNameHidden && renderingTargetPeer;\n\n    const description = (() => {\n      if (!savedGift) return lang('GiftInfoSoldOutDescription');\n      if (isTargetChat) return undefined;\n\n      if (savedGift.upgradeMsgId) return lang('GiftInfoDescriptionUpgraded');\n      if (savedGift.canUpgrade && savedGift.alreadyPaidUpgradeStars) {\n        return canManage\n          ? lang('GiftInfoDescriptionFreeUpgrade')\n          : lang('GiftInfoPeerDescriptionFreeUpgradeOut', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n      }\n      if (!canManage && !isSender) return undefined;\n      if (isConverted && canConvert) {\n        return canManage\n          ? lang('GiftInfoDescriptionConverted', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftInfoPeerDescriptionOutConverted', {\n            amount: starsToConvert,\n            peer: getPeerTitle(lang, renderingTargetPeer!)!,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n      }\n\n      if (savedGift.canUpgrade && canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescriptionUpgrade', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n        }\n\n        return lang('GiftInfoDescriptionUpgradeRegular');\n      }\n\n      if (canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescription', {\n            amount: starsToConvert,\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n            pluralValue: starsToConvert,\n          });\n        }\n\n        return lang('GiftInfoDescriptionRegular');\n      }\n\n      if (canConvert) {\n        return lang('GiftInfoPeerDescriptionOut', {\n          amount: starsToConvert,\n          peer: getPeerTitle(lang, renderingTargetPeer!)!,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert,\n        });\n      }\n\n      return lang('GiftInfoPeerDescriptionOutRegular', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n    })();\n\n    function getTitle() {\n      if (isGiftUnique) return gift.title;\n      if (!savedGift) return lang('GiftInfoSoldOutTitle');\n\n      return canManage ? lang('GiftInfoReceived') : lang('GiftInfoTitle');\n    }\n\n    const uniqueGiftContextMenu = (\n      <DropdownMenu\n        className=\"with-menu-transitions\"\n        trigger={SettingsMenuButton}\n        positionX=\"right\"\n      >\n        <GiftMenuItems\n          peerId={renderingModal!.peerId!}\n          gift={typeGift}\n          canManage={canManage}\n          collectibleEmojiStatuses={collectibleEmojiStatuses}\n          currentUserEmojiStatus={currentUserEmojiStatus}\n        />\n      </DropdownMenu>\n    );\n\n    const uniqueGiftModalHeader = (\n      <div\n        className={styles.modalHeader}\n      >\n        {Boolean(canManage && resellPriceInStars) && (\n          <div className={styles.giftResalePriceContainer}>\n            {formatStarsAsIcon(lang, resellPriceInStars!, {\n              asFont: true,\n              className: styles.giftResalePriceStar,\n            })}\n          </div>\n        )}\n        <div className={styles.headerSplitButton}>\n          {isOpen && uniqueGiftContextMenu}\n          <div\n            className={buildClassName(\n              styles.headerButton,\n              styles.right,\n            )}\n            tabIndex={0}\n            role=\"button\"\n            aria-haspopup=\"menu\"\n            aria-label={lang('Close')}\n            onClick={handleClose}\n          >\n            <Icon\n              name=\"close\"\n              className={buildClassName(\n                styles.icon,\n                styles.moreIcon,\n              )}\n            />\n          </div>\n        </div>\n      </div>\n    );\n\n    const uniqueGiftHeader = isGiftUnique && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={STICKER_SIZE}\n        />\n        <h1 className={styles.title}>\n          {getTitle()}\n        </h1>\n        {Boolean(description) && (\n          <p className={buildClassName(styles.description, !savedGift && gift?.type === 'starGift' && styles.soldOut)}>\n            {description}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n    if (gift.type === 'starGift') {\n      const hasFrom = fromId || isNameHidden;\n\n      if (hasFrom) {\n        tableData.push([\n          lang('GiftInfoFrom'),\n          !fromId ? (\n            <>\n              <Avatar size=\"small\" peer={CUSTOM_PEER_HIDDEN} />\n              <span className={styles.unknown}>{oldLang(CUSTOM_PEER_HIDDEN.titleKey!)}</span>\n            </>\n          ) : { chatId: fromId },\n        ]);\n      }\n\n      if (savedGift?.date) {\n        tableData.push([\n          lang('GiftInfoDate'),\n          <span title={saleDateInfo}>{formatDateTimeToString(savedGift.date * 1000, lang.code, true)}</span>,\n        ]);\n      }\n\n      if (gift.firstSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoFirstSale'),\n          formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      if (gift.lastSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoLastSale'),\n          formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      const starsValue = gift.stars + (savedGift?.alreadyPaidUpgradeStars || 0);\n\n      tableData.push([\n        lang('GiftInfoValue'),\n        <div className={styles.giftValue}>\n          {formatStarsAsIcon(lang, starsValue, { className: styles.starAmountIcon })}\n          {canManage && hasConvertOption && Boolean(starsToConvert) && (\n            <BadgeButton onClick={openConvertConfirm}>\n              {lang('GiftInfoConvert', { amount: starsToConvert }, { pluralValue: starsToConvert })}\n            </BadgeButton>\n          )}\n        </div>,\n      ]);\n\n      if (gift.availabilityTotal) {\n        tableData.push([\n          lang('GiftInfoAvailability'),\n          lang('GiftInfoAvailabilityValue', {\n            count: gift.availabilityRemains || 0,\n            total: gift.availabilityTotal,\n          }, {\n            pluralValue: gift.availabilityRemains || 0,\n          }),\n        ]);\n      }\n\n      if (gift.upgradeStars && !upgradeMsgId) {\n        tableData.push([\n          lang('GiftInfoStatus'),\n          <div className={styles.giftValue}>\n            {lang('GiftInfoStatusNonUnique')}\n            {canManage && <BadgeButton onClick={handleOpenUpgradeModal}>{lang('GiftInfoUpgradeBadge')}</BadgeButton>}\n          </div>,\n        ]);\n      }\n\n      if (savedGift?.message) {\n        tableData.push([\n          undefined,\n          renderTextWithEntities(savedGift.message),\n        ]);\n      }\n    }\n\n    if (isGiftUnique) {\n      const { ownerName, ownerAddress, ownerId } = gift;\n      const {\n        model, backdrop, pattern, originalDetails,\n      } = giftAttributes || {};\n\n      if (ownerAddress) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          <span\n            className={styles.ownerAddress}\n            onClick={() => {\n              copyTextToClipboard(ownerAddress);\n              showNotification({\n                message: { key: 'WalletAddressCopied' },\n                icon: 'copy',\n              });\n            }}\n          >\n            {ownerAddress}\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </span>,\n        ]);\n      } else {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          ownerId ? { chatId: ownerId, withEmojiStatus: true } : ownerName || '',\n        ]);\n      }\n\n      if (model) {\n        tableData.push([\n          lang('GiftAttributeModel'),\n          <span className={styles.uniqueAttribute}>\n            {model.name}\n            <BadgeButton>{formatPercent(model.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (backdrop) {\n        tableData.push([\n          lang('GiftAttributeBackdrop'),\n          <span className={styles.uniqueAttribute}>\n            {backdrop.name}\n            <BadgeButton>{formatPercent(backdrop.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (pattern) {\n        tableData.push([\n          lang('GiftAttributeSymbol'),\n          <span className={styles.uniqueAttribute}>\n            {pattern.name}\n            <BadgeButton>{formatPercent(pattern.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoIssued', {\n          issued: gift.issuedCount,\n          total: gift.totalCount,\n        }),\n      ]);\n\n      if (originalDetails) {\n        const {\n          date, recipientId, message, senderId,\n        } = originalDetails;\n        const global = getGlobal(); // Peer titles do not need to be reactive\n\n        const openChat = (id: string) => {\n          openChatWithInfo({ id });\n          closeGiftInfoModal();\n        };\n\n        const recipient = selectPeer(global, recipientId)!;\n        const sender = senderId ? selectPeer(global, senderId) : undefined;\n\n        const formattedDate = formatDateTimeToString(date * 1000, lang.code, true);\n        const recipientLink = (\n\n          <Link onClick={() => openChat(recipientId)} isPrimary>\n            {getPeerTitle(lang, recipient)}\n          </Link>\n        );\n\n        let text: TeactNode | undefined;\n        if (!sender || senderId === recipientId) {\n          text = message ? lang('GiftInfoPeerOriginalInfoText', {\n            peer: recipientLink,\n            text: renderTextWithEntities(message),\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          }) : lang('GiftInfoPeerOriginalInfo', {\n            peer: recipientLink,\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          });\n        } else {\n          const senderLink = (\n\n            <Link onClick={() => openChat(sender.id)} isPrimary>\n              {getPeerTitle(lang, sender)}\n            </Link>\n          );\n          text = message ? lang('GiftInfoPeerOriginalInfoTextSender', {\n            peer: recipientLink,\n            sender: senderLink,\n            text: renderTextWithEntities(message),\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          }) : lang('GiftInfoPeerOriginalInfoSender', {\n            peer: recipientLink,\n            date: formattedDate,\n            sender: senderLink,\n          }, {\n            withNodes: true,\n          });\n        }\n\n        tableData.push([\n          undefined,\n          <span>{text}</span>,\n        ]);\n      }\n    }\n\n    const tonLink = tonExplorerUrl && isGiftUnique && gift.giftAddress && (\n      `${tonExplorerUrl}${gift.giftAddress}`\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {(canManage || tonLink || canBuyGift) && (\n          <div className={styles.footerDescription}>\n            {tonLink && (\n              <div>\n                {lang('GiftInfoTonText', {\n                  link: <SafeLink url={tonLink} shouldSkipModal text={lang('GiftInfoTonLinkText')} />,\n                }, { withNodes: true })}\n              </div>\n            )}\n            {canManage && (\n              <div>\n                {lang(`GiftInfo${isTargetChat ? 'Channel' : ''}${isUnsaved ? 'Hidden' : 'Saved'}`, {\n                  link: (\n                    <Link isPrimary onClick={handleTriggerVisibility}>\n                      {lang(`GiftInfoSaved${isUnsaved ? 'Show' : 'Hide'}`)}\n                    </Link>\n                  ),\n                }, {\n                  withNodes: true,\n                })}\n              </div>\n            )}\n            {!canBuyGift && isVisibleForMe && (\n              <div>\n                {lang('GiftInfoSenderHidden')}\n              </div>\n            )}\n            {canBuyGift && giftOwnerTitle && (\n              <div>\n                {lang('GiftInfoBuyGift', {\n                  user: giftOwnerTitle,\n                }, { withNodes: true })}\n              </div>\n            )}\n          </div>\n        )}\n        {renderFooterButton()}\n      </div>\n    );\n\n    return {\n      modalHeader: isGiftUnique ? uniqueGiftModalHeader : undefined,\n      header: isGiftUnique ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [\n    typeGift, savedGift, renderingTargetPeer, giftSticker, lang,\n    canManage, hasConvertOption, isSender, oldLang, tonExplorerUrl,\n    gift, giftAttributes, renderFooterButton, isTargetChat,\n    SettingsMenuButton, isGiftUnique, renderingModal,\n    collectibleEmojiStatuses, currentUserEmojiStatus, saleDateInfo,\n    canBuyGift, giftOwnerTitle, isOpen, resellPriceInStars,\n  ]);\n\n  return (\n    <>\n      <TableInfoModal\n        isOpen={isOpen}\n        modalHeader={modalData?.modalHeader}\n        header={modalData?.header}\n        hasBackdrop={isGiftUnique}\n        tableData={modalData?.tableData}\n        footer={modalData?.footer}\n        className={styles.modal}\n        onClose={handleClose}\n        withBalanceBar={Boolean(canBuyGift)}\n        isLowStackPriority\n      />\n      {uniqueGift && currentUser && Boolean(resellPriceInStars) && (\n        <ConfirmDialog\n          isOpen={isConfirmModalOpen}\n          noDefaultTitle\n          onClose={closeConfirmModal}\n          confirmLabel={lang('ButtonBuyGift', {\n            stars: formatStarsAsIcon(lang, resellPriceInStars, { asFont: true }),\n          }, { withNodes: true })}\n          confirmHandler={handleConfirmBuyGift}\n        >\n\n          <GiftTransferPreview\n            peer={recipientPeer || currentUser}\n            gift={uniqueGift}\n          />\n          {!recipientPeer\n            && (\n              <p>\n                {lang('GiftBuyConfirmDescription', {\n                  gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                  stars: formatStarsAsText(lang, resellPriceInStars),\n                }, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </p>\n            )}\n          {recipientPeer\n            && (\n              <p>\n                {lang('GiftBuyForPeerConfirmDescription', {\n                  gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                  stars: formatStarsAsText(lang, resellPriceInStars),\n                  peer: getPeerTitle(lang, recipientPeer),\n                }, {\n                  withNodes: true,\n                  withMarkdown: true,\n                })}\n              </p>\n            )}\n        </ConfirmDialog>\n      )}\n      {savedGift && (\n        <ConfirmDialog\n          isOpen={isConvertConfirmOpen}\n          onClose={closeConvertConfirm}\n          confirmHandler={handleConvertToStars}\n          title={lang('GiftInfoConvertTitle')}\n        >\n          <div>\n            {lang('GiftInfoPeerConvertDescription', {\n              amount: formatStarsAsText(lang, savedGift.starsToConvert!),\n              peer: getPeerTitle(lang, renderingFromPeer!)!,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n          {hasConvertOption && (\n            <div>\n              {lang('GiftInfoConvertDescriptionPeriod', {\n                count: conversionLeft,\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n                pluralValue: conversionLeft,\n              })}\n            </div>\n          )}\n          <div>{lang('GiftInfoConvertDescription2')}</div>\n        </ConfirmDialog>\n      )}\n    </>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const typeGift = modal?.gift;\n    const isSavedGift = typeGift && 'gift' in typeGift;\n    const currentUserId = global.currentUserId;\n\n    const fromId = isSavedGift && typeGift.fromId;\n    const fromPeer = fromId ? selectPeer(global, fromId) : undefined;\n    const targetPeer = modal?.peerId ? selectPeer(global, modal.peerId) : undefined;\n    const chat = targetPeer && isApiPeerChat(targetPeer) ? targetPeer : undefined;\n    const hasAdminRights = chat && getHasAdminRight(chat, 'postMessages');\n    const currentUser = selectUser(global, currentUserId!);\n    const recipientPeer = modal?.recipientId && currentUserId !== modal.recipientId\n      ? selectPeer(global, modal.recipientId) : undefined;\n    const currentUserEmojiStatus = currentUser?.emojiStatus;\n    const collectibleEmojiStatuses = global.collectibleEmojiStatuses?.statuses;\n\n    return {\n      fromPeer,\n      targetPeer,\n      currentUserId,\n      starGiftMaxConvertPeriod: global.appConfig?.starGiftMaxConvertPeriod,\n      tonExplorerUrl: global.appConfig?.tonExplorerUrl,\n      hasAdminRights,\n      currentUserEmojiStatus,\n      collectibleEmojiStatuses,\n      currentUser,\n      recipientPeer,\n    };\n  },\n)(GiftInfoModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftRecipientPicker-module__root\",\"picker\":\"GiftRecipientPicker-module__picker\"};","import {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport { filterPeersByQuery } from '../../../../global/helpers/peers';\nimport { selectCanGift } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nimport styles from './GiftRecipientPicker.module.scss';\n\nexport type OwnProps = {\n  modal?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n}\n\nconst GiftRecipientPicker = ({\n  modal,\n  currentUserId,\n  userIds,\n}: OwnProps & StateProps) => {\n  const { closeGiftRecipientPicker, openGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n  const isOpen = modal;\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const global = getGlobal();\n    const idsWithSelf = userIds ? userIds.concat(currentUserId!) : undefined;\n    const filteredPeerIds = idsWithSelf ? filterPeersByQuery({ ids: idsWithSelf, query: searchQuery }) : [];\n\n    return sortChatIds(unique(filteredPeerIds).filter((peerId) => {\n      return selectCanGift(global, peerId);\n    }), undefined, [currentUserId!]);\n  }, [currentUserId, searchQuery, userIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((selectedId: string) => {\n    openGiftModal({ forUserId: selectedId });\n    closeGiftRecipientPicker();\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeGiftRecipientPicker}\n      title={oldLang('GiftTelegramPremiumOrStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onSelectedIdChange={handleSelectedUserIdsChange}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        forceShowSelf\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { currentUserId } = global;\n\n  return {\n    currentUserId,\n    userIds: global.contactList?.userIds,\n  };\n})(GiftRecipientPicker));\n","// extracted by mini-css-extract-plugin\nexport default {\"descriptionContainer\":\"GiftResalePriceComposerModal-module__descriptionContainer\",\"descriptionPrice\":\"GiftResalePriceComposerModal-module__descriptionPrice\",\"inputPrice\":\"GiftResalePriceComposerModal-module__inputPrice\"};","import {\n  memo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport InputText from '../../../ui/InputText';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftResalePriceComposerModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftResalePriceComposerModal'];\n};\n\nexport type StateProps = {\n  starsStargiftResaleCommissionPermille?: number;\n  starsStargiftResaleAmountMin: number;\n  starsStargiftResaleAmountMax?: number;\n  starsUsdWithdrawRate?: number;\n};\n\nconst GiftResalePriceComposerModal = ({\n  modal, starsStargiftResaleCommissionPermille,\n  starsStargiftResaleAmountMin, starsStargiftResaleAmountMax, starsUsdWithdrawRate,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftResalePriceComposerModal,\n    closeGiftInfoModal,\n    updateStarGiftPrice,\n    showNotification,\n  } = getActions();\n  const isOpen = Boolean(modal);\n  const [price, setPrice] = useState<number | undefined>(undefined);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const hasPrice = Boolean(price);\n\n  const lang = useLang();\n\n  const handleChangePrice = useLastCallback((e) => {\n    const value = e.target.value;\n    const number = parseFloat(value);\n    const result = value === '' || Number.isNaN(number) ? undefined\n      : starsStargiftResaleAmountMax ? Math.min(number, starsStargiftResaleAmountMax) : number;\n    setPrice(result);\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeGiftResalePriceComposerModal();\n  });\n\n  const handleSellGift = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift || !price) return;\n    closeGiftResalePriceComposerModal();\n    closeGiftInfoModal();\n    updateStarGiftPrice({ gift: savedGift.inputGift, price });\n    showNotification({\n      icon: 'sell-outline',\n      message: {\n        key: 'NotificationGiftIsSale',\n        variables: {\n          gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }),\n        },\n      },\n    });\n  });\n  const commission = starsStargiftResaleCommissionPermille;\n  const isPriceCorrect = hasPrice && price > starsStargiftResaleAmountMin;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('GiftSellTitle')}\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      <div className={styles.inputPrice}>\n        <InputText\n          label={lang('InputPlaceholderGiftResalePrice')}\n          onChange={handleChangePrice}\n          value={price?.toString()}\n          inputMode=\"numeric\"\n          tabIndex={0}\n          teactExperimentControlled\n        />\n      </div>\n\n      <div className={styles.descriptionContainer}>\n        <span>\n          {!isPriceCorrect && Boolean(commission) && lang('DescriptionComposerGiftMinimumPrice', {\n            stars: formatStarsAsText(lang, starsStargiftResaleAmountMin),\n          }, {\n            withMarkdown: true,\n            withNodes: true,\n          })}\n          {isPriceCorrect && lang('DescriptionComposerGiftResalePrice',\n            {\n              stars: formatStarsAsText(lang, commission ? Number((price * (commission)).toFixed()) : price),\n            },\n            {\n              withMarkdown: true,\n              withNodes: true,\n            })}\n        </span>\n\n        {isPriceCorrect && Boolean(starsUsdWithdrawRate) && (\n          <span className={styles.descriptionPrice}>\n            {` ${formatCurrencyAsString(\n              price * starsUsdWithdrawRate,\n              'USD',\n              lang.code,\n            )}`}\n          </span>\n        )}\n      </div>\n\n      <Button noForcedUpperCase disabled={!isPriceCorrect} size=\"smaller\" onClick={handleSellGift}>\n        {isPriceCorrect && lang('ButtonSellGift', {\n          stars: formatStarsAsIcon(lang, price, { asFont: true }),\n        }, { withNodes: true })}\n        {!isPriceCorrect && lang('Sell')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const configPermille = global.appConfig?.starsStargiftResaleCommissionPermille;\n    const starsStargiftResaleCommissionPermille = configPermille ? (configPermille / 1000) : undefined;\n    const starsStargiftResaleAmountMin = global.appConfig?.starsStargiftResaleAmountMin || 0;\n    const starsStargiftResaleAmountMax = global.appConfig?.starsStargiftResaleAmountMax;\n\n    const starsUsdWithdrawRateX1000 = global.appConfig?.starsUsdWithdrawRateX1000;\n    const starsUsdWithdrawRate = starsUsdWithdrawRateX1000 ? starsUsdWithdrawRateX1000 / 1000 : 1;\n\n    return {\n      starsStargiftResaleCommissionPermille,\n      starsStargiftResaleAmountMin,\n      starsStargiftResaleAmountMax,\n      starsUsdWithdrawRate,\n    };\n  },\n)(GiftResalePriceComposerModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"GiftStatusInfoModal-module__header\",\"profileBlock\":\"GiftStatusInfoModal-module__profileBlock\",\"titleContainer\":\"GiftStatusInfoModal-module__titleContainer\",\"radialPattern\":\"GiftStatusInfoModal-module__radialPattern\",\"lockIcon\":\"GiftStatusInfoModal-module__lockIcon\",\"avatar\":\"GiftStatusInfoModal-module__avatar\",\"userTitle\":\"GiftStatusInfoModal-module__userTitle\",\"status\":\"GiftStatusInfoModal-module__status\",\"giftTitle\":\"GiftStatusInfoModal-module__giftTitle\",\"infoDescription\":\"GiftStatusInfoModal-module__infoDescription\",\"footer\":\"GiftStatusInfoModal-module__footer\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectIsCurrentUserPremium, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useCustomEmoji from '../../../common/hooks/useCustomEmoji';\n\nimport Avatar from '../../../common/Avatar';\nimport FullNameTitle from '../../../common/FullNameTitle';\nimport Icon from '../../../common/icons/Icon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\n\nimport styles from './GiftStatusInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftStatusInfoModal'];\n};\n\ntype StateProps = {\n  currentUser: ApiUser;\n  isCurrentUserPremium?: boolean;\n};\n\nconst GiftStatusInfoModal = ({\n  modal,\n  currentUser,\n  isCurrentUserPremium,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftStatusInfoModal,\n    setEmojiStatus,\n  } = getActions();\n  const lang = useLang();\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const { emojiStatus } = renderingModal || {};\n\n  const subtitleColor = emojiStatus?.textColor;\n\n  const patternIcon = useCustomEmoji(emojiStatus?.patternDocumentId);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftStatusInfoModal();\n  });\n\n  const onWearClick = useLastCallback(() => {\n    if (emojiStatus) {\n      setEmojiStatus({ emojiStatus });\n    }\n    closeGiftStatusInfoModal();\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    if (!emojiStatus || !isOpen) return undefined;\n\n    const backdropColors = [emojiStatus.centerColor, emojiStatus.edgeColor];\n    const patternColor = emojiStatus.patternColor;\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternColor={patternColor}\n        patternIcon={patternIcon.customEmoji}\n      />\n    );\n  }, [emojiStatus, isOpen, patternIcon]);\n\n  const mockPeerWithStatus = useMemo(() => {\n    return {\n      ...currentUser,\n      emojiStatus,\n    } satisfies ApiUser;\n  }, [currentUser, emojiStatus]);\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div\n          className={buildClassName(styles.profileBlock)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n        >\n\n          {radialPatternBackdrop}\n          <Avatar peer={mockPeerWithStatus} size=\"jumbo\" className={styles.avatar} />\n          <FullNameTitle\n            peer={mockPeerWithStatus}\n            className={styles.userTitle}\n            withEmojiStatus\n            noFake\n            noVerified\n            statusSparklesColor={subtitleColor}\n          />\n          <p className={styles.status} style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}>\n            {lang('Online')}\n          </p>\n        </div>\n        <div className={styles.titleContainer}>\n          <div className={styles.giftTitle}>\n            {\n              lang('UniqueStatusWearTitle', {\n                gift: mockPeerWithStatus?.emojiStatus?.title,\n              })\n            }\n          </div>\n          <div className={styles.infoDescription}>\n            {\n              lang('UniqueStatusBenefitsDescription')\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }, [subtitleColor, radialPatternBackdrop, mockPeerWithStatus, lang]);\n\n  const listItemData = [\n    ['radial-badge', lang('UniqueStatusBadgeBenefitTitle'), lang('UniqueStatusBadgeDescription')],\n    ['unique-profile', lang('UniqueStatusProfileDesignBenefitTitle'), lang('UniqueStatusProfileDesignDescription')],\n    ['proof-of-ownership', lang('UniqueStatusProofOfOwnershipBenefitTitle'),\n      lang('UniqueStatusProofOfOwnershipDescription')],\n  ] satisfies TableAboutData;\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          size=\"smaller\"\n          onClick={onWearClick}\n        >\n          {lang('UniqueStatusWearButton')}\n          {!isCurrentUserPremium && <Icon name=\"lock-badge\" className={styles.lockIcon} />}\n        </Button>\n      </div>\n    );\n  }, [lang, isCurrentUserPremium, isOpen]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const currentUser = selectUser(global, global.currentUserId!)!;\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      currentUser,\n      isCurrentUserPremium,\n    };\n  },\n)(GiftStatusInfoModal));\n","import {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport type { UniqueCustomPeer } from '../../../../types';\n\nimport { ALL_FOLDER_ID } from '../../../../config';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectCanGift, selectPeer } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\nimport { MEMO_EMPTY_ARRAY } from '../../../../util/memo';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useFolderManagerForOrderedIds } from '../../../../hooks/useFolderManager';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport usePeerSearch from '../../../../hooks/usePeerSearch';\n\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['giftTransferModal'];\n};\n\ntype StateProps = {\n  contactIds?: string[];\n  currentUserId?: string;\n};\n\ntype Categories = 'withdraw';\n\nconst GiftTransferModal = ({\n  modal, contactIds, currentUserId,\n}: OwnProps & StateProps) => {\n  const { closeGiftTransferModal, openGiftWithdrawModal, transferGift } = getActions();\n  const isOpen = Boolean(modal);\n\n  const lang = useLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const uniqueGift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = uniqueGift && getGiftAttributes(uniqueGift);\n\n  const [selectedId, setSelectedId] = useState<string | undefined>();\n\n  const renderingSelectedPeerId = useCurrentOrPrev(selectedId);\n  const renderingSelectedPeer = useMemo(() => {\n    const global = getGlobal();\n    return renderingSelectedPeerId ? selectPeer(global, renderingSelectedPeerId) : undefined;\n  }, [renderingSelectedPeerId]);\n\n  const orderedChatIds = useFolderManagerForOrderedIds(ALL_FOLDER_ID);\n\n  const sortedLocalIds = useMemo(() => {\n    return unique([\n      ...(contactIds || []),\n      ...(orderedChatIds || []),\n    ]);\n  }, [contactIds, orderedChatIds]);\n\n  const { result: foundIds, currentResultsQuery } = usePeerSearch({\n    query: searchQuery,\n    defaultValue: sortedLocalIds,\n  });\n\n  const isLoading = currentResultsQuery !== searchQuery;\n\n  const categories = useMemo(() => {\n    if (currentResultsQuery) return MEMO_EMPTY_ARRAY;\n\n    return [{\n      type: 'withdraw',\n      isCustomPeer: true,\n      avatarIcon: 'toncoin',\n      peerColorId: 5,\n      title: lang('GiftTransferTON'),\n    }] satisfies UniqueCustomPeer<Categories>[];\n  }, [lang, currentResultsQuery]);\n\n  const handleCategoryChange = useLastCallback((category: Categories) => {\n    if (category !== 'withdraw') return;\n\n    openGiftWithdrawModal({\n      gift: renderingModal!.gift,\n    });\n    closeGiftTransferModal();\n  });\n\n  const displayIds = useMemo(() => {\n    if (isLoading) return MEMO_EMPTY_ARRAY;\n    const global = getGlobal();\n\n    return sortChatIds((foundIds || []).filter((peerId) => (\n      peerId !== currentUserId && selectCanGift(global, peerId)\n    )),\n    false);\n  }, [isLoading, foundIds, currentUserId]);\n\n  const closeConfirmModal = useLastCallback(() => {\n    setSelectedId(undefined);\n  });\n\n  useEffect(() => {\n    if (!isOpen) {\n      setSelectedId(undefined);\n    }\n  }, [isOpen]);\n\n  const handleTransfer = useLastCallback(() => {\n    if (!renderingModal?.gift.inputGift) return;\n    transferGift({\n      gift: renderingModal.gift.inputGift,\n      recipientId: renderingSelectedPeerId!,\n      transferStars: renderingModal.gift.transferStars,\n    });\n\n    closeConfirmModal();\n    closeGiftTransferModal();\n  });\n\n  return (\n    <PickerModal\n      isOpen={isOpen}\n      onClose={closeGiftTransferModal}\n      title={lang('GiftTransferTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      ignoreFreeze\n    >\n      <PeerPicker<Categories>\n        itemIds={displayIds}\n        categories={categories}\n        onSelectedCategoryChange={handleCategoryChange}\n        withDefaultPadding\n        withPeerUsernames\n        isSearchable\n        noScrollRestore\n        isLoading={isLoading}\n        filterValue={searchQuery}\n        filterPlaceholder={lang('Search')}\n        onFilterChange={setSearchQuery}\n        onSelectedIdChange={setSelectedId}\n      />\n      {giftAttributes && (\n        <ConfirmDialog\n          isOpen={Boolean(selectedId)}\n          noDefaultTitle\n          onClose={closeConfirmModal}\n          confirmLabel={renderingModal?.gift.transferStars\n            ? lang(\n              'GiftTransferConfirmButton',\n              { amount: formatStarsAsIcon(lang, renderingModal.gift.transferStars, { asFont: true }) },\n              { withNodes: true },\n            ) : lang('GiftTransferConfirmButtonFree')}\n          confirmHandler={handleTransfer}\n        >\n          {renderingSelectedPeer && (\n            <GiftTransferPreview\n              peer={renderingSelectedPeer}\n              gift={uniqueGift}\n            />\n          )}\n          <p>\n            {renderingModal?.gift.transferStars\n              ? lang('GiftTransferConfirmDescription', {\n                gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                amount: formatStarsAsText(lang, renderingModal.gift.transferStars),\n                peer: getPeerTitle(lang, renderingSelectedPeer!),\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n              })\n              : lang('GiftTransferConfirmDescriptionFree', {\n                gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                peer: getPeerTitle(lang, renderingSelectedPeer!),\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n              })}\n          </p>\n        </ConfirmDialog>\n      )}\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { contactList, currentUserId } = global;\n\n    return {\n      contactIds: contactList?.userIds,\n      currentUserId,\n    };\n  },\n)(GiftTransferModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"footer\":\"GiftUpgradeModal-module__footer\",\"footerButton\":\"GiftUpgradeModal-module__footerButton\"};","import {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarGiftAttribute,\n  ApiStarGiftAttributeBackdrop,\n  ApiStarGiftAttributeModel,\n  ApiStarGiftAttributePattern,\n  ApiStarGiftRegular,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { ApiMediaFormat } from '../../../../api/types';\n\nimport { getStickerMediaHash } from '../../../../global/helpers';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { fetch } from '../../../../util/mediaLoader';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftUpgradeModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftUpgradeModal'];\n};\n\ntype StateProps = {\n  recipient?: ApiPeer;\n};\n\ntype Attributes = {\n  model: ApiStarGiftAttributeModel;\n  pattern: ApiStarGiftAttributePattern;\n  backdrop: ApiStarGiftAttributeBackdrop;\n};\n\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nconst GiftUpgradeModal = ({ modal, recipient }: OwnProps & StateProps) => {\n  const { closeGiftUpgradeModal, upgradeGift } = getActions();\n  const isOpen = Boolean(modal);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingRecipient = useCurrentOrPrev(recipient);\n  const [shouldKeepOriginalDetails, setShouldKeepOriginalDetails] = useState(false);\n\n  const [previewAttributes, setPreviewAttributes] = useState<Attributes | undefined>();\n\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => closeGiftUpgradeModal());\n\n  const handleUpgrade = useLastCallback(() => {\n    const gift = renderingModal?.gift;\n    if (!gift?.inputGift) return;\n\n    upgradeGift({\n      gift: gift.inputGift,\n      shouldKeepOriginalDetails,\n      upgradeStars: !gift.alreadyPaidUpgradeStars ? (gift.gift as ApiStarGiftRegular).upgradeStars : undefined,\n    });\n    handleClose();\n  });\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen && renderingModal?.sampleAttributes) {\n      updatePreviewAttributes();\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  // Preload stickers and patterns\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    const patternStickers = attributes.filter((attr): attr is ApiStarGiftAttributeModel => attr.type === 'pattern')\n      .map((attr) => attr.sticker);\n    const modelStickers = attributes.filter((attr): attr is ApiStarGiftAttributeModel => attr.type === 'model')\n      .map((attr) => attr.sticker);\n\n    const mediaHashes = [...patternStickers, ...modelStickers].map((sticker) => getStickerMediaHash(sticker, 'full'));\n    mediaHashes.forEach((hash) => {\n      fetch(hash, ApiMediaFormat.BlobUrl);\n    });\n  }, [renderingModal?.sampleAttributes]);\n\n  const modalData = useMemo(() => {\n    if (!previewAttributes || !isOpen) {\n      return undefined;\n    }\n\n    const gift = renderingModal?.gift;\n\n    const listItemData = [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftUpgradeUniqueDescription')],\n      ['trade', lang('GiftUpgradeTransferableTitle'), lang('GiftUpgradeTransferableDescription')],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftUpgradeTradeableDescription')],\n    ] satisfies TableAboutData;\n\n    const subtitle = renderingRecipient\n      ? lang('GiftPeerUpgradeText', { peer: getPeerTitle(lang, renderingRecipient) })\n      : lang('GiftUpgradeTextOwn');\n\n    const header = (\n      <UniqueGiftHeader\n        modelAttribute={previewAttributes.model}\n        backdropAttribute={previewAttributes.backdrop}\n        patternAttribute={previewAttributes.pattern}\n        title={lang('GiftUpgradeTitle')}\n        subtitle={subtitle}\n      />\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {!gift && (\n          <Button className={styles.footerButton} size=\"smaller\" onClick={handleClose}>\n            {lang('OK')}\n          </Button>\n        )}\n        {gift && (\n          <>\n            <Checkbox\n              label={lang('GiftUpgradeKeepDetails')}\n              onCheck={setShouldKeepOriginalDetails}\n              checked={shouldKeepOriginalDetails}\n            />\n            <Button className={styles.footerButton} size=\"smaller\" isShiny onClick={handleUpgrade}>\n              {gift.alreadyPaidUpgradeStars\n                ? lang('GeneralConfirm')\n                : lang('GiftUpgradeButton', {\n                  amount: formatStarsAsIcon(lang, (gift.gift as ApiStarGiftRegular).upgradeStars!, { asFont: true }),\n                }, { withNodes: true })}\n            </Button>\n          </>\n        )}\n      </div>\n    );\n\n    return {\n      listItemData,\n      header,\n      footer,\n    };\n  }, [previewAttributes, isOpen, lang, renderingRecipient, renderingModal?.gift, shouldKeepOriginalDetails]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={modalData?.header}\n      footer={modalData?.footer}\n      listItemData={modalData?.listItemData}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const recipientId = modal?.recipientId;\n    const recipient = recipientId ? selectPeer(global, recipientId) : undefined;\n\n    return {\n      recipient,\n    };\n  },\n)(GiftUpgradeModal));\n\nfunction getRandomAttributes(list: ApiStarGiftAttribute[], previousSelection?: Attributes): Attributes {\n  const models = list.filter((attr): attr is ApiStarGiftAttributeModel => (\n    attr.type === 'model' && attr.name !== previousSelection?.model.name\n  ));\n  const patterns = list.filter((attr): attr is ApiStarGiftAttributePattern => (\n    attr.type === 'pattern' && attr.name !== previousSelection?.pattern.name\n  ));\n  const backdrops = list.filter((attr): attr is ApiStarGiftAttributeBackdrop => (\n    attr.type === 'backdrop' && attr.name !== previousSelection?.backdrop.name\n  ));\n\n  const randomModel = models[Math.floor(Math.random() * models.length)];\n  const randomPattern = patterns[Math.floor(Math.random() * patterns.length)];\n  const randomBackdrop = backdrops[Math.floor(Math.random() * backdrops.length)];\n\n  return {\n    model: randomModel,\n    pattern: randomPattern,\n    backdrop: randomBackdrop,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"GiftWithdrawModal-module__header\",\"giftPreview\":\"GiftWithdrawModal-module__giftPreview\",\"backdrop\":\"GiftWithdrawModal-module__backdrop\",\"description\":\"GiftWithdrawModal-module__description\",\"arrow\":\"GiftWithdrawModal-module__arrow\",\"noPassword\":\"GiftWithdrawModal-module__noPassword\"};","import {\n  memo,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { type CustomPeer, SettingsScreens } from '../../../../types';\n\nimport { getDays } from '../../../../util/dates/units';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport PasswordForm from '../../../common/PasswordForm';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftWithdrawModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftWithdrawModal'];\n};\n\ntype StateProps = {\n  hasPassword?: boolean;\n  passwordHint?: string;\n};\n\nconst FRAGMENT_PEER: CustomPeer = {\n  isCustomPeer: true,\n  avatarIcon: 'fragment',\n  title: '',\n  customPeerAvatarColor: '#000000',\n};\nconst GIFT_STICKER_SIZE = 4.5 * REM;\n\nconst GiftWithdrawModal = ({ modal, hasPassword, passwordHint }: OwnProps & StateProps) => {\n  const {\n    closeGiftWithdrawModal,\n    clearGiftWithdrawError,\n    closeGiftInfoModal,\n    processStarGiftWithdrawal,\n    openSettingsScreen,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const [shouldShowPassword, setShouldShowPassword] = useState(false);\n\n  const lang = useLang();\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const gift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = gift && getGiftAttributes(gift);\n  const exportDelay = renderingModal?.gift?.canExportAt\n    ? Math.max(renderingModal.gift.canExportAt - getServerTime(), 0) : undefined;\n\n  const handleClose = useLastCallback(() => {\n    closeGiftWithdrawModal();\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    processStarGiftWithdrawal({\n      gift: renderingModal!.gift.inputGift!,\n      password,\n    });\n  });\n\n  const handleSetUpPassword = useLastCallback(() => {\n    openSettingsScreen({\n      screen: SettingsScreens.TwoFaDisabled,\n    });\n    closeGiftWithdrawModal();\n    closeGiftInfoModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('GiftWithdrawTitle')}\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      {giftAttributes && (\n        <>\n          <div className={styles.header}>\n            <div className={styles.giftPreview}>\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n                patternColor={giftAttributes.backdrop?.patternColor}\n                patternIcon={giftAttributes.pattern?.sticker}\n              />\n              <AnimatedIconFromSticker\n                className={styles.sticker}\n                size={GIFT_STICKER_SIZE}\n                sticker={giftAttributes.model?.sticker}\n              />\n            </div>\n            <Icon name=\"next\" className={styles.arrow} />\n            <Avatar\n              peer={FRAGMENT_PEER}\n              size=\"giant\"\n              className={styles.avatar}\n            />\n          </div>\n          <p className={styles.description}>\n            {lang('GiftWithdrawDescription', {\n              gift: `${gift.title} #${gift.number}`,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n              renderTextFilters: ['br'],\n            })}\n          </p>\n        </>\n      )}\n      {Boolean(exportDelay) && (\n        <p className={styles.exportHint}>\n          {lang('GiftWithdrawWait', { days: getDays(exportDelay) }, { pluralValue: getDays(exportDelay) })}\n        </p>\n      )}\n      {!hasPassword && (\n        <>\n          <span className={styles.noPassword}>{lang('ErrorPasswordMissing')}</span>\n          <Button className=\"mt-2\" size=\"smaller\" onClick={handleSetUpPassword}>{lang('SetUp2FA')}</Button>\n        </>\n      )}\n      {hasPassword && !exportDelay && (\n        <PasswordForm\n          shouldShowSubmit\n          placeholder={lang('CheckPasswordPlaceholder')}\n          error={renderingModal?.errorKey && lang.withRegular(renderingModal?.errorKey)}\n          description={lang('CheckPasswordDescription')}\n          clearError={clearGiftWithdrawError}\n          isLoading={renderingModal?.isLoading}\n          hint={passwordHint}\n          isPasswordVisible={shouldShowPassword}\n          shouldResetValue={isOpen}\n          onChangePasswordVisibility={setShouldShowPassword}\n          submitLabel={lang('GiftWithdrawSubmit')}\n          onSubmit={handleSubmit}\n        />\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      settings: {\n        byKey: {\n          hasPassword,\n        },\n      },\n      twoFaSettings: {\n        hint: passwordHint,\n      },\n    } = global;\n\n    return {\n      hasPassword,\n      passwordHint,\n    };\n  },\n)(GiftWithdrawModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"PaidReactionModal-module__content\",\"title\":\"PaidReactionModal-module__title\",\"slider\":\"PaidReactionModal-module__slider\",\"description\":\"PaidReactionModal-module__description\",\"itemInfo\":\"PaidReactionModal-module__itemInfo\",\"itemTitle\":\"PaidReactionModal-module__itemTitle\",\"itemSubtitle\":\"PaidReactionModal-module__itemSubtitle\",\"itemIcon\":\"PaidReactionModal-module__itemIcon\",\"sendAsPeerButtonAvatar\":\"PaidReactionModal-module__sendAsPeerButtonAvatar\",\"sendAsPeerMenuButton\":\"PaidReactionModal-module__sendAsPeerMenuButton\",\"buttonDownIcon\":\"PaidReactionModal-module__buttonDownIcon\",\"sendAsPeerMenuBubble\":\"PaidReactionModal-module__sendAsPeerMenuBubble\",\"sendAsPeerMenu\":\"PaidReactionModal-module__sendAsPeerMenu\",\"sendAsPeersMenuContainer\":\"PaidReactionModal-module__sendAsPeersMenuContainer\",\"headerControlPanel\":\"PaidReactionModal-module__headerControlPanel\",\"separator\":\"PaidReactionModal-module__separator\",\"checkBox\":\"PaidReactionModal-module__checkBox\",\"topLabel\":\"PaidReactionModal-module__topLabel\",\"top\":\"PaidReactionModal-module__top\",\"topBadge\":\"PaidReactionModal-module__topBadge\",\"buttonStar\":\"PaidReactionModal-module__buttonStar\",\"topPeer\":\"PaidReactionModal-module__topPeer\",\"disclaimer\":\"PaidReactionModal-module__disclaimer\"};","import type { FC } from '../../../lib/teact/teact';\nimport type React from '../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMessage, ApiPaidReactionPrivacyType,\n  ApiPeer,\n  ApiSendAsPeerId,\n  ApiStarsAmount, ApiUser,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { CustomPeer } from '../../../types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../config';\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectChat, selectChatMessage, selectPeer, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport FullNameTitle from '../../common/FullNameTitle';\nimport Icon from '../../common/icons/Icon';\nimport PeerBadge from '../../common/PeerBadge';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport DropdownMenu from '../../ui/DropdownMenu';\nimport MenuItem from '../../ui/MenuItem';\nimport Modal from '../../ui/Modal';\nimport Separator from '../../ui/Separator';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport StarSlider from './StarSlider';\n\nimport styles from './PaidReactionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['paidReactionModal'];\n};\n\ntype StateProps = {\n  message?: ApiMessage;\n  chat?: ApiChat;\n  maxAmount: number;\n  starBalance?: ApiStarsAmount;\n  defaultPrivacy?: ApiPaidReactionPrivacyType;\n  sendPaidReactionsAsPeerIds?: ApiSendAsPeerId[];\n  currentUserId: string;\n  currentUser: ApiUser;\n};\n\ntype ReactorData = {\n  amount: number;\n  localAmount: number;\n  isMy?: boolean;\n  isAnonymous?: boolean;\n  user?: ApiPeer;\n};\n\nconst MAX_TOP_REACTORS = 3;\nconst DEFAULT_STARS_AMOUNT = 50;\nconst MAX_REACTION_AMOUNT = 2500;\nconst ANONYMOUS_PEER: CustomPeer = {\n  avatarIcon: 'author-hidden',\n  customPeerAvatarColor: '#9eaab5',\n  isCustomPeer: true,\n  titleKey: 'StarsReactionAnonymous',\n};\n\nconst PaidReactionModal = ({\n  modal,\n  chat,\n  message,\n  maxAmount,\n  starBalance,\n  defaultPrivacy,\n  sendPaidReactionsAsPeerIds,\n  currentUserId,\n  currentUser,\n}: OwnProps & StateProps) => {\n  const { closePaidReactionModal, addLocalPaidReaction, loadSendPaidReactionsAs } = getActions();\n\n  const [starsAmount, setStarsAmount] = useState(DEFAULT_STARS_AMOUNT);\n  const [isTouched, markTouched, unmarkTouched] = useFlag();\n  const [shouldSendAsAnonymous, setShouldSendAsAnonymous] = useState(true);\n  const [sendAsPeerId, setSendAsPeerId] = useState(currentUserId);\n\n  const chatId = chat?.id;\n\n  const senderPeer = sendAsPeerId ? (selectPeer(getGlobal(), sendAsPeerId)) : currentUser;\n\n  const oldLang = useOldLang();\n  const { isMobile } = useAppLayout();\n  const lang = useLang();\n\n  const handleShowInTopSendersChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setShouldSendAsAnonymous(!e.target.checked);\n  });\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setStarsAmount(value);\n    markTouched();\n  });\n\n  useEffect(() => {\n    if (chatId && !sendPaidReactionsAsPeerIds) {\n      loadSendPaidReactionsAs({ chatId });\n    }\n  }, [chatId, sendPaidReactionsAsPeerIds]);\n\n  const filteredMyReactorIds = useMemo(() => {\n    const result = sendPaidReactionsAsPeerIds?.map((peer) => peer.id)\n      .filter((id) => id !== chatId);\n    result?.unshift(currentUserId);\n    return result;\n  }, [sendPaidReactionsAsPeerIds, chatId, currentUserId]);\n\n  const canChangeSendAsPeer = filteredMyReactorIds && filteredMyReactorIds.length > 1;\n\n  useEffect(() => {\n    if (!modal) {\n      unmarkTouched();\n    }\n  }, [modal]);\n\n  useEffect(() => {\n    const currentReactor = message?.reactions?.topReactors?.find((reactor) => reactor.isMy);\n    if (currentReactor) {\n      setShouldSendAsAnonymous(Boolean(currentReactor.isAnonymous));\n      if (currentReactor.peerId) {\n        setSendAsPeerId(currentReactor.peerId);\n      }\n      return;\n    }\n\n    setShouldSendAsAnonymous(defaultPrivacy?.type === 'anonymous' || false);\n    if (defaultPrivacy?.type === 'peer' && filteredMyReactorIds?.includes(defaultPrivacy.peerId)) {\n      setSendAsPeerId(defaultPrivacy.peerId);\n      return;\n    }\n\n    setSendAsPeerId(currentUserId);\n  }, [defaultPrivacy, message?.reactions?.topReactors, filteredMyReactorIds, currentUserId]);\n\n  const handleSend = useLastCallback(() => {\n    if (!modal) return;\n\n    addLocalPaidReaction({\n      chatId: modal.chatId,\n      messageId: modal.messageId,\n      count: starsAmount,\n      isPrivate: shouldSendAsAnonymous,\n      peerId: shouldSendAsAnonymous || sendAsPeerId === currentUserId ? undefined : sendAsPeerId,\n      shouldIgnoreDefaultPrivacy: true,\n    });\n    closePaidReactionModal();\n  });\n\n  const handleSendAsPeerChange = useLastCallback((peerId: string) => {\n    setShouldSendAsAnonymous(false);\n    setSendAsPeerId(peerId);\n  });\n\n  const renderMenuItem = useLastCallback((peerId: string) => {\n    const peer = selectPeer(getGlobal(), peerId);\n    const isSelected = sendAsPeerId === peerId && !shouldSendAsAnonymous;\n    if (!peer) return undefined;\n\n    return (\n      <MenuItem\n\n        onClick={() => handleSendAsPeerChange(peerId)}\n      >\n        <Avatar\n          size=\"small\"\n          peer={peer}\n        />\n        <div className={buildClassName(styles.itemInfo)}>\n          <FullNameTitle className={styles.itemTitle} peer={peer} noFake noVerified />\n          <span className={styles.itemSubtitle}>\n            {isApiPeerUser(peer) ? lang('PeerPersonalAccount') : lang('PeerChannel')}\n          </span>\n        </div>\n        <Icon\n          className={styles.itemIcon}\n          name={isSelected ? 'check' : 'placeholder'}\n        />\n      </MenuItem>\n    );\n  });\n\n  const SendAsPeerMenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen }) => (\n      <Button\n        ripple={!isMobile}\n        size=\"smaller\"\n        color=\"translucent\"\n        className={buildClassName(styles.sendAsPeerMenuButton, isOpen ? 'active' : '')}\n        onClick={onTrigger}\n        ariaLabel={lang('AccDescrOpenMenu2')}\n      >\n        <Avatar\n          className={styles.sendAsPeerButtonAvatar}\n          size=\"mini\"\n          peer={shouldSendAsAnonymous ? ANONYMOUS_PEER : senderPeer}\n        />\n        <Icon\n          name=\"down\"\n          className={styles.buttonDownIcon}\n        />\n      </Button>\n    );\n  }, [isMobile, lang, senderPeer, shouldSendAsAnonymous]);\n\n  const sendAsPeersMenu = useMemo(() => {\n    if (!canChangeSendAsPeer) return undefined;\n    return (\n      <DropdownMenu\n        className={buildClassName(styles.sendAsPeerMenu, 'with-menu-transitions')}\n        bubbleClassName={styles.sendAsPeerMenuBubble}\n        trigger={SendAsPeerMenuButton}\n        positionX=\"right\"\n        autoClose\n      >\n        {filteredMyReactorIds.map((id) => (\n          renderMenuItem(id)\n        ))}\n      </DropdownMenu>\n    );\n  }, [SendAsPeerMenuButton, filteredMyReactorIds, canChangeSendAsPeer]);\n\n  const topReactors = useMemo(() => {\n    const global = getGlobal();\n    const all = message?.reactions?.topReactors;\n    if (!all) {\n      return undefined;\n    }\n\n    const result: ReactorData[] = [];\n    let hasCurrentSender = false;\n    let myReactorAmount = 0;\n\n    all.forEach((reactor) => {\n      const peer = reactor.peerId ? selectPeer(global, reactor.peerId) : undefined;\n      if (!peer && !reactor.isAnonymous && !reactor.isMy) return;\n      if (reactor.isMy) {\n        myReactorAmount = reactor.count;\n      }\n\n      if (reactor.isMy && (reactor.peerId !== sendAsPeerId || (reactor.isAnonymous && !shouldSendAsAnonymous))) return;\n\n      const isCurrentReactor = sendAsPeerId === reactor.peerId || (shouldSendAsAnonymous && reactor.isAnonymous);\n\n      if (isCurrentReactor) {\n        hasCurrentSender = true;\n      }\n\n      result.push({\n        amount: reactor.count,\n        localAmount: isCurrentReactor && isTouched ? starsAmount : 0,\n        isMy: reactor.isMy,\n        isAnonymous: reactor.isAnonymous,\n        user: peer,\n      });\n    });\n\n    if (!hasCurrentSender) {\n      const sender = selectPeer(global, sendAsPeerId);\n      result.push({\n        amount: myReactorAmount,\n        localAmount: isTouched ? starsAmount : 0,\n        isMy: true,\n        user: sender,\n      });\n    }\n\n    result.sort((a, b) => (b.amount + b.localAmount) - (a.amount + a.localAmount));\n\n    return result.slice(0, MAX_TOP_REACTORS);\n  }, [isTouched, message?.reactions?.topReactors, starsAmount, sendAsPeerId, shouldSendAsAnonymous]);\n\n  const chatTitle = chat && getPeerTitle(oldLang, chat);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      onClose={closePaidReactionModal}\n      isSlim\n      hasAbsoluteCloseButton\n      contentClassName={styles.content}\n      isLowStackPriority\n    >\n      <div className={styles.sendAsPeersMenuContainer}>\n        {sendAsPeersMenu}\n      </div>\n      <div className={styles.headerControlPanel}>\n        <BalanceBlock balance={starBalance} className={styles.modalBalance} withAddButton />\n      </div>\n\n      <StarSlider\n        className={styles.slider}\n        defaultValue={DEFAULT_STARS_AMOUNT}\n        maxValue={maxAmount}\n        onChange={handleAmountChange}\n      />\n      <h3 className={styles.title}>{oldLang('StarsReactionTitle')}</h3>\n      <div className={styles.description}>\n        {renderText(oldLang('StarsReactionText', chatTitle), ['simple_markdown', 'emoji'])}\n      </div>\n      <Separator>\n        {topReactors && <div className={styles.topLabel}>{oldLang('StarsReactionTopSenders')}</div>}\n      </Separator>\n      {topReactors && (\n        <div className={styles.top}>\n          {topReactors.map((reactor) => {\n            const countText = formatInteger(reactor.amount + reactor.localAmount);\n            const peer = (reactor.isAnonymous || !reactor.user || (reactor.isMy && shouldSendAsAnonymous))\n              ? ANONYMOUS_PEER : reactor.user;\n            const text = 'isCustomPeer' in peer ? oldLang(peer.titleKey)\n              : peer && getPeerTitle(oldLang, peer);\n            return (\n              <PeerBadge\n                className={styles.topPeer}\n                key={`${reactor.user?.id || 'anonymous'}-${countText}`}\n                peer={peer}\n                badgeText={countText}\n                badgeIcon=\"star\"\n                badgeClassName={styles.topBadge}\n                text={text}\n              />\n            );\n          })}\n        </div>\n      )}\n      {topReactors && (<Separator className={styles.separator} />)}\n      <Checkbox\n        className={buildClassName(styles.checkBox, 'dialog-checkbox')}\n        checked={!shouldSendAsAnonymous}\n        onChange={handleShowInTopSendersChange}\n        label={oldLang('StarsReactionShowMeInTopSenders')}\n      />\n      <Button\n        size=\"smaller\"\n        onClick={handleSend}\n      >\n        {lang('SendPaidReaction', { amount: starsAmount }, {\n          withNodes: true,\n          specialReplacement: {\n            [STARS_ICON_PLACEHOLDER]: <Icon className={styles.buttonStar} name=\"star\" />,\n          },\n        })}\n      </Button>\n      <p className={styles.disclaimer}>\n        {lang('StarsReactionTerms', {\n          link: <SafeLink text={lang('StarsReactionLinkText')} url={lang('StarsReactionLink')} />,\n        }, {\n          withNodes: true,\n        })}\n      </p>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const chat = modal && selectChat(global, modal.chatId);\n    const message = modal && selectChatMessage(global, modal.chatId, modal.messageId);\n    const starBalance = global.stars?.balance;\n    const maxAmount = global.appConfig?.paidReactionMaxAmount || MAX_REACTION_AMOUNT;\n    const defaultPrivacy = global.settings.paidReactionPrivacy;\n    const sendPaidReactionsAsPeerIds = chat?.sendPaidReactionsAsPeerIds;\n    const currentUserId = global.currentUserId!;\n    const currentUser = selectUser(global, currentUserId)!;\n\n    return {\n      chat,\n      message,\n      starBalance,\n      maxAmount,\n      defaultPrivacy,\n      sendPaidReactionsAsPeerIds,\n      currentUserId,\n      currentUser,\n    };\n  },\n)(PaidReactionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarSlider-module__root\",\"slider\":\"StarSlider-module__slider\",\"sparkles\":\"StarSlider-module__sparkles\",\"progress\":\"StarSlider-module__progress\",\"floatingBadgeWrapper\":\"StarSlider-module__floatingBadgeWrapper\",\"floatingBadge\":\"StarSlider-module__floatingBadge\",\"floatingBadgeText\":\"StarSlider-module__floatingBadgeText\",\"floatingBadgeTriangle\":\"StarSlider-module__floatingBadgeTriangle\"};","import type React from '../../../lib/teact/teact';\nimport {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\n\nimport { requestMeasure, requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\n\nimport useEffectOnce from '../../../hooks/useEffectOnce';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useResizeObserver from '../../../hooks/useResizeObserver';\n\nimport AnimatedCounter from '../../common/AnimatedCounter';\nimport Icon from '../../common/icons/Icon';\nimport Sparkles from '../../common/Sparkles';\n\nimport styles from './StarSlider.module.scss';\n\ntype OwnProps = {\n  maxValue: number;\n  defaultValue: number;\n  className?: string;\n  onChange: (value: number) => void;\n};\n\nconst DEFAULT_POINTS = [50, 100, 500, 1000, 2000, 5000, 10000];\n\nconst StarSlider = ({\n  maxValue,\n  defaultValue,\n  className,\n  onChange,\n}: OwnProps) => {\n  const floatingBadgeRef = useRef<HTMLDivElement>();\n\n  const points = useMemo(() => {\n    const result = [];\n    for (let i = 0; i < DEFAULT_POINTS.length; i++) {\n      if (DEFAULT_POINTS[i] < maxValue) {\n        result.push(DEFAULT_POINTS[i]);\n      }\n\n      if (DEFAULT_POINTS[i] >= maxValue) {\n        result.push(maxValue);\n        break;\n      }\n    }\n\n    return result;\n  }, [maxValue]);\n\n  const [value, setValue] = useState(0);\n\n  useEffectOnce(() => {\n    setValue(getProgress(points, defaultValue));\n  });\n\n  const updateSafeBadgePosition = useLastCallback(() => {\n    const badge = floatingBadgeRef.current;\n    if (!badge) return;\n    const parent = badge.parentElement!;\n\n    requestMeasure(() => {\n      const safeMinX = parent.offsetLeft + badge.offsetWidth / 2;\n      const safeMaxX = parent.offsetLeft + parent.offsetWidth - badge.offsetWidth / 2;\n\n      requestMutation(() => {\n        parent.style.setProperty('--_min-x', `${safeMinX}px`);\n        parent.style.setProperty('--_max-x', `${safeMaxX}px`);\n      });\n    });\n  });\n\n  useResizeObserver(floatingBadgeRef, updateSafeBadgePosition);\n\n  const handleChange = useLastCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = Number(event.currentTarget.value);\n    setValue(newValue);\n\n    onChange(getValue(points, newValue));\n  });\n\n  return (\n    <div className={buildClassName(styles.root, className)} style={`--progress: ${value / points.length}`}>\n      <div className={styles.floatingBadgeWrapper}>\n        <div className={styles.floatingBadge} ref={floatingBadgeRef}>\n          <div className={styles.floatingBadgeText}>\n            <Icon name=\"star\" className={styles.floatingBadgeIcon} />\n            <AnimatedCounter text={formatInteger(getValue(points, value))} />\n          </div>\n          <svg className={styles.floatingBadgeTriangle} width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" fill=\"none\">\n            <defs>\n              <linearGradient id=\"StarBadgeTriangle\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n                <stop offset=\"-50%\" stop-color=\"#FFAA00\" />\n                <stop offset=\"150%\" stop-color=\"#FFCD3A\" />\n              </linearGradient>\n            </defs>\n            <path d=\"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z\" fill=\"url(#StarBadgeTriangle)\" />\n          </svg>\n        </div>\n      </div>\n      <div className={styles.progress}>\n        <Sparkles preset=\"progress\" className={styles.sparkles} />\n      </div>\n      <input\n        className={styles.slider}\n        type=\"range\"\n        min={0}\n        max={points.length}\n        defaultValue={getProgress(points, defaultValue)}\n        step=\"any\"\n        onChange={handleChange}\n      />\n    </div>\n  );\n};\n\nfunction getProgress(points: number[], value: number) {\n  const pointIndex = points.findIndex((point) => value <= point);\n  const prevPoint = points[pointIndex - 1] || 1;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const progress = (value - prevPoint) / (nextPoint - prevPoint);\n  return pointIndex + progress;\n}\n\nfunction getValue(points: number[], progress: number) {\n  const pointIndex = Math.floor(progress);\n  const prevPoint = points[pointIndex - 1] || 1;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const value = prevPoint + (nextPoint - prevPoint) * (progress - pointIndex);\n  return Math.round(value);\n}\n\nexport default memo(StarSlider);\n","import { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiStarsAmount } from '../../../api/types';\n\nimport { formatStarsAmount } from '../../../global/helpers/payments';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport BadgeButton from '../../common/BadgeButton';\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarsBalanceModal.module.scss';\n\ntype OwnProps = {\n  balance?: ApiStarsAmount;\n  withAddButton?: boolean;\n  className?: string;\n};\n\nconst BalanceBlock = ({ balance, className, withAddButton }: OwnProps) => {\n  const lang = useLang();\n\n  const {\n    openStarsBalanceModal,\n  } = getActions();\n\n  return (\n    <div className={buildClassName(styles.balanceBlock, className)}>\n      <div className={styles.balanceInfo}>\n        <span className={styles.smallerText}>{lang('StarsBalance')}</span>\n        <div className={styles.balanceBottom}>\n          <StarIcon type=\"gold\" size=\"middle\" />\n          {balance !== undefined ? formatStarsAmount(lang, balance) : ''}\n          {withAddButton && (\n            <BadgeButton\n              className={styles.addStarsButton}\n\n              onClick={() => openStarsBalanceModal({})}\n            >\n              <Icon\n                className={styles.addStarsIcon}\n                name=\"add\"\n              />\n            </BadgeButton>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(BalanceBlock);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsBalanceModal-module__root\",\"minimal\":\"StarsBalanceModal-module__minimal\",\"transition\":\"StarsBalanceModal-module__transition\",\"main\":\"StarsBalanceModal-module__main\",\"container\":\"StarsBalanceModal-module__container\",\"section\":\"StarsBalanceModal-module__section\",\"sectionTitle\":\"StarsBalanceModal-module__sectionTitle\",\"tos\":\"StarsBalanceModal-module__tos\",\"logo\":\"StarsBalanceModal-module__logo\",\"logoBackground\":\"StarsBalanceModal-module__logoBackground\",\"headerHext\":\"StarsBalanceModal-module__headerHext\",\"description\":\"StarsBalanceModal-module__description\",\"header\":\"StarsBalanceModal-module__header\",\"starHeaderText\":\"StarsBalanceModal-module__starHeaderText\",\"botItem\":\"StarsBalanceModal-module__botItem\",\"hiddenHeader\":\"StarsBalanceModal-module__hiddenHeader\",\"closeButton\":\"StarsBalanceModal-module__closeButton\",\"addStarsButton\":\"StarsBalanceModal-module__addStarsButton\",\"addStarsIcon\":\"StarsBalanceModal-module__addStarsIcon\",\"balanceBlock\":\"StarsBalanceModal-module__balanceBlock\",\"balanceInfo\":\"StarsBalanceModal-module__balanceInfo\",\"smallerText\":\"StarsBalanceModal-module__smallerText\",\"balanceBottom\":\"StarsBalanceModal-module__balanceBottom\",\"modalBalance\":\"StarsBalanceModal-module__modalBalance\",\"starButton\":\"StarsBalanceModal-module__starButton\",\"paymentContent\":\"StarsBalanceModal-module__paymentContent\",\"paymentImages\":\"StarsBalanceModal-module__paymentImages\",\"paymentPhoto\":\"StarsBalanceModal-module__paymentPhoto\",\"avatarStar\":\"StarsBalanceModal-module__avatarStar\",\"paymentImageBackground\":\"StarsBalanceModal-module__paymentImageBackground\",\"paymentButton\":\"StarsBalanceModal-module__paymentButton\",\"paymentButtonStar\":\"StarsBalanceModal-module__paymentButtonStar\",\"transactions\":\"StarsBalanceModal-module__transactions\",\"subscriptions\":\"StarsBalanceModal-module__subscriptions\",\"tabs\":\"StarsBalanceModal-module__tabs\",\"disclaimer\":\"StarsBalanceModal-module__disclaimer\",\"amountBadge\":\"StarsBalanceModal-module__amountBadge\",\"loadMore\":\"StarsBalanceModal-module__loadMore\",\"loadMoreIcon\":\"StarsBalanceModal-module__loadMoreIcon\"};","import type React from '../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiStarTopupOption } from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\nimport type { RegularLangKey } from '../../../types/language';\n\nimport { PAID_MESSAGES_PURPOSE } from '../../../config';\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle } from '../../../global/helpers/peers';\nimport { selectChat, selectIsPremiumPurchaseBlocked, selectUser } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport TabList, { type TabWithProperties } from '../../ui/TabList';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from './BalanceBlock';\nimport StarTopupOptionList from './StarTopupOptionList';\nimport StarsSubscriptionItem from './subscription/StarsSubscriptionItem';\nimport StarsTransactionItem from './transaction/StarsTransactionItem';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarLogo from '../../../assets/icons/StarLogo.svg';\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nconst TRANSACTION_TYPES = ['all', 'inbound', 'outbound'] as const;\nconst TRANSACTION_TABS_KEYS: RegularLangKey[] = [\n  'StarsTransactionsAll',\n  'StarsTransactionsIncoming',\n  'StarsTransactionsOutgoing',\n];\nconst TRANSACTION_ITEM_CLASS = 'StarsTransactionItem';\nconst SUBSCRIPTION_PURPOSE = 'subs';\n\nexport type OwnProps = {\n  modal: TabState['starsBalanceModal'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  canBuyPremium?: boolean;\n  shouldForceHeight?: boolean;\n};\n\nconst StarsBalanceModal = ({\n  modal, starsBalanceState, canBuyPremium, shouldForceHeight,\n}: OwnProps & StateProps) => {\n  const {\n    closeStarsBalanceModal, loadStarsTransactions, loadStarsSubscriptions, openStarsGiftingPickerModal, openInvoice,\n  } = getActions();\n\n  const { balance, history, subscriptions } = starsBalanceState || {};\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [selectedTabIndex, setSelectedTabIndex] = useState(0);\n  const [areBuyOptionsShown, showBuyOptions, hideBuyOptions] = useFlag();\n\n  const isOpen = Boolean(modal && starsBalanceState);\n\n  const {\n    originStarsPayment, originReaction, originGift, topup,\n  } = modal || {};\n\n  const shouldOpenOnBuy = originStarsPayment || originReaction || originGift || topup;\n\n  const ongoingTransactionAmount = originStarsPayment?.form?.invoice?.totalAmount\n    || originStarsPayment?.subscriptionInfo?.subscriptionPricing?.amount\n    || originReaction?.amount\n    || originGift?.gift.stars\n    || topup?.balanceNeeded;\n  const starsNeeded = ongoingTransactionAmount ? ongoingTransactionAmount - (balance?.amount || 0) : undefined;\n  const starsNeededText = useMemo(() => {\n    const global = getGlobal();\n\n    if (originReaction) {\n      const channel = selectChat(global, originReaction.chatId);\n      if (!channel) return undefined;\n      return oldLang('StarsNeededTextReactions', getChatTitle(oldLang, channel));\n    }\n\n    if (originStarsPayment) {\n      const bot = originStarsPayment.form?.botId ? selectUser(global, originStarsPayment.form.botId) : undefined;\n      if (!bot) return undefined;\n      return oldLang('StarsNeededText', getUserFullName(bot));\n    }\n\n    if (originGift) {\n      const peer = selectUser(global, originGift.peerId);\n      if (!peer) return undefined;\n      return oldLang('StarsNeededTextGift', getPeerTitle(lang, peer));\n    }\n\n    if (topup?.purpose === SUBSCRIPTION_PURPOSE) {\n      return oldLang('StarsNeededTextLink');\n    }\n\n    if (topup?.purpose === PAID_MESSAGES_PURPOSE) {\n      return lang('StarsNeededTextSendPaidMessages', undefined, {\n        withMarkdown: true,\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [originReaction, originStarsPayment, originGift, topup?.purpose, lang, oldLang]);\n\n  const shouldShowItems = Boolean(history?.all?.transactions.length && !shouldOpenOnBuy);\n  const shouldSuggestGifting = !shouldOpenOnBuy;\n\n  const transactionTabs: TabWithProperties[] = useMemo(() => {\n    return TRANSACTION_TABS_KEYS.map((key) => ({\n      title: lang(key),\n    }));\n  }, [lang]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n      setSelectedTabIndex(0);\n      hideBuyOptions();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (shouldOpenOnBuy) {\n      showBuyOptions();\n      return;\n    }\n\n    hideBuyOptions();\n  }, [shouldOpenOnBuy]);\n\n  const tosText = useMemo(() => {\n    if (!isOpen) return undefined;\n\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />,\n      parts[1],\n    ];\n  }, [isOpen, oldLang]);\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleLoadMoreTransactions = useLastCallback(() => {\n    loadStarsTransactions({\n      type: TRANSACTION_TYPES[selectedTabIndex],\n    });\n  });\n\n  const handleLoadMoreSubscriptions = useLastCallback(() => {\n    loadStarsSubscriptions();\n  });\n\n  const openStarsGiftingPickerModalHandler = useLastCallback(() => {\n    openStarsGiftingPickerModal({});\n  });\n\n  const handleBuyStars = useLastCallback((option: ApiStarTopupOption) => {\n    openInvoice({\n      type: 'stars',\n      stars: option.stars,\n      currency: option.currency,\n      amount: option.amount,\n    });\n  });\n\n  return (\n    <Modal\n      className={buildClassName(styles.root, !shouldForceHeight && !areBuyOptionsShown && styles.minimal)}\n      isOpen={isOpen}\n      onClose={closeStarsBalanceModal}\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n\n          onClick={() => closeStarsBalanceModal()}\n          ariaLabel={lang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <BalanceBlock balance={balance} className={styles.modalBalance} />\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {oldLang('TelegramStars')}\n          </h2>\n        </div>\n        <div className={styles.section}>\n          <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n          <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n          <h2 className={styles.headerText}>\n            {starsNeeded ? oldLang('StarsNeededTitle', ongoingTransactionAmount) : oldLang('TelegramStars')}\n          </h2>\n          <div className={styles.description}>\n            {renderText(\n              starsNeededText || oldLang('TelegramStarsInfo'),\n              ['simple_markdown', 'emoji'],\n            )}\n          </div>\n          {canBuyPremium && !areBuyOptionsShown && (\n            <Button\n              className={styles.starButton}\n              onClick={showBuyOptions}\n            >\n              {oldLang('Star.List.BuyMoreStars')}\n            </Button>\n          )}\n          {canBuyPremium && !areBuyOptionsShown && shouldSuggestGifting && (\n            <Button\n              isText\n              noForcedUpperCase\n              className={styles.starButton}\n              onClick={openStarsGiftingPickerModalHandler}\n            >\n              {oldLang('TelegramStarsGift')}\n            </Button>\n          )}\n          {areBuyOptionsShown && starsBalanceState?.topupOptions && (\n            <StarTopupOptionList\n              starsNeeded={starsNeeded}\n              options={starsBalanceState.topupOptions}\n              onClick={handleBuyStars}\n            />\n          )}\n        </div>\n        {areBuyOptionsShown && (\n          <div className={styles.tos}>\n            {tosText}\n          </div>\n        )}\n        {shouldShowItems && Boolean(subscriptions?.list.length) && (\n          <div className={styles.section}>\n            <h3 className={styles.sectionTitle}>{oldLang('StarMySubscriptions')}</h3>\n            <div className={styles.subscriptions}>\n              {subscriptions?.list.map((subscription) => (\n                <StarsSubscriptionItem\n                  key={subscription.id}\n                  subscription={subscription}\n                />\n              ))}\n              {subscriptions?.nextOffset && (\n                <Button\n                  isText\n                  disabled={subscriptions.isLoading}\n                  size=\"smaller\"\n                  noForcedUpperCase\n                  className={styles.loadMore}\n                  onClick={handleLoadMoreSubscriptions}\n                >\n                  <Icon name=\"down\" className={styles.loadMoreIcon} />\n                  {oldLang('StarMySubscriptionsExpand')}\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n        {shouldShowItems && (\n          <div className={styles.container}>\n            <div className={styles.section}>\n              <Transition\n                name={lang.isRtl ? 'slideOptimizedRtl' : 'slideOptimized'}\n                activeKey={selectedTabIndex}\n                renderCount={TRANSACTION_TABS_KEYS.length}\n                shouldRestoreHeight\n                className={styles.transition}\n              >\n                <InfiniteScroll\n                  onLoadMore={handleLoadMoreTransactions}\n                  items={history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions}\n                  scrollContainerClosest={`.${styles.main}`}\n                  itemSelector={`.${TRANSACTION_ITEM_CLASS}`}\n                  className={styles.transactions}\n                  noFastList\n                  noScrollRestoreOnTop\n                >\n                  {history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions.map((transaction) => (\n                    <StarsTransactionItem\n                      key={`${transaction.id}-${transaction.isRefund}`}\n                      transaction={transaction}\n                      className={TRANSACTION_ITEM_CLASS}\n                    />\n                  ))}\n                </InfiniteScroll>\n              </Transition>\n            </div>\n            <TabList\n              className={styles.tabs}\n              tabClassName={styles.tab}\n              activeTab={selectedTabIndex}\n              tabs={transactionTabs}\n              onSwitchTab={setSelectedTabIndex}\n            />\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const shouldForceHeight = Boolean(global.stars?.history?.all?.transactions.length);\n\n    return {\n      shouldForceHeight,\n      starsBalanceState: global.stars,\n      canBuyPremium: !selectIsPremiumPurchaseBlocked(global),\n    };\n  },\n)(StarsBalanceModal));\n","import { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMediaExtendedPreview, ApiMessage, ApiUser,\n} from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getChatTitle, getCustomPeerFromInvite, getUserFullName } from '../../../global/helpers';\nimport {\n  selectChat, selectChatMessage, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport Avatar from '../../common/Avatar';\nimport StarIcon from '../../common/icons/StarIcon';\nimport PeerBadge from '../../common/PeerBadge';\nimport PeerChip from '../../common/PeerChip';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport BalanceBlock from './BalanceBlock';\nimport PaidMediaThumb from './transaction/PaidMediaThumb';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsPayment'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  bot?: ApiUser;\n  paidMediaMessage?: ApiMessage;\n  paidMediaChat?: ApiChat;\n};\n\nconst StarPaymentModal = ({\n  modal,\n  bot,\n  starsBalanceState,\n  paidMediaMessage,\n  paidMediaChat,\n}: OwnProps & StateProps) => {\n  const { closeStarsPaymentModal, openStarsBalanceModal, sendStarPaymentForm } = getActions();\n  const [isLoading, markLoading, unmarkLoading] = useFlag();\n  const isOpen = Boolean(modal?.inputInvoice && starsBalanceState);\n\n  const prevModal = usePrevious(modal);\n  const renderingModal = modal || prevModal;\n\n  const { form, subscriptionInfo } = renderingModal || {};\n  const amount = form?.invoice?.totalAmount || subscriptionInfo?.subscriptionPricing?.amount;\n  const isBotSubscription = Boolean(form?.invoice.subscriptionPeriod);\n  const canShowPeerItem = !subscriptionInfo?.subscriptionPricing;\n\n  const photo = form?.photo;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkLoading();\n    }\n  }, [isOpen]);\n\n  const descriptionText = useMemo(() => {\n    if (!renderingModal?.inputInvoice) {\n      return '';\n    }\n\n    const botName = getUserFullName(bot);\n    const starsText = oldLang('Stars.Intro.PurchasedText.Stars', amount);\n\n    if (paidMediaMessage) {\n      const extendedMedia = paidMediaMessage.content.paidMedia!.extendedMedia as ApiMediaExtendedPreview[];\n      const areAllPhotos = extendedMedia.every((media) => !media.duration);\n      const areAllVideos = extendedMedia.every((media) => Boolean(media.duration));\n\n      const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', extendedMedia.length)\n        : areAllVideos ? oldLang('Stars.Transfer.Videos', extendedMedia.length)\n          : oldLang('Media', extendedMedia.length);\n\n      const channelTitle = getChatTitle(oldLang, paidMediaChat!);\n      return oldLang('Stars.Transfer.UnlockInfo', [mediaText, channelTitle, starsText]);\n    }\n\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeText', {\n        chat: subscriptionInfo.title,\n        amount,\n      }, {\n        withNodes: true,\n        withMarkdown: true,\n        pluralValue: amount!,\n      });\n    }\n\n    if (isBotSubscription) {\n      return lang('StarsSubscribeBotText', {\n        name: form.title,\n        amount,\n        bot: botName,\n      }, {\n        pluralValue: amount!,\n      });\n    }\n\n    return oldLang('Stars.Transfer.Info', [form!.title, botName, starsText]);\n  }, [\n    renderingModal?.inputInvoice, bot, oldLang, amount, paidMediaMessage, subscriptionInfo, isBotSubscription, form,\n    paidMediaChat, lang,\n  ]);\n\n  const disclaimerText = useMemo(() => {\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeInfo', {\n        link: <SafeLink url={lang('StarsSubscribeInfoLink')} text={lang('StarsSubscribeInfoLinkText')} />,\n      }, {\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [subscriptionInfo, lang]);\n\n  const inviteCustomPeer = useMemo(() => {\n    if (!subscriptionInfo) {\n      return undefined;\n    }\n\n    return getCustomPeerFromInvite(subscriptionInfo);\n  }, [subscriptionInfo]);\n\n  const handlePayment = useLastCallback(() => {\n    const balance = starsBalanceState?.balance;\n    if (amount === undefined || balance === undefined) {\n      return;\n    }\n\n    if (amount > balance.amount) {\n      openStarsBalanceModal({\n        originStarsPayment: modal,\n      });\n      return;\n    }\n\n    sendStarPaymentForm({});\n    markLoading();\n  });\n\n  return (\n    <Modal\n      contentClassName={styles.paymentContent}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      onClose={closeStarsPaymentModal}\n    >\n      <BalanceBlock balance={starsBalanceState?.balance} className={styles.modalBalance} />\n      <div className={styles.paymentImages} dir={oldLang.isRtl ? 'ltr' : 'rtl'}>\n        {paidMediaMessage ? (\n          <PaidMediaThumb media={paidMediaMessage.content.paidMedia!.extendedMedia} />\n        ) : inviteCustomPeer ? (\n          <>\n            <Avatar className={styles.paymentPhoto} peer={inviteCustomPeer} size=\"giant\" />\n            <StarIcon type=\"gold\" size=\"adaptive\" className={styles.avatarStar} />\n          </>\n        ) : (\n          <PeerBadge\n            peer={!photo ? bot : undefined}\n            avatarWebPhoto={photo}\n            avatarSize=\"giant\"\n            badgeIcon=\"star\"\n            badgeText={formatInteger(amount!)}\n            badgeClassName={styles.amountBadge}\n            className={styles.paymentPhoto}\n          />\n        )}\n        <img className={styles.paymentImageBackground} src={StarsBackground} alt=\"\" draggable={false} />\n      </div>\n      <h2 className={styles.headerText}>\n        {inviteCustomPeer ? oldLang('StarsSubscribeTitle') : oldLang('StarsConfirmPurchaseTitle')}\n      </h2>\n      {canShowPeerItem && <PeerChip className={styles.botItem} peerId={form?.botId} />}\n      <div className={styles.description}>\n        {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n      </div>\n      <Button className={styles.paymentButton} size=\"smaller\" onClick={handlePayment} isLoading={isLoading}>\n        {lang(isBotSubscription ? 'StarsSubscribeBotButtonMonth' : 'StarsPay', {\n          amount: formatStarsAsIcon(lang, amount!, { asFont: true }),\n        }, {\n          withNodes: true,\n        })}\n      </Button>\n      {Boolean(disclaimerText) && (\n        <div className={buildClassName(styles.disclaimer, styles.smallerText)}>\n          {disclaimerText}\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const bot = modal?.form?.botId ? selectUser(global, modal.form.botId) : undefined;\n\n    const messageInputInvoice = modal?.inputInvoice?.type === 'message' ? modal.inputInvoice : undefined;\n    const message = messageInputInvoice\n      ? selectChatMessage(global, messageInputInvoice.chatId, messageInputInvoice.messageId) : undefined;\n    const chat = messageInputInvoice ? selectChat(global, messageInputInvoice.chatId) : undefined;\n    const isPaidMedia = message?.content.paidMedia;\n\n    return {\n      bot,\n      starsBalanceState: global.stars,\n      paidMediaMessage: isPaidMedia ? message : undefined,\n      paidMediaChat: isPaidMedia ? chat : undefined,\n    };\n  },\n)(StarPaymentModal));\n","import { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiUser } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectUser } from '../../../../global/selectors';\nimport { formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Checkbox from '../../../ui/Checkbox';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['chatRefundModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst ChatRefundModal = ({ modal, user }: OwnProps & StateProps) => {\n  const { closeChatRefundModal, addNoPaidMessagesException } = getActions();\n\n  const [shouldRefundStars, setShouldRefundStars] = useState(false);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingUser = useCurrentOrPrev(user);\n\n  const { starsToRefund, userId } = renderingModal || {};\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n\n  const handleConfirmRemoveFee = useLastCallback(() => {\n    closeChatRefundModal();\n    if (!userId) return;\n    addNoPaidMessagesException({ userId, shouldRefundCharged: shouldRefundStars });\n  });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      onClose={closeChatRefundModal}\n      title={lang('RemoveFeeTitle')}\n      confirmLabel={lang('ConfirmRemoveMessageFee')}\n      confirmHandler={handleConfirmRemoveFee}\n    >\n      {lang('ConfirmDialogMessageRemoveFee', {\n        peer: renderingUser && getPeerTitle(lang, renderingUser),\n      }, {\n        withMarkdown: true,\n        withNodes: true,\n      })}\n      {\n        Boolean(starsToRefund) && (\n          <Checkbox\n            className=\"dialog-checkbox\"\n            label={lang('ConfirmDialogRemoveFeeRefundStars', {\n              amount: formatStarsAsText(lang, starsToRefund),\n            }, {\n              withMarkdown: true,\n              withNodes: true,\n            })}\n            checked={shouldRefundStars}\n            onCheck={setShouldRefundStars}\n          />\n        )\n      }\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const user = modal?.userId ? selectUser(global, modal.userId) : undefined;\n\n  return {\n    user,\n  };\n})(ChatRefundModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"StarsGiftModal-module__modalDialog\",\"content\":\"StarsGiftModal-module__content\",\"main\":\"StarsGiftModal-module__main\",\"headerInfo\":\"StarsGiftModal-module__headerInfo\",\"logo\":\"StarsGiftModal-module__logo\",\"logoBackground\":\"StarsGiftModal-module__logoBackground\",\"description\":\"StarsGiftModal-module__description\",\"section\":\"StarsGiftModal-module__section\",\"header\":\"StarsGiftModal-module__header\",\"starHeaderText\":\"StarsGiftModal-module__starHeaderText\",\"hiddenHeader\":\"StarsGiftModal-module__hiddenHeader\",\"closeButton\":\"StarsGiftModal-module__closeButton\",\"avatar\":\"StarsGiftModal-module__avatar\",\"center\":\"StarsGiftModal-module__center\",\"secondaryInfo\":\"StarsGiftModal-module__secondaryInfo\"};","import type { FC } from '../../../../lib/teact/teact';\nimport type React from '../../../../lib/teact/teact';\nimport {\n  memo, useEffect, useMemo, useRef,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiStarTopupOption, ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport {\n  selectUser,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\nimport StarTopupOptionList from '../StarTopupOptionList';\n\nimport styles from './StarsGiftModal.module.scss';\n\nimport StarLogo from '../../../../assets/icons/StarLogo.svg';\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsGiftModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst AVATAR_SIZE = 100;\n\nconst StarsGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  user,\n}) => {\n  const {\n    closeStarsGiftModal, openInvoice, requestConfetti,\n  } = getActions();\n  const dialogRef = useRef<HTMLDivElement>();\n\n  const isOpen = Boolean(modal?.isOpen);\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const oldLang = useOldLang();\n\n  const [selectedOption, setSelectedOption] = useState<ApiStarTopupOption | undefined>();\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n    }\n  }, [isOpen]);\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (renderingModal?.isCompleted) {\n      showConfetti();\n    }\n  }, [renderingModal, showConfetti]);\n\n  const handleClick = useLastCallback((option: ApiStarTopupOption) => {\n    if (!renderingModal) return;\n\n    setSelectedOption(option);\n    if (user) {\n      openInvoice({\n        type: 'starsgift',\n        userId: user.id,\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    } else {\n      openInvoice({\n        type: 'stars',\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    }\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleClose = useLastCallback(() => {\n    closeStarsGiftModal();\n  });\n\n  function renderGiftTitle() {\n    if (renderingModal?.isCompleted) {\n      return user ? renderText(oldLang('Notification.StarsGift.SentYou',\n        formatCurrencyAsString(selectedOption!.amount, selectedOption!.currency, oldLang.code)), ['simple_markdown'])\n        : renderText(oldLang('StarsAcquiredInfo', selectedOption?.stars), ['simple_markdown']);\n    }\n\n    return user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars');\n  }\n\n  const bottomText = useMemo(() => {\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink\n        url={oldLang('StarsTOSLink')}\n        text={oldLang('lng_credits_summary_options_about_link')}\n      />,\n      parts[1],\n    ];\n  }, [oldLang]);\n\n  return (\n    <Modal\n      className={buildClassName(styles.modalDialog)}\n      contentClassName={styles.content}\n      dialogRef={dialogRef}\n      isSlim\n      onClose={handleClose}\n      isOpen={isOpen}\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n\n          onClick={() => closeStarsGiftModal()}\n          ariaLabel={oldLang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars')}\n          </h2>\n        </div>\n        <div className={styles.headerInfo}>\n          {user ? (\n            <>\n              <Avatar\n                size={AVATAR_SIZE}\n                peer={user}\n                className={styles.avatar}\n              />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          ) : (\n            <>\n              <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          )}\n        </div>\n        <h2 className={buildClassName(styles.headerText, styles.center)}>\n          {renderGiftTitle()}\n        </h2>\n        <p className={styles.description}>\n          {user ? renderText(\n            oldLang('ActionGiftStarsSubtitle', getPeerTitle(oldLang, user)), ['simple_markdown'],\n          ) : oldLang('Stars.Purchase.GetStarsInfo')}\n        </p>\n        <div className={styles.section}>\n          <StarTopupOptionList\n            options={renderingModal?.starsGiftOptions}\n            onClick={handleClick}\n          />\n          <div className={styles.secondaryInfo}>\n            {bottomText}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const user = modal?.forUserId ? selectUser(global, modal.forUserId) : undefined;\n\n  return {\n    user,\n  };\n})(StarsGiftModal));\n","import type { ApiStarsAmount, ApiStarsTransaction } from '../../../../api/types';\nimport type { OldLangFn } from '../../../../hooks/useOldLang';\n\nimport { buildStarsTransactionCustomPeer } from '../../../../global/helpers/payments';\nimport {\n  type LangFn,\n} from '../../../../util/localization';\nimport { formatPercent } from '../../../../util/textFormat';\n\nexport function getTransactionTitle(oldLang: OldLangFn, lang: LangFn, transaction: ApiStarsTransaction) {\n  if (transaction.paidMessages) {\n    return lang(\n      'PaidMessageTransaction',\n      { count: transaction.paidMessages },\n      {\n        withNodes: true,\n        pluralValue: transaction.paidMessages,\n      },\n    );\n  }\n\n  if (transaction.isGiftResale) {\n    return isNegativeStarsAmount(transaction.stars)\n      ? lang('StarGiftSaleTransaction')\n      : lang('StarGiftPurchaseTransaction');\n  }\n\n  if (transaction.starRefCommision) {\n    return oldLang('StarTransactionCommission', formatPercent(transaction.starRefCommision));\n  }\n  if (transaction.isGiftUpgrade) return oldLang('Gift2TransactionUpgraded');\n  if (transaction.extendedMedia) return oldLang('StarMediaPurchase');\n  if (transaction.subscriptionPeriod) return transaction.title || oldLang('StarSubscriptionPurchase');\n  if (transaction.isReaction) return oldLang('StarsReactionsSent');\n  if (transaction.giveawayPostId) return oldLang('StarsGiveawayPrizeReceived');\n  if (transaction.isMyGift) return oldLang('StarsGiftSent');\n  if (transaction.isGift) return oldLang('StarsGiftReceived');\n  if (transaction.starGift) {\n    return isNegativeStarsAmount(transaction.stars) ? oldLang('Gift2TransactionSent') : oldLang('Gift2ConvertedTitle');\n  }\n\n  const customPeer = (transaction.peer && transaction.peer.type !== 'peer'\n    && buildStarsTransactionCustomPeer(transaction.peer)) || undefined;\n\n  if (customPeer) return customPeer.title || oldLang(customPeer.titleKey!);\n\n  return transaction.title;\n}\n\nexport function isNegativeStarsAmount(starsAmount: ApiStarsAmount) {\n  if (starsAmount.amount) return starsAmount.amount < 0;\n  return starsAmount.nanos < 0;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsSubscriptionItem-module__root\",\"info\":\"StarsSubscriptionItem-module__info\",\"status\":\"StarsSubscriptionItem-module__status\",\"statusPricing\":\"StarsSubscriptionItem-module__statusPricing\",\"amount\":\"StarsSubscriptionItem-module__amount\",\"title\":\"StarsSubscriptionItem-module__title\",\"description\":\"StarsSubscriptionItem-module__description\",\"subtitle\":\"StarsSubscriptionItem-module__subtitle\",\"statusPeriod\":\"StarsSubscriptionItem-module__statusPeriod\",\"statusEnded\":\"StarsSubscriptionItem-module__statusEnded\",\"preview\":\"StarsSubscriptionItem-module__preview\",\"subscriptionStar\":\"StarsSubscriptionItem-module__subscriptionStar\"};","import { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiStarsSubscription,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatInteger } from '../../../../util/textFormat';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\n\nimport styles from './StarsSubscriptionItem.module.scss';\n\ntype OwnProps = {\n  subscription: ApiStarsSubscription;\n};\n\nfunction selectProvidedPeer(peerId: string) {\n  return (global: GlobalState) => (\n    selectPeer(global, peerId)\n  );\n}\n\nconst StarsSubscriptionItem = ({ subscription }: OwnProps) => {\n  const { openStarsSubscriptionModal } = getActions();\n  const {\n    peerId, pricing, until, isCancelled, title, photo,\n  } = subscription;\n  const lang = useOldLang();\n\n  const peer = useSelector(selectProvidedPeer(peerId))!;\n\n  const handleClick = useLastCallback(() => {\n    openStarsSubscriptionModal({ subscription });\n  });\n\n  if (!peer) {\n    return undefined;\n  }\n\n  const hasExpired = until < Date.now() / 1000;\n  const formattedDate = formatDateToString(until * 1000, lang.code, true, 'long');\n\n  return (\n    <div className={styles.root} onClick={handleClick}>\n      <div className={styles.preview}>\n        <Avatar size=\"medium\" peer={peer} />\n        <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{renderText(getPeerTitle(lang, peer) || '')}</h3>\n        {title && (\n          <p className={styles.subtitle}>\n            {photo && <Avatar webPhoto={photo} size=\"micro\" />}\n            {renderText(title)}\n          </p>\n        )}\n        <p className={styles.description}>\n          {lang(\n            hasExpired ? 'StarsSubscriptionExpired'\n              : isCancelled ? 'StarsSubscriptionExpires' : 'StarsSubscriptionRenews',\n            formattedDate,\n          )}\n        </p>\n      </div>\n      <div className={styles.status}>\n        {(isCancelled || hasExpired) ? (\n          <div className={styles.statusEnded}>\n            {lang(hasExpired ? 'StarsSubscriptionStatusExpired' : 'StarsSubscriptionStatusCancelled')}\n          </div>\n        ) : (\n          <>\n            <div className={styles.statusPricing}>\n              <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n              <span className={styles.amount}>\n                {formatInteger(pricing.amount)}\n              </span>\n            </div>\n            <div className={styles.statusPeriod}>{lang('StarsParticipantSubscriptionPerMonth')}</div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsSubscriptionItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"StarsSubscriptionModal-module__modal\",\"header\":\"StarsSubscriptionModal-module__header\",\"title\":\"StarsSubscriptionModal-module__title\",\"amount\":\"StarsSubscriptionModal-module__amount\",\"footer\":\"StarsSubscriptionModal-module__footer\",\"starsBackground\":\"StarsSubscriptionModal-module__starsBackground\",\"avatarWrapper\":\"StarsSubscriptionModal-module__avatarWrapper\",\"subscriptionStar\":\"StarsSubscriptionModal-module__subscriptionStar\",\"amountStar\":\"StarsSubscriptionModal-module__amountStar\",\"secondary\":\"StarsSubscriptionModal-module__secondary\",\"danger\":\"StarsSubscriptionModal-module__danger\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../../config';\nimport { isApiPeerUser } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './StarsSubscriptionModal.module.scss';\n\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsSubscriptionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n};\n\nconst StarsSubscriptionModal: FC<OwnProps & StateProps> = ({\n  modal, peer,\n}) => {\n  const {\n    closeStarsSubscriptionModal,\n    fulfillStarsSubscription,\n    changeStarsSubscription,\n    checkChatInvite,\n    loadStarStatus,\n    openInvoice,\n  } = getActions();\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const { subscription } = modal || {};\n\n  const buttonState = useMemo(() => {\n    if (!subscription) {\n      return 'hidden';\n    }\n\n    if (subscription.canRefulfill) {\n      return 'refulfill';\n    }\n\n    const isActive = subscription.until > Date.now() / 1000;\n    if (isActive && !subscription.isCancelled) {\n      return 'cancel';\n    }\n\n    if (isActive && subscription.isCancelled) {\n      return 'renew';\n    }\n\n    const canRestart = subscription.chatInviteHash || subscription.invoiceSlug;\n    if (!isActive && canRestart) {\n      return 'restart';\n    }\n\n    return 'ok';\n  }, [subscription]);\n\n  const handleButtonClick = useLastCallback(() => {\n    if (!subscription) {\n      return;\n    }\n\n    switch (buttonState) {\n      case 'refulfill': {\n        fulfillStarsSubscription({ id: subscription.id });\n        break;\n      }\n      case 'restart': {\n        if (subscription.chatInviteHash) {\n          checkChatInvite({ hash: subscription.chatInviteHash });\n        } else if (subscription.invoiceSlug) {\n          openInvoice({\n            type: 'slug',\n            slug: subscription.invoiceSlug,\n          });\n        }\n        loadStarStatus();\n        break;\n      }\n      case 'renew': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: false });\n        break;\n      }\n      case 'cancel': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: true });\n        break;\n      }\n    }\n    closeStarsSubscriptionModal();\n  });\n\n  const starModalData = useMemo(() => {\n    if (!subscription || !peer) {\n      return undefined;\n    }\n\n    const {\n      pricing, until, isCancelled, canRefulfill, photo, title, hasBotCancelled,\n    } = subscription;\n\n    const isBotSubscription = isApiPeerUser(peer);\n\n    const header = (\n      <div className={styles.header}>\n        <div className={styles.avatarWrapper}>\n          <Avatar peer={!photo ? peer : undefined} webPhoto={photo} size=\"giant\" />\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"adaptive\" />\n        </div>\n        <img\n          className={buildClassName(styles.starsBackground)}\n          src={StarsBackground}\n          alt=\"\"\n          draggable={false}\n        />\n        <h1 className={styles.title}>{title || oldLang('StarsSubscriptionTitle')}</h1>\n        <p className={styles.amount}>\n          {lang('StarsPerMonth', {\n            amount: pricing.amount,\n          }, {\n            withNodes: true,\n            specialReplacement: {\n              [STARS_ICON_PLACEHOLDER]: <StarIcon className={styles.amountStar} size=\"adaptive\" type=\"gold\" />,\n            },\n          })}\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      oldLang(isBotSubscription ? 'StarsSubscriptionBot' : 'StarsSubscriptionChannel'),\n      { chatId: peer.id },\n    ]);\n\n    if (title) {\n      tableData.push([\n        oldLang('StarsSubscriptionBotProduct'),\n        title,\n      ]);\n    }\n\n    const hasExpired = until < Date.now() / 1000;\n    tableData.push([\n      oldLang(hasExpired ? 'StarsSubscriptionUntilExpired'\n        : isCancelled ? 'StarsSubscriptionUntilExpires' : 'StarsSubscriptionUntilRenews'),\n      formatDateTimeToString(until * 1000, oldLang.code, true),\n    ]);\n\n    const footerTos = lang('StarsTransactionTOS', {\n      link: <SafeLink url={lang('StarsTransactionTOSLink')} text={lang('StarsTransactionTOSLinkText')} />,\n    }, {\n      withNodes: true,\n    });\n\n    const footer = (\n      <span className={styles.footer}>\n        <p className={styles.secondary}>{footerTos}</p>\n        {isCancelled && (\n          <p className={styles.danger}>\n            {oldLang(hasBotCancelled ? 'StarsSubscriptionBotCancelledText' : 'StarsSubscriptionCancelledText')}\n          </p>\n        )}\n        {canRefulfill && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionRefulfillInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionExpiredInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && !hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionCancelInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {buttonState !== 'hidden' && (\n          <Button\n            size=\"smaller\"\n            color={buttonState === 'cancel' ? 'danger' : 'primary'}\n            isText={buttonState === 'cancel'}\n            onClick={handleButtonClick}\n          >\n            {oldLang(\n              buttonState === 'cancel' ? 'StarsSubscriptionCancel'\n                : buttonState === 'refulfill' ? 'StarsSubscriptionRefulfill'\n                  : buttonState === 'restart' ? 'StarsSubscriptionAgain'\n                    : buttonState === 'renew' ? 'StarsSubscriptionRenew' : 'OK',\n            )}\n          </Button>\n        )}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [buttonState, lang, oldLang, peer, subscription]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(subscription)}\n      className={styles.modal}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      onClose={closeStarsSubscriptionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const peerId = modal?.subscription.peerId;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    return {\n      peer,\n    };\n  },\n)(StarsSubscriptionModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"PaidMediaThumb-module__root\",\"preview\":\"PaidMediaThumb-module__preview\",\"count\":\"PaidMediaThumb-module__count\",\"thumb\":\"PaidMediaThumb-module__thumb\",\"noOutline\":\"PaidMediaThumb-module__noOutline\",\"itemCount1\":\"PaidMediaThumb-module__itemCount1\",\"itemCount2\":\"PaidMediaThumb-module__itemCount2\",\"itemCount3\":\"PaidMediaThumb-module__itemCount3\",\"blurry\":\"PaidMediaThumb-module__blurry\",\"full\":\"PaidMediaThumb-module__full\",\"fadeIn\":\"PaidMediaThumb-module__fadeIn\"};","import { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiMediaExtendedPreview, BoughtPaidMedia } from '../../../../api/types';\n\nimport { getMediaHash, getMediaThumbUri } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useMedia from '../../../../hooks/useMedia';\n\nimport Icon from '../../../common/icons/Icon';\nimport MediaSpoiler from '../../../common/MediaSpoiler';\n\nimport styles from './PaidMediaThumb.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  media: ApiMediaExtendedPreview[] | BoughtPaidMedia[];\n  isTransactionPreview?: boolean;\n  onClick?: NoneToVoidFunction;\n};\n\nconst THUMB_LIMIT = 3;\nconst PREVIEW_THUMB_LIMIT = 2;\n\nconst PaidMediaThumb = ({\n  media, className, isTransactionPreview, onClick,\n}: OwnProps) => {\n  const count = Math.min(media.length, isTransactionPreview ? PREVIEW_THUMB_LIMIT : THUMB_LIMIT);\n  const isLocked = 'mediaType' in media[0];\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        styles[`itemCount${count}`],\n        isTransactionPreview && styles.preview,\n        className,\n      )}\n      dir=\"rtl\"\n      onClick={onClick}\n    >\n      {media.slice(0, count).reverse().map((item, i, arr) => {\n        const realIndex = arr.length - i - 1;\n        return 'mediaType' in item ? (\n          <MediaSpoiler\n            className={styles.thumb}\n            isVisible\n            width={item.width}\n            height={item.height}\n            thumbDataUri={item.thumbnail?.dataUri}\n          />\n        ) : (\n          <SingleMediaThumb\n            className={buildClassName(isTransactionPreview && realIndex > 0 && styles.noOutline)}\n            boughtMedia={item}\n            index={realIndex}\n          />\n        );\n      })}\n      {isLocked && (\n        <div className={styles.count}>\n          <Icon name=\"stars-lock\" />\n          {media.length > 1 ? media.length : ''}\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction SingleMediaThumb({\n  boughtMedia,\n  index,\n  className,\n}: {\n  boughtMedia: BoughtPaidMedia;\n  index?: number;\n  className?: string;\n}) {\n  const media = (boughtMedia.video || boughtMedia.photo)!;\n  const mediaHash = getMediaHash(media, 'pictogram');\n  const thumb = getMediaThumbUri(media);\n\n  const mediaBlob = useMedia(mediaHash);\n\n  return (\n    <div className={buildClassName(styles.thumb, index !== undefined && `stars-transaction-media-${index}`, className)}>\n      {thumb && <img className={styles.blurry} src={thumb} alt=\"\" />}\n      {mediaBlob && <img className={styles.full} src={mediaBlob} alt=\"\" />}\n    </div>\n  );\n}\n\nexport default memo(PaidMediaThumb);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsTransactionItem-module__root\",\"info\":\"StarsTransactionItem-module__info\",\"stars\":\"StarsTransactionItem-module__stars\",\"amount\":\"StarsTransactionItem-module__amount\",\"title\":\"StarsTransactionItem-module__title\",\"description\":\"StarsTransactionItem-module__description\",\"date\":\"StarsTransactionItem-module__date\",\"positive\":\"StarsTransactionItem-module__positive\",\"negative\":\"StarsTransactionItem-module__negative\",\"preview\":\"StarsTransactionItem-module__preview\",\"subscriptionStar\":\"StarsTransactionItem-module__subscriptionStar\",\"uniqueGiftBackground\":\"StarsTransactionItem-module__uniqueGiftBackground\",\"giftSticker\":\"StarsTransactionItem-module__giftSticker\"};","import { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransaction,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\nimport type { CustomPeer } from '../../../../types';\n\nimport { buildStarsTransactionCustomPeer, formatStarsTransactionAmount } from '../../../../global/helpers/payments';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { CUSTOM_PEER_PREMIUM } from '../../../../util/objects/customPeer';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport renderText from '../../../common/helpers/renderText';\nimport { getTransactionTitle, isNegativeStarsAmount } from '../helpers/transaction';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionItem.module.scss';\n\ntype OwnProps = {\n  transaction: ApiStarsTransaction;\n  className?: string;\n};\n\nconst GIFT_STICKER_SIZE = 36;\n\nfunction selectOptionalPeer(peerId?: string) {\n  return (global: GlobalState) => (\n    peerId ? selectPeer(global, peerId) : undefined\n  );\n}\n\nconst StarsTransactionItem = ({ transaction, className }: OwnProps) => {\n  const { openStarsTransactionModal } = getActions();\n  const {\n    date,\n    stars,\n    photo,\n    peer: transactionPeer,\n    extendedMedia,\n    subscriptionPeriod,\n  } = transaction;\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const peerId = transactionPeer.type === 'peer' ? transactionPeer.id : undefined;\n  const peer = useSelector(selectOptionalPeer(peerId));\n  const starGift = transaction.starGift;\n  const isUniqueGift = starGift?.type === 'starGiftUnique';\n  const giftSticker = starGift && getStickerFromGift(starGift);\n\n  const data = useMemo(() => {\n    let title = getTransactionTitle(oldLang, lang, transaction);\n    let description;\n    let status: string | undefined;\n    let avatarPeer: ApiPeer | CustomPeer | undefined;\n\n    if (transaction.peer.type === 'peer') {\n      description = peer && getPeerTitle(oldLang, peer);\n      avatarPeer = peer || CUSTOM_PEER_PREMIUM;\n    } else {\n      const customPeer = buildStarsTransactionCustomPeer(transaction.peer);\n      title = customPeer.title || oldLang(customPeer.titleKey!);\n      description = oldLang(customPeer.subtitleKey!);\n      avatarPeer = customPeer;\n    }\n\n    if (transaction.isGiftUpgrade && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.isGiftResale && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.photo) {\n      avatarPeer = undefined;\n    }\n\n    if (transaction.isRefund) {\n      status = oldLang('StarsRefunded');\n    }\n\n    if (transaction.hasFailed) {\n      status = oldLang('StarsFailed');\n    }\n\n    if (transaction.isPending) {\n      status = oldLang('StarsPending');\n    }\n\n    return {\n      title,\n      description,\n      avatarPeer,\n      status,\n    };\n  }, [oldLang, lang, peer, transaction]);\n\n  const previewContent = useMemo(() => {\n    if (isUniqueGift) {\n      const { backdrop } = getGiftAttributes(starGift)!;\n      const backgroundColors = [backdrop!.centerColor, backdrop!.edgeColor];\n\n      return (\n        <>\n          <RadialPatternBackground\n            className={styles.uniqueGiftBackground}\n            backgroundColors={backgroundColors}\n          />\n          <AnimatedIconFromSticker\n            className={styles.giftSticker}\n            sticker={giftSticker}\n            size={GIFT_STICKER_SIZE}\n            play={false}\n          />\n        </>\n      );\n    }\n\n    if (giftSticker) {\n      return (\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={GIFT_STICKER_SIZE}\n          play={false}\n        />\n      );\n    }\n\n    if (extendedMedia) {\n      return <PaidMediaThumb media={extendedMedia} isTransactionPreview />;\n    }\n\n    return (\n      <>\n        <Avatar size=\"medium\" webPhoto={photo} peer={data.avatarPeer} />\n        {Boolean(subscriptionPeriod) && (\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n        )}\n      </>\n    );\n  }, [isUniqueGift, extendedMedia, photo, data.avatarPeer, subscriptionPeriod, starGift, giftSticker]);\n\n  const handleClick = useLastCallback(() => {\n    openStarsTransactionModal({ transaction });\n  });\n\n  return (\n    <div className={buildClassName(styles.root, className)} onClick={handleClick}>\n      <div className={styles.preview}>\n        {previewContent}\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{data.title}</h3>\n        {data.description && (\n          <p className={styles.description}>{renderText(data.description)}</p>\n        )}\n        <p className={styles.date}>\n          {formatDateTimeToString(date * 1000, oldLang.code, true)}\n          {data.status && `  (${data.status})`}\n        </p>\n      </div>\n      <div className={styles.stars}>\n        <span\n          className={buildClassName(styles.amount, isNegativeStarsAmount(stars) ? styles.negative : styles.positive)}\n        >\n          {formatStarsTransactionAmount(lang, stars)}\n        </span>\n        <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsTransactionItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"StarsTransactionModal-module__modal\",\"positive\":\"StarsTransactionModal-module__positive\",\"negative\":\"StarsTransactionModal-module__negative\",\"header\":\"StarsTransactionModal-module__header\",\"uniqueGift\":\"StarsTransactionModal-module__uniqueGift\",\"amount\":\"StarsTransactionModal-module__amount\",\"title\":\"StarsTransactionModal-module__title\",\"description\":\"StarsTransactionModal-module__description\",\"tid\":\"StarsTransactionModal-module__tid\",\"refunded\":\"StarsTransactionModal-module__refunded\",\"totalStars\":\"StarsTransactionModal-module__totalStars\",\"starIcon\":\"StarsTransactionModal-module__starIcon\",\"footer\":\"StarsTransactionModal-module__footer\",\"starsBackground\":\"StarsTransactionModal-module__starsBackground\",\"copyIcon\":\"StarsTransactionModal-module__copyIcon\",\"mediaPreview\":\"StarsTransactionModal-module__mediaPreview\",\"subtitle\":\"StarsTransactionModal-module__subtitle\",\"starGiftSticker\":\"StarsTransactionModal-module__starGiftSticker\"};","import type { FC } from '../../../../lib/teact/teact';\nimport { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransactionPeer, ApiSticker,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { MediaViewerOrigin } from '../../../../types';\n\nimport { getMessageLink } from '../../../../global/helpers';\nimport {\n  buildStarsTransactionCustomPeer,\n  formatStarsTransactionAmount,\n} from '../../../../global/helpers/payments';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForStars,\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { getTransactionTitle, isNegativeStarsAmount } from '../helpers/transaction';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport SafeLink from '../../../common/SafeLink';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../../gift/UniqueGiftHeader';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionModal.module.scss';\n\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsTransactionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n  canPlayAnimatedEmojis?: boolean;\n  topSticker?: ApiSticker;\n  paidMessageCommission?: number;\n};\n\nconst StarsTransactionModal: FC<OwnProps & StateProps> = ({\n  modal,\n  peer,\n  canPlayAnimatedEmojis,\n  topSticker,\n  paidMessageCommission,\n}) => {\n  const { showNotification, openMediaViewer, closeStarsTransactionModal } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const { transaction } = modal || {};\n\n  const handleOpenMedia = useLastCallback(() => {\n    const media = transaction?.extendedMedia;\n    if (!media) return;\n\n    openMediaViewer({\n      origin: MediaViewerOrigin.StarsTransaction,\n      standaloneMedia: media.flatMap((item) => Object.values(item)),\n    });\n  });\n\n  const starModalData = useMemo(() => {\n    if (!transaction) {\n      return undefined;\n    }\n\n    const {\n      giveawayPostId, photo, stars, isGiftUpgrade, starGift, isGiftResale,\n    } = transaction;\n\n    const gift = transaction?.starGift;\n    const isUniqueGift = gift?.type === 'starGiftUnique';\n    const sticker = transaction?.starGift ? getStickerFromGift(transaction.starGift) : topSticker;\n\n    const giftAttributes = isUniqueGift ? getGiftAttributes(gift) : undefined;\n\n    const customPeer = (transaction.peer && transaction.peer.type !== 'peer'\n      && buildStarsTransactionCustomPeer(transaction.peer)) || undefined;\n\n    const peerId = transaction.peer?.type === 'peer' ? transaction.peer.id : undefined;\n    const toName = transaction.peer && oldLang(getStarsPeerTitleKey(transaction.peer));\n\n    const title = getTransactionTitle(oldLang, lang, transaction);\n\n    const messageLink = peer && transaction.messageId && !isGiftUpgrade\n      ? getMessageLink(peer, undefined, transaction.messageId) : undefined;\n    const giveawayMessageLink = peer && giveawayPostId ? getMessageLink(peer, undefined, giveawayPostId) : undefined;\n\n    const media = transaction.extendedMedia;\n\n    const mediaAmount = media?.length || 0;\n    const areAllPhotos = media?.every((m) => !m.video);\n    const areAllVideos = media?.every((m) => !m.photo);\n\n    const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', mediaAmount)\n      : areAllVideos ? oldLang('Stars.Transfer.Videos', mediaAmount)\n        : oldLang('Media', mediaAmount);\n\n    const description = transaction.description\n      || (isGiftUpgrade && starGift?.type === 'starGiftUnique' ? starGift.title : undefined)\n      || (media ? mediaText : undefined);\n\n    const shouldDisplayAvatar = !media && !sticker;\n    const avatarPeer = !photo ? (peer || customPeer) : undefined;\n\n    const uniqueGiftHeader = isUniqueGift && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n          resellPrice={transaction.stars}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        {media && (\n          <PaidMediaThumb\n            className={buildClassName(styles.mediaPreview, 'transaction-media-preview')}\n            media={media}\n            onClick={handleOpenMedia}\n          />\n        )}\n        {!media && sticker && (\n          <AnimatedIconFromSticker\n            key={transaction.id}\n            sticker={sticker}\n            play={canPlayAnimatedEmojis}\n            noLoop\n          />\n        )}\n        {shouldDisplayAvatar && (\n          <Avatar peer={avatarPeer} webPhoto={photo} size=\"giant\" />\n        )}\n        {!sticker && (\n          <img\n            className={buildClassName(styles.starsBackground)}\n            src={StarsBackground}\n            alt=\"\"\n            draggable={false}\n          />\n        )}\n        {Boolean(title) && <h1 className={styles.title}>{title}</h1>}\n        <p className={styles.description}>{description}</p>\n        <p className={styles.amount}>\n          <span\n            className={buildClassName(styles.amount, isNegativeStarsAmount(stars) ? styles.negative : styles.positive)}\n          >\n            {formatStarsTransactionAmount(lang, stars)}\n          </span>\n          <StarIcon type=\"gold\" size=\"middle\" />\n          {transaction.isRefund && (\n            <p className={styles.refunded}>{lang('Refunded')}</p>\n          )}\n        </p>\n        {Boolean(transaction.paidMessages && transaction.starRefCommision && paidMessageCommission) && (\n          <p className={styles.description}>\n            {lang(\n              'PaidMessageTransactionDescription',\n              { percent: formatPercent(paidMessageCommission! / 10) },\n              {\n                withNodes: true,\n                withMarkdown: true,\n              },\n            )}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    if (transaction && !transaction.paidMessages && !isGiftResale) {\n      tableData.push([\n        oldLang('StarsTransaction.StarRefReason.Title'),\n        oldLang('StarsTransaction.StarRefReason.Program'),\n      ]);\n    }\n\n    if (isGiftUpgrade) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        oldLang('StarGiftReasonUpgrade'),\n      ]);\n    }\n\n    if (isGiftResale) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        isNegativeStarsAmount(transaction.stars)\n          ? lang('StarGiftSaleTransaction')\n          : lang('StarGiftPurchaseTransaction'),\n      ]);\n    }\n\n    let peerLabel;\n    if (isGiftUpgrade) {\n      peerLabel = oldLang('Stars.Transaction.GiftFrom');\n    } else if (isNegativeStarsAmount(stars) || transaction.isMyGift) {\n      peerLabel = oldLang('Stars.Transaction.To');\n    } else if (transaction.starRefCommision && !transaction.paidMessages && !isGiftResale) {\n      peerLabel = oldLang('StarsTransaction.StarRefReason.Miniapp');\n    } else if (peerId) {\n      peerLabel = oldLang('Star.Transaction.From');\n    } else {\n      peerLabel = oldLang('Stars.Transaction.Via');\n    }\n\n    tableData.push([\n      peerLabel,\n      peerId ? { chatId: peerId } : toName || '',\n    ]);\n\n    if (transaction.starRefCommision && transaction.paidMessages) {\n      tableData.push([\n        lang('PaidMessageTransactionTotal'),\n        formatStarsAsIcon(lang,\n          transaction.stars.amount / ((100 - transaction.starRefCommision) / 100),\n          { asFont: false, className: styles.starIcon, containerClassName: styles.totalStars }),\n      ]);\n    }\n\n    if (messageLink) {\n      tableData.push([oldLang('Stars.Transaction.Reaction.Post'), <SafeLink url={messageLink} text={messageLink} />]);\n    }\n\n    if (giveawayMessageLink) {\n      tableData.push([oldLang('BoostReason'), <SafeLink url={giveawayMessageLink} text={oldLang('Giveaway')} />]);\n      tableData.push([oldLang('Gift'), oldLang('Stars', transaction.stars, 'i')]);\n    }\n\n    if (transaction.id) {\n      tableData.push([\n        oldLang('Stars.Transaction.Id'),\n        (\n          <>\n            <div\n              className={styles.tid}\n              onClick={() => {\n                copyTextToClipboard(transaction.id!);\n                showNotification({\n                  message: oldLang('StarsTransactionIDCopied'),\n                });\n              }}\n            >\n              {transaction.id}\n            </div>\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </>\n        ),\n      ]);\n    }\n\n    tableData.push([\n      oldLang('Stars.Transaction.Date'),\n      formatDateTimeToString(transaction.date * 1000, oldLang.code, true),\n    ]);\n\n    const footerText = oldLang('lng_credits_box_out_about');\n    const footerTextParts = footerText.split('{link}');\n\n    const footer = (\n      <span className={styles.footer}>\n        {footerTextParts[0]}\n        <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />\n        {footerTextParts[1]}\n      </span>\n    );\n\n    return {\n      header: isUniqueGift ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [transaction, oldLang, lang, peer, canPlayAnimatedEmojis, topSticker, paidMessageCommission]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(transaction)}\n      className={styles.modal}\n      hasBackdrop={transaction?.starGift?.type === 'starGiftUnique'}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      buttonText={oldLang('OK')}\n      onClose={closeStarsTransactionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const peerId = modal?.transaction?.peer?.type === 'peer' && modal.transaction.peer.id;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n    const paidMessageCommission = global.appConfig?.starsPaidMessageCommissionPermille;\n\n    const starCount = modal?.transaction.stars;\n    const starsGiftSticker = modal?.transaction.isGift && selectGiftStickerForStars(global, starCount?.amount);\n\n    return {\n      peer,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n      topSticker: starsGiftSticker,\n      paidMessageCommission,\n    };\n  },\n)(StarsTransactionModal));\n\nfunction getStarsPeerTitleKey(peer: ApiStarsTransactionPeer) {\n  switch (peer.type) {\n    case 'appStore':\n      return 'AppStore';\n    case 'playMarket':\n      return 'PlayMarket';\n    case 'fragment':\n      return 'Fragment';\n    case 'premiumBot':\n      return 'StarsTransactionBot';\n    case 'ads':\n      return 'StarsTransactionAds';\n    case 'api':\n      return 'Stars.Intro.Transaction.TelegramBotApi.Subtitle';\n    default:\n      return 'Stars.Transaction.Unsupported.Title';\n  }\n}\n","import { useMemo, useRef } from '../../lib/teact/teact';\n\n/**\n * Use this hook to bind `<Transition />` animation to changes in the dependency array.\n * Use optional parameter `noAnimation` if you want to prevent the animation even if the dependency array changes.\n*/\nexport function useTransitionActiveKey(deps: unknown[], noAnimation?: boolean): number {\n  const activeKey = useRef(0);\n\n  useMemo(() => {\n    if (!noAnimation) activeKey.current += 1;\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [...deps]);\n\n  return activeKey.current;\n}\n","import {\n  getIsHeavyAnimating, useCallback, useRef, useState,\n} from '../lib/teact/teact';\n\nimport useForceUpdate from './useForceUpdate';\nimport useHeavyAnimation from './useHeavyAnimation';\nimport useRunDebounced from './useRunDebounced';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function useDebouncedMemo<R, D extends unknown[]>(\n  resolverFn: () => R, ms: number, dependencies: D,\n): R | undefined {\n  const [value, setValue] = useState<R>();\n  const { isFrozen, updateWhenUnfrozen } = useHeavyAnimationFreeze();\n  const runDebounced = useRunDebounced(ms, true);\n\n  useSyncEffect(() => {\n    if (isFrozen) {\n      updateWhenUnfrozen();\n      return;\n    }\n\n    runDebounced(() => {\n      setValue(resolverFn());\n    });\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [...dependencies, isFrozen]);\n\n  return value;\n}\n\nfunction useHeavyAnimationFreeze() {\n  const isPending = useRef(false);\n\n  const updateWhenUnfrozen = useCallback(() => {\n    isPending.current = true;\n  }, []);\n\n  const forceUpdate = useForceUpdate();\n  const handleUnfreeze = useCallback(() => {\n    if (!isPending.current) {\n      return;\n    }\n\n    isPending.current = false;\n    forceUpdate();\n  }, [forceUpdate]);\n  useHeavyAnimation(noop, handleUnfreeze);\n\n  return {\n    isFrozen: getIsHeavyAnimating(),\n    updateWhenUnfrozen,\n  };\n}\n\nfunction noop() {\n}\n","import { useState } from '../lib/teact/teact';\n\nimport type { ApiChat } from '../api/types';\n\nimport { callApi } from '../api/gramjs';\nimport useAsync from './useAsync';\nimport useDebouncedMemo from './useDebouncedMemo';\nimport useLastCallback from './useLastCallback';\n\nconst DEBOUNCE_TIMEOUT = 300;\n\nexport async function peerGlobalSearch(query: string) {\n  const searchResult = await callApi('searchChats', { query });\n  if (!searchResult) return undefined;\n\n  const ids = [...searchResult.accountResultIds, ...searchResult.globalResultIds];\n\n  return ids;\n}\n\nexport function prepareChatMemberSearch(chat: ApiChat) {\n  return async (query: string) => {\n    const searchResult = await callApi('fetchMembers', {\n      chat,\n      memberFilter: 'search',\n      query,\n    });\n\n    return searchResult?.members?.map((member) => member.userId) || [];\n  };\n}\n\nexport default function usePeerSearch({\n  query,\n  queryFn = peerGlobalSearch,\n  defaultValue,\n  debounceTimeout = DEBOUNCE_TIMEOUT,\n  isDisabled,\n}: {\n  query: string;\n  queryFn?: (query: string) => Promise<string[] | undefined>;\n  defaultValue?: string[];\n  debounceTimeout?: number;\n  isDisabled?: boolean;\n}) {\n  const debouncedQuery = useDebouncedMemo(() => query, debounceTimeout, [query]);\n  const [currentResultsQuery, setCurrentResultsQuery] = useState<string>('');\n  const searchQuery = !query ? query : debouncedQuery; // Ignore debounce if query is empty\n  const queryCallback = useLastCallback(queryFn);\n\n  const result = useAsync(async () => {\n    if (!searchQuery || isDisabled) {\n      setCurrentResultsQuery('');\n      return Promise.resolve(defaultValue);\n    }\n\n    const answer = await queryCallback(searchQuery);\n    setCurrentResultsQuery(searchQuery);\n    return answer;\n  }, [searchQuery, defaultValue, queryCallback, isDisabled], defaultValue);\n\n  return {\n    ...result,\n    currentResultsQuery,\n  };\n}\n"],"names":["default","StarsGiftModal","StarsGiftingPickerModal","StarsBalanceModal","StarPaymentModal","StarsTransactionInfoModal","StarsSubscriptionModal","PaidReactionModal","GiftModal","GiftRecipientPicker","GiftInfoModal","GiftResalePriceComposerModal","GiftUpgradeModal","GiftStatusInfoModal","GiftWithdrawModal","GiftTransferModal","ChatRefundModal","memo","useMemo","getGiftAttributes","REM","AnimatedIconFromSticker","Avatar","Icon","RadialPatternBackground","styles","jsx","_jsx","jsxs","_jsxs","AVATAR_SIZE","GIFT_STICKER_SIZE","GiftTransferPreview","peer","gift","giftAttributes","undefined","className","root","children","giftPreview","backdrop","backgroundColors","centerColor","edgeColor","patternColor","patternIcon","pattern","sticker","size","model","name","arrow","avatar","useState","getActions","getGlobal","withGlobal","SERVICE_NOTIFICATIONS_USER_ID","isDeletedUser","isUserBot","filterPeersByQuery","unique","sortChatIds","useLastCallback","useOldLang","PeerPicker","PickerModal","isOpen","currentUserId","activeListIds","archivedListIds","userIds","closeStarsGiftingPickerModal","openStarsGiftModal","oldLang","searchQuery","setSearchQuery","displayedUserIds","usersById","users","byId","combinedIds","filteredUserIds","ids","query","type","filter","id","user","isSupport","handleSelectedUserIdsChange","newSelectedId","length","forUserId","onClose","title","hasCloseButton","shouldAdaptToSearch","withFixedHeight","confirmButtonText","onEnter","picker","itemIds","filterValue","filterPlaceholder","onFilterChange","isSearchable","withDefaultPadding","withStatus","onSelectedIdChange","global","chats","listIds","contactList","active","archived","useEffect","MAIN_THREAD_ID","getPeerTitle","isApiPeerUser","selectPeer","selectPeerPaidMessagesStars","selectTabState","selectTheme","selectThemeValues","selectUserFullInfo","buildClassName","buildStyle","formatCurrency","formatStarsAsIcon","useCustomBackground","useLang","PremiumProgress","ActionMessage","Button","Link","ListItem","Switcher","TextArea","LIMIT_DISPLAY_THRESHOLD","GiftComposer","giftByStars","peerId","captionLimit","theme","isBackgroundBlurred","backgroundColor","customBackground","isPaymentFormLoading","starBalance","paidMessagesStars","areUniqueStarGiftsDisallowed","shouldDisallowLimitedStarGifts","sendStarGift","sendPremiumGiftByStars","openInvoice","openGiftUpgradeModal","openStarsBalanceModal","lang","giftMessage","setGiftMessage","shouldHideName","setShouldHideName","shouldPayForUpgrade","setShouldPayForUpgrade","shouldPayByStars","setShouldPayByStars","customBackgroundValue","isStarGift","isPremiumGift","hasPremiumByStars","isPeerUser","isSelf","localMessage","currentGift","chatId","isOutgoing","senderId","date","Math","floor","Date","now","content","action","mediaType","amount","currency","months","message","text","isNameHidden","starsToConvert","canUpgrade","alreadyPaidUpgradeStars","upgradeStars","fromId","handleGiftMessageChange","e","target","value","handleShouldHideNameChange","handleShouldPayForUpgradeChange","toggleShouldPayByStars","handleOpenUpgradePreview","giftId","handleGetMoreStars","handleMainButtonClick","shouldUpgrade","userId","option","canUseStarsPayment","renderOptionsSection","symbolsLeft","optionsSection","messageInput","onChange","label","maxLength","maxLengthIndicator","toString","switcher","narrow","ripple","onClick","stars","switcherStarIcon","withNodes","checked","description","link","isPrimary","withMarkdown","Boolean","disabled","receiver","renderFooter","asFont","footer","availabilityRemains","progress","availabilityTotal","rightText","count","leftText","limited","mainButton","isLoading","bgClassName","background","withTransition","customBgImage","customBgColor","blurred","actionMessageView","inert","style","threadId","appearanceOrder","spacer","isBlurred","userFullInfo","isGiftForSelf","disallowedGifts","shouldDisallowUniqueStarGifts","tabState","balance","appConfig","starGiftMaxMessageLength","selectCanPlayAnimatedEmojis","selectGiftStickerForDuration","formatCurrencyAsString","GiftRibbon","GiftItemPremium","canPlayAnimatedEmojis","baseMonthAmount","optionByStars","handleGiftClick","perMonth","discount","ceil","renderMonths","caption","pluralValue","monthsDescription","container","tabIndex","role","play","noLoop","nonInteractive","buy","pill","fluid","starsPriceBlock","starsPriceIcon","color","percent","useRef","getStickerFromGift","useOnIntersect","StickerView","GiftItemStar","observeIntersection","isResale","openGiftInfoModal","ref","stickerRef","isVisible","setIsVisible","isGiftUnique","uniqueGift","regularGift","resellPriceInStars","resellMinStars","priceInStarsAsString","number","isLimited","isSoldOut","radialPatternBackdrop","backdropColors","radialPattern","giftNumber","giftRibbon","entry","visible","isIntersecting","starGift","stickerWrapper","observeIntersectionForPlaying","observeIntersectionForLoading","containerRef","shouldPreloadPreview","withSparkleEffect","star","STARS_CURRENCY_CODE","getUserFullName","isApiPeerChat","throttle","useCurrentOrPrev","useIntersectionObserver","SafeLink","Modal","Transition","BalanceBlock","GiftSendingOptions","GiftModalResaleScreen","GiftResaleFilters","StarGiftCategoryList","StarsBackground","Fragment","_Fragment","INTERSECTION_THROTTLE","SCROLL_THROTTLE","runThrottledForScroll","cb","modal","starGiftsById","starGiftIdsByCategory","resaleGiftsCount","areResaleGiftsLoading","closeGiftModal","resetResaleGifts","loadResaleGifts","dialogRef","transitionRef","giftHeaderRef","scrollerRef","renderingModal","chat","selectedGift","setSelectedGift","selectedResellGift","setSelectedResellGift","shouldShowMainScreenHeader","setShouldShowMainScreenHeader","isMainScreenHeaderForStarGifts","setIsMainScreenHeaderForStarGifts","isGiftScreenHeaderForStarGifts","setIsGiftScreenHeaderForStarGifts","selectedCategory","setSelectedCategory","areAllGiftsDisallowed","shouldDisallowPremiumGifts","disallowedGiftTypes","Object","values","every","areUnlimitedStarGiftsDisallowed","shouldDisallowUnlimitedStarGifts","areLimitedStarGiftsDisallowed","allGifts","gifts","filteredGifts","sort","prevGift","giftsByStars","mapGifts","Map","forEach","find","starsGift","set","baseGift","reduce","prev","observe","rootRef","throttleMs","isDisabled","isResaleScreen","isGiftScreen","shouldShowHeader","isHeaderForStarGifts","handleScroll","currentTarget","scrollTop","current","top","headerTop","getBoundingClientRect","transitionTop","giftPremiumDescription","url","starGiftDescription","renderTextFilters","renderGiftPremiumHeader","headerText","center","renderGiftPremiumDescription","renderStarGiftsHeader","renderStarGiftsDescription","starGiftsDescription","recipientId","forPeerId","renderStarGifts","filteredGiftIds","starGiftsContainer","flatMap","shouldShowResale","availabilityResale","shouldDuplicateAsResale","elements","push","renderPremiumGifts","premiumGiftsGallery","map","get","onCategoryChanged","category","handleCloseModal","handleCloseButtonClick","renderMainScreen","main","onScroll","avatars","logoBackground","src","alt","draggable","activeKey","getCategoryKey","starGiftsTransition","isBackButton","buttonClassName","renderHeader","isFirstLoading","resaleHeaderContentContainer","resaleHeaderText","resaleHeaderDescription","commonHeaderText","isSlim","contentClassName","modalDialog","isLowStackPriority","closeButton","round","ariaLabel","withAddButton","header","resaleHeader","hiddenHeader","slideClassName","headerSlide","transition","onGiftClick","starGifts","resaleGifts","boostPerSentGift","boostsPerSentGift","idsByCategory","RESALE_GIFTS_LIMIT","LOCAL_TGS_URLS","useInfiniteScroll","AnimatedIconWithPreview","InfiniteScroll","resellGifts","areGiftsAllLoaded","areGiftsLoading","updateIteration","updateResaleGiftsFilter","resellGiftsIds","g","hasFilter","modelAttributes","patternAttributes","backdropAttributes","handleLoadMoreResellGifts","isGiftsEmpty","viewportIds","onLoadMore","handleResetGiftsFilter","renderNothingFoundGiftsWithFilter","notFoundGiftsRoot","tgsUrl","SearchingDuck","notFoundGiftsDescription","notFoundGiftsLink","resaleScreenRoot","resaleStarGiftsContainer","items","itemSelector","noFastList","preloadBackwards","scrollContainerClosest","isAllLoaded","useCallback","useContextMenuHandlers","Menu","MenuItem","SearchInput","ResaleGiftMenuAttributeSticker","attributes","counters","searchModelQuery","setSearchModelQuery","searchBackdropQuery","setSearchBackdropQuery","searchPatternQuery","setSearchPatternQuery","filteredAttributes","counter","attribute","found","attr","backdropId","documentId","filteredAndSearchedAttributes","filterBySearch","trim","item","toLowerCase","includes","sortMenuRef","isContextMenuOpen","isSortContextMenuOpen","contextMenuAnchor","sortContextMenuAnchor","handleContextMenu","handleSortContextMenu","handleContextMenuClose","handleSortContextMenuClose","handleContextMenuHide","handleSortContextMenuHide","getSortMenuElement","modelMenuRef","isModelContextMenuOpen","modelContextMenuAnchor","handleModelContextMenu","handleModelContextMenuClose","handleModelContextMenuHide","getModelMenuElement","backdropMenuRef","isBackdropContextMenuOpen","backdropContextMenuAnchor","handleBackdropContextMenu","handleBackdropContextMenuClose","handleBackdropContextMenuHide","getBackdropMenuElement","patternMenuRef","isPatternContextMenuOpen","patternContextMenuAnchor","handlePatternContextMenu","handlePatternContextMenuClose","handlePatternContextMenuHide","getPatternMenuElement","SortMenuButton","sortType","onTrigger","isMenuOpen","itemIcon","ModelMenuButton","attributesCount","BackdropMenuButton","PatternMenuButton","handleSortMenuItemClick","handleSelectedAllModelsClick","handleSelectedAllPatternsClick","handleSelectedAllBackdropsClick","handleModelMenuItemClick","modelAttribute","isActive","some","updatedAttributes","handlePatternMenuItemClick","patternAttribute","handleBackdropMenuItemClick","backdropAttribute","renderSortMenuItems","icon","menuItemText","menuItemIcon","renderSortMenu","anchor","menu","left","getMenuElement","autoClose","onCloseAnimationEnd","positionX","handleSearchModelInputReset","handleSearchBackdropInputReset","handleSearchPatternInputReset","handleSearchInputClick","stopPropagation","preventDefault","modelMenuItemsContainerRef","renderModelMenuItems","models","selectedAttributes","isSelectedAll","menuContentContainer","search","onReset","placeholder","isSelected","menuItemStickerText","renderModelMenu","renderBackdropMenuItems","backdrops","backdropAttributeMenuItemText","renderBackdropMenu","right","renderPatternMenuItems","patterns","renderPatternMenu","buttonsContainer","useDynamicColorListener","ATTRIBUTE_STICKER_SIZE","customColor","thumbClassName","thumb","useHorizontalScroll","StarIcon","starCategories","keys","Number","a","b","hasResale","handleItemClick","renderCategoryName","renderCategoryItem","selectedItem","isInteger","list","formatStarsTransactionAmount","useTransitionActiveKey","STICKER_SIZE","UniqueGiftHeader","subtitle","resellPrice","subtitleColor","textColor","transitionSlide","direction","getHasAdminRight","selectUser","copyTextToClipboard","formatDateTimeToString","formatStarsAsText","CUSTOM_PEER_HIDDEN","getServerTime","formatPercent","renderTextWithEntities","useFlag","BadgeButton","GiftMenuItems","ConfirmDialog","DropdownMenu","TableInfoModal","fromPeer","targetPeer","starGiftMaxConvertPeriod","hasAdminRights","currentUserEmojiStatus","collectibleEmojiStatuses","tonExplorerUrl","currentUser","recipientPeer","closeGiftInfoModal","changeGiftVisibility","convertGiftToStars","openChatWithInfo","focusMessage","showNotification","buyStarGift","isConvertConfirmOpen","openConvertConfirm","closeConvertConfirm","isConfirmModalOpen","setIsConfirmModalOpen","renderingFromPeer","renderingTargetPeer","isTargetChat","typeGift","isSavedGift","savedGift","isSender","canConvertDifference","conversionLeft","giftSticker","hasConvertOption","canFocusUpgrade","upgradeMsgId","canManage","inputGift","canBuyGift","giftOwnerTitle","ownerName","ownerId","owner","handleClose","handleFocusUpgraded","giftChat","messageId","handleTriggerVisibility","isUnsaved","shouldUnsave","handleConvertToStars","handleOpenUpgradeModal","handleBuyGift","closeConfirmModal","handleConfirmBuyGift","slug","SettingsMenuButton","headerButton","renderFooterButton","noForcedUpperCase","isShiny","saleDateInfo","firstSaleDate","code","lastSaleDate","modalData","isConverted","canConvert","isVisibleForMe","getTitle","uniqueGiftContextMenu","trigger","uniqueGiftModalHeader","modalHeader","giftResalePriceContainer","giftResalePriceStar","headerSplitButton","moreIcon","uniqueGiftHeader","regularHeader","soldOut","tableData","hasFrom","unknown","titleKey","starsValue","giftValue","starAmountIcon","total","ownerAddress","originalDetails","key","copyIcon","withEmojiStatus","uniqueAttribute","rarityPercent","issued","issuedCount","totalCount","openChat","recipient","sender","formattedDate","recipientLink","senderLink","tonLink","giftAddress","footerDescription","shouldSkipModal","hasBackdrop","withBalanceBar","noDefaultTitle","confirmLabel","confirmHandler","emojiStatus","statuses","selectCanGift","closeGiftRecipientPicker","openGiftModal","idsWithSelf","concat","filteredPeerIds","selectedId","forceShowSelf","InputText","starsStargiftResaleCommissionPermille","starsStargiftResaleAmountMin","starsStargiftResaleAmountMax","starsUsdWithdrawRate","closeGiftResalePriceComposerModal","updateStarGiftPrice","price","setPrice","hasPrice","handleChangePrice","parseFloat","result","isNaN","min","handleSellGift","variables","commission","isPriceCorrect","inputPrice","inputMode","teactExperimentControlled","descriptionContainer","toFixed","descriptionPrice","configPermille","starsUsdWithdrawRateX1000","selectIsCurrentUserPremium","useCustomEmoji","FullNameTitle","TableAboutModal","isCurrentUserPremium","closeGiftStatusInfoModal","setEmojiStatus","patternDocumentId","onWearClick","customEmoji","mockPeerWithStatus","profileBlock","userTitle","noFake","noVerified","statusSparklesColor","status","titleContainer","giftTitle","infoDescription","listItemData","lockIcon","ALL_FOLDER_ID","MEMO_EMPTY_ARRAY","useFolderManagerForOrderedIds","usePeerSearch","contactIds","closeGiftTransferModal","openGiftWithdrawModal","transferGift","setSelectedId","renderingSelectedPeerId","renderingSelectedPeer","orderedChatIds","sortedLocalIds","foundIds","currentResultsQuery","defaultValue","categories","isCustomPeer","avatarIcon","peerColorId","handleCategoryChange","displayIds","handleTransfer","transferStars","ignoreFreeze","onSelectedCategoryChange","withPeerUsernames","noScrollRestore","ApiMediaFormat","getStickerMediaHash","fetch","useInterval","Checkbox","PREVIEW_UPDATE_INTERVAL","closeGiftUpgradeModal","upgradeGift","renderingRecipient","shouldKeepOriginalDetails","setShouldKeepOriginalDetails","previewAttributes","setPreviewAttributes","handleUpgrade","updatePreviewAttributes","sampleAttributes","getRandomAttributes","patternStickers","modelStickers","mediaHashes","hash","BlobUrl","footerButton","onCheck","previousSelection","randomModel","random","randomPattern","randomBackdrop","SettingsScreens","getDays","PasswordForm","FRAGMENT_PEER","customPeerAvatarColor","hasPassword","passwordHint","closeGiftWithdrawModal","clearGiftWithdrawError","processStarGiftWithdrawal","openSettingsScreen","shouldShowPassword","setShouldShowPassword","exportDelay","canExportAt","max","handleSubmit","password","handleSetUpPassword","screen","TwoFaDisabled","exportHint","days","noPassword","shouldShowSubmit","error","errorKey","withRegular","clearError","hint","isPasswordVisible","shouldResetValue","onChangePasswordVisibility","submitLabel","onSubmit","settings","byKey","twoFaSettings","STARS_ICON_PLACEHOLDER","selectChat","selectChatMessage","formatInteger","renderText","useAppLayout","PeerBadge","Separator","StarSlider","MAX_TOP_REACTORS","DEFAULT_STARS_AMOUNT","MAX_REACTION_AMOUNT","ANONYMOUS_PEER","maxAmount","defaultPrivacy","sendPaidReactionsAsPeerIds","closePaidReactionModal","addLocalPaidReaction","loadSendPaidReactionsAs","starsAmount","setStarsAmount","isTouched","markTouched","unmarkTouched","shouldSendAsAnonymous","setShouldSendAsAnonymous","sendAsPeerId","setSendAsPeerId","senderPeer","isMobile","handleShowInTopSendersChange","handleAmountChange","filteredMyReactorIds","unshift","canChangeSendAsPeer","currentReactor","reactions","topReactors","reactor","isMy","isAnonymous","handleSend","isPrivate","shouldIgnoreDefaultPrivacy","handleSendAsPeerChange","renderMenuItem","itemInfo","itemTitle","itemSubtitle","SendAsPeerMenuButton","sendAsPeerMenuButton","sendAsPeerButtonAvatar","buttonDownIcon","sendAsPeersMenu","sendAsPeerMenu","bubbleClassName","sendAsPeerMenuBubble","all","hasCurrentSender","myReactorAmount","isCurrentReactor","localAmount","slice","chatTitle","hasAbsoluteCloseButton","sendAsPeersMenuContainer","headerControlPanel","modalBalance","slider","maxValue","topLabel","countText","topPeer","badgeText","badgeIcon","badgeClassName","topBadge","separator","checkBox","specialReplacement","buttonStar","disclaimer","paidReactionMaxAmount","paidReactionPrivacy","requestMeasure","requestMutation","useEffectOnce","useResizeObserver","AnimatedCounter","Sparkles","DEFAULT_POINTS","floatingBadgeRef","points","i","setValue","getProgress","updateSafeBadgePosition","badge","parent","parentElement","safeMinX","offsetLeft","offsetWidth","safeMaxX","setProperty","handleChange","event","newValue","getValue","floatingBadgeWrapper","floatingBadge","floatingBadgeText","floatingBadgeIcon","floatingBadgeTriangle","width","height","viewBox","fill","x1","x2","y1","y2","offset","d","preset","sparkles","step","pointIndex","findIndex","point","prevPoint","nextPoint","formatStarsAmount","balanceBlock","balanceInfo","smallerText","balanceBottom","addStarsButton","addStarsIcon","PAID_MESSAGES_PURPOSE","getChatTitle","selectIsPremiumPurchaseBlocked","TabList","StarTopupOptionList","StarsSubscriptionItem","StarsTransactionItem","StarLogo","TRANSACTION_TYPES","TRANSACTION_TABS_KEYS","TRANSACTION_ITEM_CLASS","SUBSCRIPTION_PURPOSE","starsBalanceState","canBuyPremium","shouldForceHeight","closeStarsBalanceModal","loadStarsTransactions","loadStarsSubscriptions","openStarsGiftingPickerModal","history","subscriptions","isHeaderHidden","setHeaderHidden","selectedTabIndex","setSelectedTabIndex","areBuyOptionsShown","showBuyOptions","hideBuyOptions","originStarsPayment","originReaction","originGift","topup","shouldOpenOnBuy","ongoingTransactionAmount","form","invoice","totalAmount","subscriptionInfo","subscriptionPricing","balanceNeeded","starsNeeded","starsNeededText","channel","bot","botId","purpose","shouldShowItems","transactions","shouldSuggestGifting","transactionTabs","tosText","parts","split","handleLoadMoreTransactions","handleLoadMoreSubscriptions","openStarsGiftingPickerModalHandler","handleBuyStars","minimal","starHeaderText","section","logo","starButton","isText","topupOptions","options","tos","sectionTitle","subscription","nextOffset","loadMore","loadMoreIcon","isRtl","renderCount","shouldRestoreHeight","noScrollRestoreOnTop","transaction","isRefund","tabs","tabClassName","tab","activeTab","onSwitchTab","getCustomPeerFromInvite","usePrevious","PeerChip","PaidMediaThumb","paidMediaMessage","paidMediaChat","closeStarsPaymentModal","sendStarPaymentForm","markLoading","unmarkLoading","inputInvoice","prevModal","isBotSubscription","subscriptionPeriod","canShowPeerItem","photo","descriptionText","botName","starsText","extendedMedia","paidMedia","areAllPhotos","media","duration","areAllVideos","mediaText","channelTitle","disclaimerText","inviteCustomPeer","handlePayment","paymentContent","paymentImages","dir","paymentPhoto","avatarStar","avatarWebPhoto","avatarSize","amountBadge","paymentImageBackground","botItem","paymentButton","messageInputInvoice","isPaidMedia","closeChatRefundModal","addNoPaidMessagesException","shouldRefundStars","setShouldRefundStars","renderingUser","starsToRefund","handleConfirmRemoveFee","shouldRefundCharged","closeStarsGiftModal","requestConfetti","selectedOption","setSelectedOption","showConfetti","dialog","querySelector","withStars","isCompleted","handleClick","renderGiftTitle","bottomText","headerInfo","starsGiftOptions","secondaryInfo","buildStarsTransactionCustomPeer","getTransactionTitle","paidMessages","isGiftResale","isNegativeStarsAmount","starRefCommision","isGiftUpgrade","isReaction","giveawayPostId","isMyGift","isGift","customPeer","nanos","formatDateToString","useSelector","selectProvidedPeer","openStarsSubscriptionModal","pricing","until","isCancelled","hasExpired","preview","subscriptionStar","info","webPhoto","statusEnded","statusPricing","statusPeriod","closeStarsSubscriptionModal","fulfillStarsSubscription","changeStarsSubscription","checkChatInvite","loadStarStatus","buttonState","canRefulfill","canRestart","chatInviteHash","invoiceSlug","handleButtonClick","starModalData","hasBotCancelled","avatarWrapper","starsBackground","amountStar","footerTos","secondary","danger","prevModalData","renderingModalData","getMediaHash","getMediaThumbUri","useMedia","MediaSpoiler","THUMB_LIMIT","PREVIEW_THUMB_LIMIT","isTransactionPreview","isLocked","reverse","arr","realIndex","thumbDataUri","thumbnail","dataUri","SingleMediaThumb","noOutline","boughtMedia","index","video","mediaHash","mediaBlob","blurry","full","CUSTOM_PEER_PREMIUM","selectOptionalPeer","openStarsTransactionModal","transactionPeer","isUniqueGift","data","avatarPeer","subtitleKey","hasFailed","isPending","previewContent","uniqueGiftBackground","negative","positive","MediaViewerOrigin","getMessageLink","selectGiftStickerForStars","StarsTransactionModal","topSticker","paidMessageCommission","openMediaViewer","closeStarsTransactionModal","handleOpenMedia","origin","StarsTransaction","standaloneMedia","toName","getStarsPeerTitleKey","messageLink","giveawayMessageLink","mediaAmount","m","shouldDisplayAvatar","mediaPreview","refunded","peerLabel","starIcon","containerClassName","totalStars","tid","footerText","footerTextParts","buttonText","starsPaidMessageCommissionPermille","starCount","starsGiftSticker","deps","noAnimation","getIsHeavyAnimating","useForceUpdate","useHeavyAnimation","useRunDebounced","useSyncEffect","useDebouncedMemo","resolverFn","ms","dependencies","isFrozen","updateWhenUnfrozen","useHeavyAnimationFreeze","runDebounced","forceUpdate","handleUnfreeze","noop","callApi","useAsync","DEBOUNCE_TIMEOUT","peerGlobalSearch","searchResult","accountResultIds","globalResultIds","prepareChatMemberSearch","memberFilter","members","member","queryFn","debounceTimeout","debouncedQuery","setCurrentResultsQuery","queryCallback","Promise","resolve","answer"],"sourceRoot":""}